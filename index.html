<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">

<script>
    (function(){
        if(''){
            if (prompt('请输入文章密码') !== ''){
                alert('密码错误！');
                history.back();
            }
        }
    })();
</script>








<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="Oduesp">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Oduesp">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Oduesp">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/">





  <title>Oduesp</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>
    <a href="https://github.com/oduesp" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewbox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Oduesp</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/26/Chtholly Nota Seniorious/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Oduesp">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/head.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Oduesp">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/26/Chtholly Nota Seniorious/" itemprop="url">Chtholly Nota Seniorious</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-04-26T13:29:26+08:00">
                2019-04-26
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/科学/" itemprop="url" rel="index">
                    <span itemprop="name">科学</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/04/26/Chtholly Nota Seniorious/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/04/26/Chtholly Nota Seniorious/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h4 id="C"><a href="#C" class="headerlink" title="C++"></a><a href="https://baike.baidu.com/item/%E7%8F%82%E6%9C%B5%E8%8E%89%C2%B7%E8%AF%BA%E5%A1%94%C2%B7%E7%91%9F%E5%B0%BC%E6%AC%A7%E9%87%8C%E6%96%AF/20617326?fr=aladdin" target="_blank" rel="noopener">C++</a></h4><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cout</span> << <span class="string">"Chtholly Nota Seniorious"</span> << <span class="built_in">endl</span>;</span><br></pre></td></tr></tbody></table></figure>
<p><img src="http://oduesp.github.io/images/keduoli.jpg" alt="keduoli"><br></p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2019/04/26/Chtholly Nota Seniorious/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/24/Algorithm0524/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Oduesp">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/head.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Oduesp">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/24/Algorithm0524/" itemprop="url">Konjak Record——2019.05.24</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-24T19:49:09+08:00">
                2019-05-24
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Konjak-Records/" itemprop="url" rel="index">
                    <span itemprop="name">Konjak Records</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/05/24/Algorithm0524/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/05/24/Algorithm0524/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="P3957-跳房子"><a href="#P3957-跳房子" class="headerlink" title="P3957 跳房子"></a><a href="https://www.luogu.org/problemnew/show/P3957" target="_blank" rel="noopener">P3957 跳房子</a></h3><p>R:二分答案+单调队列优化dp,是很好很好的题目。</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits stdc++.h></bits></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">500000</span> + <span class="number">10</span>, inf = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 二分答案+dp+单调队列</span></span><br><span class="line"><span class="comment"> * 首先如果花费g个金币能过，那么g+1个金币肯定也能过</span></span><br><span class="line"><span class="comment"> * 其次，f[i] = max(f[k]),f[k]具有范围，可以用单调队列维护，这样就可以有O(N)的复杂度</span></span><br><span class="line"><span class="comment"> * 由于有效范围是[x-r,x-l]，所以不能每来一个数据就直接把它加进单调队列，需要首先判断它的范围</span></span><br><span class="line"><span class="comment"> * 然后剔除垃圾数据，最后取队头，看看存不存在</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">int</span> N, D, K, dis[maxn], score[maxn], f[maxn], h, t, Q[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> g)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    f[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> j = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> mn = max(D - g, <span class="number">1</span>);</span><br><span class="line">    h = <span class="number">1</span>, t = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="comment">//首先把符合要求的加进来</span></span><br><span class="line">        <span class="keyword">for</span> (; dis[i] - dis[j] >= mn; j++) {</span><br><span class="line">            <span class="comment">//无法到达的不选</span></span><br><span class="line">            <span class="keyword">if</span> (f[j] == -inf) {</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">while</span> (h <= t && f[q[t]] <="f[j])" {< span><br><span class="line">                t--;</span><br><span class="line">            }</span><br><span class="line">            Q[++t] = j;</span><br><span class="line">        }</span><br><span class="line">        <span class="comment">//删除过期数据</span></span><br><span class="line">        <span class="keyword">while</span> (h <= t && dis[i] - dis[q[h]]> g + D) {</=></span><br><span class="line">            h++;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span> (h <= t) {< span><br><span class="line">            f[i] = f[Q[h]] + score[i];</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            f[i] = -inf;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span> (f[i] >= K) {</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="comment">//freopen("C:\\Users\\hjw\\Downloads\\testdata.in", "r", stdin);</span></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>, &N, &D, &K);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">register</span> <span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++)< span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &dis[i], &score[i]);</span><br><span class="line">    <span class="keyword">int</span> l = <span class="number">0</span>, r = dis[N], ans = <span class="number">-1</span>;</span><br><span class="line">    <span class="comment">/**首先写一个二分答案的框架**/</span></span><br><span class="line">    <span class="keyword">while</span> (l <= r) {< span><br><span class="line">        <span class="keyword">int</span> mid = (l + r) >> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (check(mid)) {</span><br><span class="line">            ans = mid;</span><br><span class="line">            r = mid - <span class="number">1</span>;</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            l = mid + <span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></=></span></=></span></=></span></=></span></=></span></pre></td></tr></tbody></table></figure>
<h3 id="P1879-USACO06NOV-玉米田Corn-Fields"><a href="#P1879-USACO06NOV-玉米田Corn-Fields" class="headerlink" title="P1879 [USACO06NOV]玉米田Corn Fields"></a><a href="https://www.luogu.org/problemnew/show/P1879" target="_blank" rel="noopener">P1879 [USACO06NOV]玉米田Corn Fields</a></h3><p>R:二维的状压dp,首先当前行和前前行的状态是无关的，只与前一行有关，判断相邻行的数字是否都为1，只需要位运算中的&运算就可以，如果一一比较会增加复杂度</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits stdc++.h></bits></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 判断两个数是否同一位都为1 s&t</span></span><br><span class="line"><span class="comment"> * 状态压缩dp</span></span><br><span class="line"><span class="comment"> * f[i][s]表示第i行以s为结尾的方案数量</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">13</span>, maxs = (<span class="number">1</span> << <span class="number">12</span>) + <span class="number">10</span>, mod = <span class="number">100000000</span>;</span><br><span class="line"><span class="keyword">int</span> f[maxn][maxs], N, M, chess[maxn][maxn], up, cache[maxn];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> r, <span class="keyword">int</span> s)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= m; i++) {< span><br><span class="line">        cache[i] = (s & (<span class="number">1</span> << (M - i))) != <span class="number">0</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= m; i++) {< span><br><span class="line">        <span class="keyword">if</span> (cache[i] && chess[r][i] == <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">if</span> (cache[i] == <span class="number">1</span> && cache[i - <span class="number">1</span>] == <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">}</span><br><span class="line"><span class="comment">//这个check2可以直接用s&s1是否为0代替</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check2</span><span class="params">(<span class="keyword">int</span> s, <span class="keyword">int</span> s1)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= m; i++) {< span><br><span class="line">        <span class="keyword">if</span> ((s & (<span class="number">1</span> << (i - <span class="number">1</span>))) != <span class="number">0</span> && (s1 & (<span class="number">1</span> << (i - <span class="number">1</span>))) != <span class="number">0</span>) {</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">cin</span> >> N >> M;</span><br><span class="line">    up = (<span class="number">1</span> << M) - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= m; j++) {< span><br><span class="line">            <span class="built_in">cin</span> >> chess[i][j];</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i <= up; i++) {< span><br><span class="line">        <span class="keyword">if</span> (check(<span class="number">1</span>, i)) {</span><br><span class="line">            f[<span class="number">1</span>][i] = <span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i <= n; i++) {< span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> s = <span class="number">0</span>; s <= up; s++) {< span><br><span class="line">            <span class="keyword">if</span> (!check(i, s)) {</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> l = <span class="number">0</span>; l <= up; l++) {< span><br><span class="line">                <span class="keyword">if</span> (!check(i - <span class="number">1</span>, l))</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                <span class="comment">//tql</span></span><br><span class="line">                <span class="keyword">if</span> (s & l)</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                f[i][s] = (f[i][s] + f[i - <span class="number">1</span>][l]) % mod;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i <= up; i++) {< span><br><span class="line">        ans = (ans + f[N][i]) % mod;</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span> << ans << <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></=></span></=></span></=></span></=></span></=></span></=></span></=></span></=></span></=></span></=></span></pre></td></tr></tbody></table></figure>
<h3 id="P1613-跑路"><a href="#P1613-跑路" class="headerlink" title="P1613 跑路"></a><a href="https://www.luogu.org/problemnew/show/P1613" target="_blank" rel="noopener">P1613 跑路</a></h3><p>R:一个空间器跑2^k, 那么它要跑2^(k+1)， 只能通过两次2^k,从小到大枚举K，中间枚举i,j，最后用堆优化后的迪杰斯特拉算法算一下最短路径。</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits stdc++.h></bits></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> P pair <span class="meta-string">< int, int></span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MP(d, v) make_pair(d, v)</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 一次的距离是2^k，所以先预处理边，再跑一遍最短路即可。</span></span><br><span class="line"><span class="comment"> * 如何预处理出2^k,需要用到倍增</span></span><br><span class="line"><span class="comment"> * G[i][j][k]表示i->j有一条距离为k的路径，那么如果i->t t->j分别有一条2^(k-1)</span></span><br><span class="line"><span class="comment"> * 的路径，那么i->j就有一条2^k的路径，所以只需要从小到大枚举k，然后再循环中枚举</span></span><br><span class="line"><span class="comment"> * i,j,t即可，需要用到一个四重的循环，注意每条边长度是1，所以G[i][j][0]=0（当i,j联通）</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="comment">//2^63-1,所以k最大应该为62</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">64</span>;</span><br><span class="line"><span class="comment">//存图</span></span><br><span class="line"><span class="keyword">int</span> G[maxn][maxn][maxn], N, M, dis[maxn][maxn], cache[maxn], visited[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dj</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    priority_queue<p, <span class="built_in">vector</p,></span><p>, greater</p><p>> q;<br><span class="line">    <span class="built_in">memset</span>(cache, <span class="number">0x3f</span>, <span class="keyword">sizeof</span>(cache));</span><br><span class="line">    cache[<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">    q.push(MP(<span class="number">0</span>, <span class="number">1</span>));</span><br><span class="line">    <span class="keyword">while</span> (!q.empty()) {</span><br><span class="line">        P h = q.top();</span><br><span class="line">        q.pop();</span><br><span class="line">        <span class="keyword">if</span> (visited[h.second]) {</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        }</span><br><span class="line">        visited[h.second] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> v = h.second, d = h.first;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">            <span class="keyword">if</span> (d + dis[v][i] < cache[i]) {</span><br><span class="line">                cache[i] = d + dis[v][i];</span><br><span class="line">                q.push(MP(cache[i], i));</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> cache[N];</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">memset</span>(dis, <span class="number">0x3f</span>, <span class="keyword">sizeof</span>(dis));</span><br><span class="line">    <span class="built_in">cin</span> >> N >> M;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= m; i++) {< span><br><span class="line">        <span class="keyword">int</span> u, v;</span><br><span class="line">        <span class="built_in">cin</span> >> u >> v;</span><br><span class="line">        G[u][v][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        dis[u][v] = <span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">//倍增</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">1</span>; k <= <span class="number">62</=></span>; k++) {</=></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= n; j++) {< span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> t = <span class="number">1</span>; t <= n; t++) {< span><br><span class="line">                    <span class="keyword">if</span> (G[i][t][k - <span class="number">1</span>] && G[t][j][k - <span class="number">1</span>]) {</span><br><span class="line">                        G[i][j][k] = <span class="number">1</span>;</span><br><span class="line">                        dis[i][j] = <span class="number">1</span>;</span><br><span class="line">                    }</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span> << dj() << <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></=></span></=></span></=></span></=></span></p></pre></td></tr></tbody></table></figure>
<h3 id="P2883-USACO07MAR-牛交通Cow-Traffic"><a href="#P2883-USACO07MAR-牛交通Cow-Traffic" class="headerlink" title="P2883 [USACO07MAR]牛交通Cow Traffic"></a><a href="https://www.luogu.org/problemnew/show/P2883" target="_blank" rel="noopener">P2883 [USACO07MAR]牛交通Cow Traffic</a></h3><p>R:之前没有遇到过的题目，使用bfs进行树形dp,由末端依次向上传播，而且当一个节点的入度为0时表示状态更新完毕，可以入队更新其他节点。</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits stdc++.h></bits></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">5005</span>, maxm = <span class="number">50010</span>;</span><br><span class="line"><span class="keyword">int</span> mc[maxn];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> {</span></span><br><span class="line">    <span class="keyword">int</span> v;</span><br><span class="line">    Node* next;</span><br><span class="line">};</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * dp问题,某条边的数量等于牧场->左端点方案*右端点->N的方案</span></span><br><span class="line"><span class="comment"> * 关键是求方案数</span></span><br><span class="line"><span class="comment"> * 需要用bfs的方法，如果一个点在队列内则不重复入队，因此需要一个Inq标志数组</span></span><br><span class="line"><span class="comment"> * 此外还有一个非常非常非常非常重要的细节就是：没更新一次后缀节点时，需要</span></span><br><span class="line"><span class="comment"> * 将后缀节点的入度减一，直到入度为0时才可以入队列</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="comment">//0表示正图，1存反图</span></span><br><span class="line">Node *h[maxn][<span class="number">2</span>], pool[maxm][<span class="number">2</span>];</span><br><span class="line"><span class="keyword">int</span> tot[<span class="number">2</span>], N, M, in[maxn][<span class="number">2</span>], dp[maxn][<span class="number">2</span>], Q[maxn], inq[maxn], head, tail, ans;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add_positive</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    Node* p = &pool[tot[<span class="number">0</span>]++][<span class="number">0</span>];</span><br><span class="line">    p->v = v, p->next = h[u][<span class="number">0</span>], h[u][<span class="number">0</span>] = p;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add_negative</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    Node* p = &pool[tot[<span class="number">1</span>]++][<span class="number">1</span>];</span><br><span class="line">    p->v = v, p->next = h[u][<span class="number">1</span>], h[u][<span class="number">1</span>] = p;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">bfs_p</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">memset</span>(inq, <span class="number">0</span>, <span class="keyword">sizeof</span>(inq));</span><br><span class="line">    head = <span class="number">1</span>, tail = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">register</span> <span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="keyword">if</span> (!in[i][<span class="number">0</span>]) {</span><br><span class="line">            inq[i] = <span class="number">1</span>;</span><br><span class="line">            dp[i][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">            Q[++tail] = i;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">while</span> (head <= tail) {< span><br><span class="line">        <span class="keyword">int</span> top = Q[head++];</span><br><span class="line">        inq[top] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (Node* p = h[top][<span class="number">0</span>]; p; p = p->next) {</span><br><span class="line">            dp[p->v][<span class="number">0</span>] += dp[top][<span class="number">0</span>];</span><br><span class="line">            in[p->v][<span class="number">0</span>]--;</span><br><span class="line">            <span class="keyword">if</span> (inq[p->v] || in[p->v][<span class="number">0</span>])</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            Q[++tail] = p->v;</span><br><span class="line">            inq[p->v] = <span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">bfs_n</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">memset</span>(inq, <span class="number">0</span>, <span class="keyword">sizeof</span>(inq));</span><br><span class="line">    head = <span class="number">1</span>, tail = <span class="number">0</span>;</span><br><span class="line">    Q[++tail] = N, inq[N] = <span class="number">1</span>, dp[N][<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (head <= tail) {< span><br><span class="line">        <span class="keyword">int</span> top = Q[head++];</span><br><span class="line">        inq[top] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (Node* p = h[top][<span class="number">1</span>]; p; p = p->next) {</span><br><span class="line">            dp[p->v][<span class="number">1</span>] += dp[top][<span class="number">1</span>];</span><br><span class="line">            in[p->v][<span class="number">1</span>]--;</span><br><span class="line">            <span class="keyword">if</span> (inq[p->v] || in[p->v][<span class="number">1</span>])</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            Q[++tail] = p->v;</span><br><span class="line">            inq[p->v] = <span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">cin</span> >> N >> M;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= m; i++) {< span><br><span class="line">        <span class="keyword">int</span> u, v;</span><br><span class="line">        <span class="built_in">cin</span> >> u >> v;</span><br><span class="line">        in[v][<span class="number">0</span>]++, in[u][<span class="number">1</span>]++;</span><br><span class="line">        add_positive(u, v), add_negative(v, u);</span><br><span class="line">    }</span><br><span class="line">    bfs_p();</span><br><span class="line">    bfs_n();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="keyword">for</span> (Node* p = h[i][<span class="number">0</span>]; p; p = p->next) {</span><br><span class="line">            <span class="keyword">int</span> u = i, v = p->v;</span><br><span class="line">            ans = max(ans, dp[u][<span class="number">0</span>] * dp[v][<span class="number">1</span>]);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span> << ans << <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></=></span></=></span></=></span></=></span></=></span></pre></td></tr></tbody></table></figure>
<h3 id="P2851-USACO06DEC-最少的硬币The-Fewest-Coins"><a href="#P2851-USACO06DEC-最少的硬币The-Fewest-Coins" class="headerlink" title="P2851 [USACO06DEC]最少的硬币The Fewest Coins"></a><a href="https://www.luogu.org/problemnew/show/P2851" target="_blank" rel="noopener">P2851 [USACO06DEC]最少的硬币The Fewest Coins</a></h3><p>R:这题需要用到鸽笼原理，我不会证明，f[i]表示付钱人付出i元的最小硬币（多重背包），g[i]表示店主找i元的最小硬币(最大枚举到Vmax^2可以找到最优解)（完全背包）</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits stdc++.h></bits></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 这个题需要用到鸽笼原理，我不会证明</span></span><br><span class="line"><span class="comment"> * 商店老板最大找钱数为Vmax^2,而买家只需要枚举到t+Vmax^2即可</span></span><br><span class="line"><span class="comment"> * 剩下的就是完全背包以及二进制优化的多重背包</span></span><br><span class="line"><span class="comment"> * 模板：</span></span><br><span class="line"><span class="comment"> * k=1,amount=num[i]</span></span><br><span class="line"><span class="comment"> * while(k<=amount){< span></=amount){<></span><br><span class="line"><span class="comment"> *     for(int j = mx;j>=k * v[i];j--){</span></span><br><span class="line"><span class="comment"> *         f[j] = min(f[j],f[j-k*v[i]]+k);</span></span><br><span class="line"><span class="comment"> *     }</span></span><br><span class="line"><span class="comment"> *     amount -= k;</span></span><br><span class="line"><span class="comment"> *     k *= 2;</span></span><br><span class="line"><span class="comment"> * }</span></span><br><span class="line"><span class="comment"> * for(int j = mx;j>=amount * v[i];j--){</span></span><br><span class="line"><span class="comment"> *     f[j] = min(f[j],f[j-amount*v[i]]+amount);</span></span><br><span class="line"><span class="comment"> * }</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">105</span>, maxv = <span class="number">120</span> * <span class="number">120</span> + <span class="number">10000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> N, T, V[maxn], C[maxn], f[maxv], g[maxv], mx, ans = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">cin</span> >> N >> T;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="built_in">cin</span> >> V[i];</span><br><span class="line">        mx = max(V[i] * V[i], mx);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="built_in">cin</span> >> C[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">memset</span>(f, <span class="number">0x3f</span>, <span class="keyword">sizeof</span>(f)), <span class="built_in">memset</span>(g, <span class="number">0x3f</span>, <span class="keyword">sizeof</span>(g));</span><br><span class="line">    f[<span class="number">0</span>] = g[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//跑一编完全背包</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = V[i]; j <= mx; j++) {< span><br><span class="line">            g[j] = min(g[j], g[j - V[i]] + <span class="number">1</span>);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">//跑一遍多重背包</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="keyword">if</span> (C[i] * V[i] >= mx + T) {</span><br><span class="line">            <span class="comment">//当作完全背包</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = V[i]; j <= mx + t; j++) {< span><br><span class="line">                f[j] = min(f[j], f[j - V[i]] + <span class="number">1</span>);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">int</span> k = <span class="number">1</span>, amount = C[i];</span><br><span class="line">        <span class="keyword">while</span> (k <= amount) {< span><br><span class="line">            <span class="comment">//01背包</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = mx + T; j >= k * V[i]; j--) {</span><br><span class="line">                f[j] = min(f[j], f[j - k * V[i]] + k);</span><br><span class="line">            }</span><br><span class="line">            amount -= k;</span><br><span class="line">            k *= <span class="number">2</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = mx + T; j >= amount * V[i]; j--) {</span><br><span class="line">            f[j] = min(f[j], f[j - amount * V[i]] + amount);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = T; i <= t + mx; i++) {< span><br><span class="line">        ans = min(ans, f[i] + g[i - T]);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (ans >= <span class="number">0x3f3f3f3f</span>) {</span><br><span class="line">        <span class="built_in">cout</span> << <span class="number">-1</span> << <span class="built_in">endl</span>;</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        <span class="built_in">cout</span> << ans << <span class="built_in">endl</span>;</span><br><span class="line">    }</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></=></span></=></span></=></span></=></span></=></span></=></span></=></span></=></span></span></pre></td></tr></tbody></table></figure>
<h3 id="P3914-染色计数"><a href="#P3914-染色计数" class="headerlink" title="P3914 染色计数"></a><a href="https://www.luogu.org/problemnew/show/P3914" target="_blank" rel="noopener">P3914 染色计数</a></h3><p>R:树形dp</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits stdc++.h></bits></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 树形dp，dp[j][k]表示j节点颜色为k的方案数，等于儿子的方案数连乘</span></span><br><span class="line"><span class="comment"> * 用一个数组保存儿子总方案数，则不等于的减去就可以</span></span><br><span class="line"><span class="comment"> * 注意用cin,cout会超时</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">5005</span>, mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"><span class="keyword">int</span> N, M;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> {</span></span><br><span class="line">    <span class="keyword">int</span> v;</span><br><span class="line">    Node* next;</span><br><span class="line">};</span><br><span class="line">Node *h[maxn], pool[maxn << <span class="number">1</span>];</span><br><span class="line"><span class="keyword">int</span> tot, dp[maxn][maxn], total[maxn];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add_edge</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    Node* p = &pool[tot++];</span><br><span class="line">    p->v = v, p->next = h[u], h[u] = p;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> root, <span class="keyword">int</span> fa)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">for</span> (Node* p = h[root]; p; p = p->next) {</span><br><span class="line">        <span class="keyword">if</span> (p->v == fa) {</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        }</span><br><span class="line">        dfs(p->v, root);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">register</span> <span class="keyword">int</span> i = <span class="number">1</span>; i <= m; i++) {< span><br><span class="line">            <span class="keyword">int</span> num = (total[p->v] - dp[p->v][i] + mod) % mod;</span><br><span class="line">            dp[root][i] = ((ll)dp[root][i] * (ll)num) % mod;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">register</span> <span class="keyword">int</span> i = <span class="number">1</span>; i <= m; i++) {< span><br><span class="line">        total[root] = (total[root] + dp[root][i]) % mod;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &N, &M);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">register</span> <span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="keyword">int</span> k;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &k);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">register</span> <span class="keyword">int</span> j = <span class="number">1</span>; j <= k; j++) {< span><br><span class="line">            <span class="keyword">int</span> c;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &c);</span><br><span class="line">            dp[i][c] = <span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">register</span> <span class="keyword">int</span> i = <span class="number">1</span>; i < N; i++) {</span><br><span class="line">        <span class="keyword">int</span> u, v;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &u, &v);</span><br><span class="line">        add_edge(u, v), add_edge(v, u);</span><br><span class="line">    }</span><br><span class="line">    dfs(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, total[<span class="number">1</span>]);</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></=></span></=></span></=></span></=></span></pre></td></tr></tbody></table></figure>
<h3 id="P3147-USACO16OPEN-262144"><a href="#P3147-USACO16OPEN-262144" class="headerlink" title="P3147 [USACO16OPEN]262144"></a><a href="https://www.luogu.org/problemnew/show/P3147" target="_blank" rel="noopener">P3147 [USACO16OPEN]262144</a></h3><p>R:思维题，不会,j 是两个 j-1 合并而成的，因此转移方程有点像是倍增</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits stdc++.h></bits></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> maxx(a,b) a>b?a:b</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 手写的max似乎比std里面的max快</span></span><br><span class="line"><span class="comment"> * 这题的转移方程太难:</span></span><br><span class="line"><span class="comment"> * f[i][j]表示以i为起点，合并成数字j时的区间终点.</span></span><br><span class="line"><span class="comment"> * f[i][j] = f[f[i][j-1]][j-1]</span></span><br><span class="line"><span class="comment"> * 两个1合并生成2,四个1生成3，8个1生成4,因此总共j最大为58</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">262144</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> f[maxn][<span class="number">60</span>], N, d[maxn], mx = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &N);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++)< span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &d[i]), f[i][d[i]] = i + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">register</span> <span class="keyword">int</span> j = <span class="number">2</span>; j <= <span class="number">58</=></span>; j++) {</=></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">register</span> <span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">            <span class="keyword">if</span> (!f[i][j]) {</span><br><span class="line">                f[i][j] = f[f[i][j - <span class="number">1</span>]][j - <span class="number">1</span>];</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (f[i][j]) {</span><br><span class="line">                mx = max(j,mx);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, mx);</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></=></span></pre></td></tr></tbody></table></figure>
<h3 id="P5144-蜈蚣"><a href="#P5144-蜈蚣" class="headerlink" title="P5144 蜈蚣"></a><a href="https://www.luogu.org/problemnew/show/P5144" target="_blank" rel="noopener">P5144 蜈蚣</a></h3><p>R:异或的性质+区间dp</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits stdc++.h></bits></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 异或运算类似于前缀和，假设1,2,3,...i的异或为Si,j>i，要求j+1,...i的异或</span></span><br><span class="line"><span class="comment"> * 只需要Si xor Sj即可，因此这道题就变成一道常规的区间dp题目</span></span><br><span class="line"><span class="comment"> * 需要注意的是dp[i][1] = dp[k][0] + [k+1,j]，如果不为dp初始化为-inf</span></span><br><span class="line"><span class="comment"> * 将会有一半的WA，这个是之前没有注意到的。</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> N, M, W[maxn], S[maxn], dp[maxn][<span class="number">105</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &N, &M);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &W[i]);</span><br><span class="line">        S[i] = S[i - <span class="number">1</span>] ^ W[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">memset</span>(dp, ~<span class="number">0x3f</span>, <span class="keyword">sizeof</span>(dp));</span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= m; j++) {< span><br><span class="line">            <span class="keyword">if</span> (j > i) {</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k = j - <span class="number">1</span>; k < i; k++) {</span><br><span class="line">                dp[i][j] = max(dp[i][j], dp[k][j - <span class="number">1</span>] + (S[i] ^ S[k]));</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, dp[N][M]);</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></=></span></=></span></=></span></pre></td></tr></tbody></table></figure><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/23/Algorithm0523/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Oduesp">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/head.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Oduesp">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/23/Algorithm0523/" itemprop="url">Konjak Record——2019.05.23</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-23T15:45:20+08:00">
                2019-05-23
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Konjak-Records/" itemprop="url" rel="index">
                    <span itemprop="name">Konjak Records</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/05/23/Algorithm0523/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/05/23/Algorithm0523/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="P2530-SHOI2001-化工厂装箱员"><a href="#P2530-SHOI2001-化工厂装箱员" class="headerlink" title="P2530 [SHOI2001]化工厂装箱员"></a><a href="https://www.luogu.org/problemnew/show/P2530" target="_blank" rel="noopener">P2530 [SHOI2001]化工厂装箱员</a></h3><p>R:挺难的一道动态规划题</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits stdc++.h></bits></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * dp[i][j][k][l]表示前i个物品，手头有j个A,k个B,l个C的最小装箱数，当j+k+l>10时不处理</span></span><br><span class="line"><span class="comment"> * 没新来一个物品，则可以由上一个状态转移（不装箱），装箱数不变</span></span><br><span class="line"><span class="comment"> * 可以选择装箱，更新最小装箱数</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">105</span>;</span><br><span class="line"><span class="keyword">int</span> dp[maxn][<span class="number">15</span>][<span class="number">15</span>][<span class="number">15</span>], N;</span><br><span class="line"><span class="keyword">char</span> type[maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">cin</span> >> N;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="built_in">cin</span> >> type[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">memset</span>(dp, <span class="number">0x3f</span>, <span class="keyword">sizeof</span>(dp));</span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">10</span>; j >= <span class="number">0</span>; j--) {</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">10</span>; k >= <span class="number">0</span>; k--) {</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> l = <span class="number">10</span>; l >= <span class="number">0</span>; l--) {</span><br><span class="line">                    <span class="keyword">if</span> (j + k + l > <span class="number">10</span>) {</span><br><span class="line">                        <span class="keyword">continue</span>;</span><br><span class="line">                    }</span><br><span class="line">                    <span class="keyword">if</span> (type[i] == <span class="string">'A'</span> && j + k + l <= <span class="number">10</=></span> && j > <span class="number">0</span>) {</=></span><br><span class="line">                        dp[i][j][k][l] = dp[i - <span class="number">1</span>][j - <span class="number">1</span>][k][l];</span><br><span class="line">                    }</span><br><span class="line">                    <span class="keyword">if</span> (type[i] == <span class="string">'B'</span> && j + k + l <= <span class="number">10</=></span> && k > <span class="number">0</span>) {</=></span><br><span class="line">                        dp[i][j][k][l] = dp[i - <span class="number">1</span>][j][k - <span class="number">1</span>][l];</span><br><span class="line">                    }</span><br><span class="line">                    <span class="keyword">if</span> (type[i] == <span class="string">'C'</span> && j + k + l <= <span class="number">10</=></span> && l > <span class="number">0</span>) {<br><span class="line">                        dp[i][j][k][l] = dp[i - <span class="number">1</span>][j][k][l - <span class="number">1</span>];</span><br><span class="line">                    }</span><br><span class="line">                    dp[i][<span class="number">0</span>][k][l] = min(dp[i][<span class="number">0</span>][k][l], dp[i][j][k][l] + <span class="number">1</span>);</span><br><span class="line">                    dp[i][j][<span class="number">0</span>][l] = min(dp[i][j][<span class="number">0</span>][l], dp[i][j][k][l] + <span class="number">1</span>);</span><br><span class="line">                    dp[i][j][k][<span class="number">0</span>] = min(dp[i][j][k][<span class="number">0</span>], dp[i][j][k][l] + <span class="number">1</span>);</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span> << dp[N][<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>] << <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h3 id="P2587-ZJOI2008-泡泡堂"><a href="#P2587-ZJOI2008-泡泡堂" class="headerlink" title="P2587 [ZJOI2008]泡泡堂"></a><a href="https://www.luogu.org/problemnew/show/P2587" target="_blank" rel="noopener">P2587 [ZJOI2008]泡泡堂</a></h3><p>R:田忌赛马问题，贪心</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits stdc++.h></bits></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 贪心问题，两个指针，如果弱马比地方弱马强则比赛，如果强马比对方强马强也比赛，反之弱马就去送</span></span><br><span class="line"><span class="comment"> * 马头</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">100000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> my[maxn], they[maxn], N;</span><br><span class="line"><span class="comment">/*我太懒了，都不想写快读*/</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">1</span>, r = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> c = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(c)) {</span><br><span class="line">        <span class="keyword">if</span> (c == <span class="string">'-'</span>)</span><br><span class="line">            f = <span class="number">-1</span>;</span><br><span class="line">        c = getchar();</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(c)) {</span><br><span class="line">        r = <span class="number">10</span> * r + c - <span class="string">'0'</span>;</span><br><span class="line">        c = getchar();</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> f * r;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solo</span><span class="params">(<span class="keyword">int</span>& win, <span class="keyword">int</span>& lost, <span class="keyword">int</span>* fixed, <span class="keyword">int</span>* unfixed)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    win = lost = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> fs = <span class="number">1</span>, fe = N, us = <span class="number">1</span>, ue = N;</span><br><span class="line">    <span class="keyword">while</span> (fs <= fe) {< span><br><span class="line">        <span class="comment">//最弱的比敌最弱的强，则直接比较</span></span><br><span class="line">        <span class="keyword">if</span> (unfixed[us] > fixed[fs]) {</span><br><span class="line">            win += <span class="number">2</span>;</span><br><span class="line">            us++, fs++;</span><br><span class="line">        } <span class="keyword">else</span> <span class="keyword">if</span> (unfixed[ue] > fixed[fe]) {</span><br><span class="line">            ue--, fe--, win += <span class="number">2</span>;</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            <span class="keyword">if</span> (unfixed[us] == fixed[fe]) {</span><br><span class="line">                win += <span class="number">1</span>, lost += <span class="number">1</span>;</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                lost += <span class="number">2</span>;</span><br><span class="line">            }</span><br><span class="line">            us++, fe--;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    N = read();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        my[i] = read();</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        they[i] = read();</span><br><span class="line">    }</span><br><span class="line">    sort(my + <span class="number">1</span>, my + <span class="number">1</span> + N), sort(they + <span class="number">1</span>, they + <span class="number">1</span> + N);</span><br><span class="line">    <span class="keyword">int</span> win, lost;</span><br><span class="line">    solo(win, lost, they, my);</span><br><span class="line">    <span class="built_in">cout</span> << win << <span class="string">" "</span>;</span><br><span class="line">    solo(win, lost, my, they);</span><br><span class="line">    <span class="built_in">cout</span> << lost << <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></=></span></=></span></=></span></pre></td></tr></tbody></table></figure>
<h3 id="P2948-USACO09OPEN-滑雪课Ski-Lessons"><a href="#P2948-USACO09OPEN-滑雪课Ski-Lessons" class="headerlink" title="P2948 [USACO09OPEN]滑雪课Ski Lessons"></a><a href="https://www.luogu.org/problemnew/show/P2948" target="_blank" rel="noopener">P2948 [USACO09OPEN]滑雪课Ski Lessons</a></h3><p>R:贪心+dp</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits stdc++.h></bits></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 这里的T==10，则应该要从t=0时刻开始推</span></span><br><span class="line"><span class="comment"> * ***/</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxs = <span class="number">105</span>, maxn = <span class="number">10000</span> + <span class="number">5</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> {</span></span><br><span class="line">    <span class="keyword">int</span> m, l, a, e;</span><br><span class="line">} nodes[maxs];</span><br><span class="line"><span class="keyword">int</span> d[maxn], c[maxn], f[maxn][maxs], T, S, N, t[maxs], s[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>, &T, &S, &N);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= s; i++) {< span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>, &nodes[i].m, &nodes[i].l, &nodes[i].a);</span><br><span class="line">        nodes[i].e = nodes[i].m + nodes[i].l;</span><br><span class="line">        s[nodes[i].m] = <span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &c[i], &d[i]);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">memset</span>(t, <span class="number">0x3f</span>, <span class="keyword">sizeof</span>(t));</span><br><span class="line">    <span class="comment">//预处理出能力为i时能够滑的时间最短的雪,这里使用了贪心，当然是选择时间最短的雪来伐</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i < maxs; i++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= n; j++) {< span><br><span class="line">            <span class="keyword">if</span> (c[j] <= i) {< span><br><span class="line">                t[i] = min(t[i], d[j]);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">memset</span>(f, ~<span class="number">0x3f</span>, <span class="keyword">sizeof</span>(f));</span><br><span class="line">    f[<span class="number">0</span>][<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//从当前状态向后退</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i < T; i++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j < maxs; j++) {</span><br><span class="line">            <span class="keyword">if</span> (f[i][j] < <span class="number">0</span>) {</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (i + <span class="number">1</span> <= t) {< span><br><span class="line">                f[i + <span class="number">1</span>][j] = max(f[i + <span class="number">1</span>][j], f[i][j]);</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (i + t[j] <= t) {< span><br><span class="line">                f[i + t[j]][j] = max(f[i + t[j]][j], f[i][j] + <span class="number">1</span>);</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (s[i]) {</span><br><span class="line">                <span class="comment">//学了之后能力下降肯定不学（贪心）</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">1</span>; k <= s; k++) {< span><br><span class="line">                    <span class="keyword">if</span> (nodes[k].a >= j && nodes[k].m == i && nodes[k].e <= t) {< span><br><span class="line">                        f[nodes[k].e][nodes[k].a] = max(f[nodes[k].e][nodes[k].a], f[i][j]);</span><br><span class="line">                    }</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i < maxs; i++) {</span><br><span class="line">        ans = max(ans, f[T][i]);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></=></span></=></span></=></span></=></span></=></span></=></span></=></span></=></span></pre></td></tr></tbody></table></figure>
<h3 id="P1858-多人背包"><a href="#P1858-多人背包" class="headerlink" title="P1858 多人背包"></a><a href="https://www.luogu.org/problemnew/show/P1858" target="_blank" rel="noopener">P1858 多人背包</a></h3><p>R:注意要将dp数组设置为-inf，因为如果只是0，那么前k优解都是最优解</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits stdc++.h></bits></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * f[v][k]表示体积为v时的第K优解，则f[v][k]选择放或不放会有两个结果</span></span><br><span class="line"><span class="comment"> * 所以会有一个2*K个结果，下一阶段的最K优解一定在其中，对其进行归并排序</span></span><br><span class="line"><span class="comment"> * 复杂度为O(K)，取前k个即可</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">200</span> + <span class="number">10</span>, maxv = <span class="number">5000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> K, V, N, f[maxv][maxn], w[maxn], v[maxn], win[maxn], lost[maxn], len, cache[maxn << <span class="number">1</span>];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">merge</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">int</span> p1 = <span class="number">1</span>, p2 = <span class="number">1</span>, p = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (p1 <= k && p2 <="K)" {< span><br><span class="line">        <span class="keyword">if</span> (win[p1] >= lost[p2]) {</span><br><span class="line">            cache[++p] = win[p1++];</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            cache[++p] = lost[p2++];</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">while</span> (p1 <= k) {< span><br><span class="line">        cache[++p] = win[p1++];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">while</span> (p2 <= k) {< span><br><span class="line">        cache[++p] = lost[p2++];</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">cin</span> >> K >> V >> N;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="built_in">cin</span> >> v[i] >> w[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">memset</span>(f, ~<span class="number">0x3f</span>, <span class="keyword">sizeof</span>(f)), f[<span class="number">0</span>][<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = V; j >= v[i]; j--) {</span><br><span class="line">            len = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">1</span>; k <= k; k++) {< span><br><span class="line">                <span class="keyword">int</span> a = f[j][k];</span><br><span class="line">                <span class="keyword">int</span> b = f[j - v[i]][k] + w[i];</span><br><span class="line">                <span class="keyword">if</span> (a > b) {</span><br><span class="line">                    win[++len] = a, lost[len] = b;</span><br><span class="line">                } <span class="keyword">else</span> {</span><br><span class="line">                    win[++len] = b, lost[len] = a;</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">            merge();</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">1</span>; k <= k; k++) {< span><br><span class="line">                f[j][k] = cache[k];</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= k; i++)< span><br><span class="line">        sum += f[V][i];</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, sum);</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></=></span></=></span></=></span></=></span></=></span></=></span></=></span></=></span></pre></td></tr></tbody></table></figure>
<h3 id="P2014-选课"><a href="#P2014-选课" class="headerlink" title="P2014 选课"></a><a href="https://www.luogu.org/problemnew/show/P2014" target="_blank" rel="noopener">P2014 选课</a></h3><p>R:树形dp</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits stdc++.h></bits></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">300</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> N, M, score[maxn];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> {</span></span><br><span class="line">    <span class="keyword">int</span> v;</span><br><span class="line">    Node* next;</span><br><span class="line">};</span><br><span class="line">Node *h[maxn], pool[maxn];</span><br><span class="line"><span class="keyword">int</span> tot, father[maxn], pre[maxn], cost[maxn][maxn], f[maxn], sum[maxn];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add_edge</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    Node* p = &pool[tot++];</span><br><span class="line">    p->v = v, p->next = h[u], h[u] = p;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> root)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    cost[root][<span class="number">0</span>] = <span class="number">0</span>, cost[root][<span class="number">1</span>] = score[root];</span><br><span class="line">    <span class="keyword">if</span> (!h[root]) {</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> sum = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (Node* p = h[root]; p; p = p->next) {</span><br><span class="line">        <span class="keyword">int</span> cur = dfs(p->v);</span><br><span class="line">        sum += cur;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = sum; i >= <span class="number">1</span>; i--) {</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j <= i - <span class="number">1</=></span>; j++) {<br><span class="line">                cost[root][i] = max(cost[root][i - j] + cost[p->v][j], cost[root][i]);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">cin</span> >> N >> M;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &father[i], &score[i]);</span><br><span class="line">        <span class="keyword">if</span> (father[i] != <span class="number">0</span>) {</span><br><span class="line">            add_edge(father[i], i), pre[i] = <span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="keyword">if</span> (!pre[i]) {</span><br><span class="line">            sum[i] = dfs(i);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="keyword">if</span> (!pre[i]) {</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = M; j >= <span class="number">1</span>; j--) {</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k <= j; k++) {< span><br><span class="line">                    f[j] = max(f[j], f[j - k] + cost[i][k]);</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, f[M]);</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></=></span></=></span></=></span></=></span></pre></td></tr></tbody></table></figure>
<h2 id="常规题"><a href="#常规题" class="headerlink" title="常规题"></a>常规题</h2><h3 id="P2113-看球泡妹子"><a href="#P2113-看球泡妹子" class="headerlink" title="P2113 看球泡妹子"></a><a href="https://www.luogu.org/problemnew/show/P2113" target="_blank" rel="noopener">P2113 看球泡妹子</a></h3><p>R:01背包</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits stdc++.h></bits></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">105</span>;</span><br><span class="line"><span class="keyword">int</span> N, M, K, C, A[maxn], B[maxn], f[maxn][<span class="number">2005</span>], ans = <span class="number">-1</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">cin</span> >> N >> M >> K >> C;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="built_in">cin</span> >> A[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="built_in">cin</span> >> B[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">memset</span>(f, ~<span class="number">0x3f</span>, <span class="keyword">sizeof</span>(f));</span><br><span class="line">    f[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= m; i++) {< span><br><span class="line">        <span class="keyword">int</span> a, b, w;</span><br><span class="line">        <span class="built_in">cin</span> >> a >> b;</span><br><span class="line">        w = B[a] + B[b];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = K; j >= <span class="number">1</span>; j--) {</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">2004</span>; k >= w; k--) {</span><br><span class="line">                f[j][k] = max(f[j][k], f[j - <span class="number">1</span>][k - w] + A[a] * A[b]);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i <= k; i++) {< span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = C; j <= <span class="number">2004</=></span>; j++) {</=></span><br><span class="line">            ans = max(ans, f[i][j]);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span> << ans << <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></=></span></=></span></=></span></pre></td></tr></tbody></table></figure>
<h3 id="P2654-原核生物培养"><a href="#P2654-原核生物培养" class="headerlink" title="P2654 原核生物培养"></a><a href="https://www.luogu.org/problemnew/show/P2654" target="_blank" rel="noopener">P2654 原核生物培养</a></h3><p>R:类似石子合并的区间dp，需要用小根堆，难度不大</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits stdc++.h></bits></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 石子合并问题+小根堆</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">15</span> << <span class="number">1</span>;</span><br><span class="line"><span class="keyword">int</span> N, M, K, arr[maxn], ans, f[maxn][maxn], sum[maxn];</span><br><span class="line">priority_queue<<span class="keyword">int</span>, <span class="built_in">vector</span><<span class="keyword">int</span>>, greater<<span class="keyword">int</span>>> q;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dp</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> len = <span class="number">2</span>; len <= m; len++) {< span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> s = <span class="number">1</span>; s <= m * <span class="number">2</=></span>; s++) {</=></span><br><span class="line">            <span class="keyword">int</span> e = s + len - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (e > <span class="number">2</span> * M) {</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k = s; k < e; k++) {</span><br><span class="line">                f[s][e] = min(f[s][k] + f[k + <span class="number">1</span>][e] + sum[e] - sum[s - <span class="number">1</span>], f[s][e]);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> mn = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= m; i++) {< span><br><span class="line">        mn = min(mn, f[i][i + M - <span class="number">1</span>]);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> mn;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">cin</span> >> N >> M >> K;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="keyword">int</span> tmp;</span><br><span class="line">        <span class="built_in">cin</span> >> tmp;</span><br><span class="line">        q.push(tmp);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= k; i++) {< span><br><span class="line">        <span class="built_in">memset</span>(f, <span class="number">0x3f</span>, <span class="keyword">sizeof</span>(f));</span><br><span class="line">        <span class="keyword">int</span> s = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= m; j++) {< span><br><span class="line">            <span class="keyword">int</span> tmp;</span><br><span class="line">            <span class="built_in">cin</span> >> tmp;</span><br><span class="line">            arr[tmp] = arr[tmp + M] = q.top();</span><br><span class="line">            q.pop();</span><br><span class="line">            s += arr[tmp];</span><br><span class="line">        }</span><br><span class="line">        q.push(s);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= m * <span class="number">2</=></span>; j++) {</=></span><br><span class="line">            sum[j] = sum[j - <span class="number">1</span>] + arr[j];</span><br><span class="line">            f[j][j] = <span class="number">0</span>;</span><br><span class="line">        }</span><br><span class="line">        ans += dp();</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span> << ans << <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></=></span></=></span></=></span></pre></td></tr></tbody></table></figure>
<h3 id="P2915-USACO08NOV-奶牛混合起来Mixed-Up-Cows"><a href="#P2915-USACO08NOV-奶牛混合起来Mixed-Up-Cows" class="headerlink" title="P2915 [USACO08NOV]奶牛混合起来Mixed Up Cows"></a><a href="https://www.luogu.org/problemnew/show/P2915" target="_blank" rel="noopener">P2915 [USACO08NOV]奶牛混合起来Mixed Up Cows</a></h3><p>R：看数据范围知道是状态压缩dp，注意(i & (1 << (j - 1))) == 0要括号，难度不大</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits stdc++.h></bits></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 状态压缩dp</span></span><br><span class="line"><span class="comment"> * dp[i][S]表示状态为s时i为结尾的排列数</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">17</span>, maxs = (<span class="number">1</span> << <span class="number">16</span>) + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> S[maxn], dp[maxn][maxs], N, K, up, ans;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">cin</span> >> N >> K;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="built_in">cin</span> >> S[i];</span><br><span class="line">    }</span><br><span class="line">    up = (<span class="number">1</span> << N) - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= up; i++) {< span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= n; j++) {< span><br><span class="line">            <span class="keyword">if</span> ((i & (<span class="number">1</span> << (j - <span class="number">1</span>))) == <span class="number">0</span>) {</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            }</span><br><span class="line">            <span class="comment">//前一个状态</span></span><br><span class="line">            <span class="keyword">int</span> preState = i - (<span class="number">1</span> << (j - <span class="number">1</span>));</span><br><span class="line">            <span class="keyword">if</span> (preState == <span class="number">0</span>) {</span><br><span class="line">                dp[j][i] += <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">1</span>; k <= n; k++) {< span><br><span class="line">                <span class="keyword">if</span> (k == j || <span class="built_in">abs</span>(S[k] - S[j]) <= k) {< span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                }</span><br><span class="line">                dp[j][i] = dp[j][i] + dp[k][preState];</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        ans += dp[i][up];</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span> << ans << <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></=></span></=></span></=></span></=></span></=></span></=></span></pre></td></tr></tbody></table></figure>
<h3 id="P2618-数字工程"><a href="#P2618-数字工程" class="headerlink" title="P2618 数字工程"></a><a href="https://www.luogu.org/problemnew/show/P2618" target="_blank" rel="noopener">P2618 数字工程</a></h3><p>R:素数打表+动态规划，难度不大</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits stdc++.h></bits></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 素数打表</span></span><br><span class="line"><span class="comment"> * 素因子的问题，一般由小到大推，即遇到一个数，则依次乘以素数，这样可以将复杂度降到</span></span><br><span class="line"><span class="comment"> * log级别</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1000000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> visited[maxn], primes[maxn], len, N, dp[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">long</span> <span class="keyword">long</span> i = <span class="number">2</span>; i < maxn; i++) {</span><br><span class="line">        <span class="keyword">if</span> (visited[i]) {</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        }</span><br><span class="line">        primes[++len] = i;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">long</span> <span class="keyword">long</span> j = i * i; j < maxn; j += i) {</span><br><span class="line">            visited[j] = <span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    init();</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &N) != EOF) {</span><br><span class="line">        <span class="built_in">memset</span>(dp, <span class="number">0x3f</span>, <span class="keyword">sizeof</span>(dp));</span><br><span class="line">        dp[<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">            dp[i + <span class="number">1</span>] = min(dp[i + <span class="number">1</span>], dp[i] + <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= len; j++) {< span><br><span class="line">                <span class="keyword">long</span> <span class="keyword">long</span> nxt = primes[j] * i;</span><br><span class="line">                <span class="keyword">if</span> (nxt <= n) {< span><br><span class="line">                    dp[nxt] = min(dp[nxt], dp[i] + <span class="number">1</span>);</span><br><span class="line">                } <span class="keyword">else</span> {</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, dp[N]);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></=></span></=></span></=></span></pre></td></tr></tbody></table></figure>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/21/Algorithm0521/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Oduesp">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/head.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Oduesp">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/21/Algorithm0521/" itemprop="url">Konjak Record——2019.05.21</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-21T19:45:08+08:00">
                2019-05-21
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Konjak-Records/" itemprop="url" rel="index">
                    <span itemprop="name">Konjak Records</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/05/21/Algorithm0521/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/05/21/Algorithm0521/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="P2134-百日旅行"><a href="#P2134-百日旅行" class="headerlink" title="P2134 百日旅行"></a><a href="https://www.luogu.org/problemnew/show/P2134" target="_blank" rel="noopener">P2134 百日旅行</a></h3><p>R:斜率优化</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits stdc++.h></bits></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 这道题的转移方程很好想，很容易得到90分，还有10分需要使用单调队列才可以。</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">200000</span> + <span class="number">10</span>;</span><br><span class="line">ll f[maxn], g[maxn], N, P, Q;</span><br><span class="line"><span class="keyword">int</span> gq[maxn], gqh, gqt;</span><br><span class="line">ll minq;</span><br><span class="line"><span class="comment">//gq存的是组成g下凸壳的index,gqh,gqt分别表示head,tail指针</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> ll <span class="title">calcgq</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>{ <span class="keyword">return</span> g[j] + P * j * j - <span class="number">2</span> * P * i * j + P * i * i; }</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">double</span> <span class="title">slope</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>{ <span class="keyword">return</span> <span class="number">1.0</span> * (g[j] + P * j * j - g[i] - P * i * i) / (j - i); }</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">cin</span> >> N >> P >> Q;</span><br><span class="line">    <span class="built_in">memset</span>(f, <span class="number">0x3f</span>, <span class="keyword">sizeof</span>(f)), <span class="built_in">memset</span>(g, <span class="number">0x3f</span>, <span class="keyword">sizeof</span>(g));</span><br><span class="line">    f[<span class="number">0</span>] = <span class="number">0</span>, g[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//初始化队列</span></span><br><span class="line">    gq[<span class="number">1</span>] = <span class="number">0</span>, gqh = <span class="number">1</span>, gqt = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        g[i] = minq + Q * i;</span><br><span class="line">        <span class="keyword">while</span> (gqh < gqt && calcgq(i, gq[gqh]) >= calcgq(i, gq[gqh + <span class="number">1</span>]))</span><br><span class="line">            gqh++;</span><br><span class="line">        f[i] = calcgq(i, gq[gqh]);</span><br><span class="line">        <span class="keyword">while</span> (gqh < gqt && slope(gq[gqt - <span class="number">1</span>], gq[gqt]) >= slope(gq[gqt - <span class="number">1</span>], i))</span><br><span class="line">            gqt--;</span><br><span class="line">        gq[++gqt] = i;</span><br><span class="line">        minq = min(minq, f[i] - Q * i);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span> << min(f[N], g[N]) << <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></=></span></pre></td></tr></tbody></table></figure>
<h3 id="P3195-HNOI2008-玩具装箱TOY"><a href="#P3195-HNOI2008-玩具装箱TOY" class="headerlink" title="P3195  HNOI2008 玩具装箱TOY"></a><a href="https://www.luogu.org/problemnew/show/P3195" target="_blank" rel="noopener">P3195  HNOI2008 玩具装箱TOY</a></h3><p>R:斜率优化</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits stdc++.h></bits></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 斜率优化dp,转移方程很简单</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">50000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> f[maxn], sum[maxn], N, L, c[maxn], q[maxn], h, t;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">long</span> <span class="keyword">long</span> <span class="title">getx</span><span class="params">(<span class="keyword">int</span> j)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">return</span> sum[j] + j + L + <span class="number">1</span>;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">long</span> <span class="keyword">long</span> <span class="title">sqr</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span> x)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">return</span> x * x;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">long</span> <span class="keyword">long</span> <span class="title">calc</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">return</span> f[j] + sqr(i - j - <span class="number">1</span> - L + sum[i] - sum[j]);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">double</span> <span class="title">slope</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1.0</span> * (getx(j) * getx(j) + f[j] - getx(i) * getx(i) - f[i]) / (getx(j) - getx(i));</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%lld %lld"</span>, &N, &L);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%lld"</span>, &c[i]);</span><br><span class="line">        sum[i] = sum[i - <span class="number">1</span>] + c[i];</span><br><span class="line">    }</span><br><span class="line">    f[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    q[<span class="number">1</span>] = <span class="number">0</span>, h = t = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="keyword">while</span> (h < t && calc(i, q[h]) >= calc(i, q[h + <span class="number">1</span>]))</span><br><span class="line">            h++;</span><br><span class="line">        f[i] = calc(i, q[h]);</span><br><span class="line">        <span class="keyword">while</span> (h < t && slope(q[t - <span class="number">1</span>], q[t]) >= slope(q[t - <span class="number">1</span>], i))</span><br><span class="line">            t--;</span><br><span class="line">        q[++t] = i;</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, f[N]);</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></=></span></=></span></pre></td></tr></tbody></table></figure>
<h3 id="P4072-SDOI2016-征途"><a href="#P4072-SDOI2016-征途" class="headerlink" title="P4072 [SDOI2016]征途"></a><a href="https://www.luogu.org/problemnew/show/P4072" target="_blank" rel="noopener">P4072 [SDOI2016]征途</a></h3><p>R:斜率优化</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits stdc++.h></bits></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">/****</span></span><br><span class="line"><span class="comment"> * 这题思路用的是斜率优化，虽然能AC，但是是我投机取巧的，我最后乘了</span></span><br><span class="line"><span class="comment"> * 一个K^2，然后四舍五入，不然会WA四个点，因为会造成精度损失。</span></span><br><span class="line"><span class="comment"> * f[i][j] = f[k][j-1] + (sum[i]-sum[k]-avg)^2 / K</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">3000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">double</span> f[maxn][maxn], avg, sum[maxn];</span><br><span class="line"><span class="keyword">int</span> N, K, q[maxn], h, t;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">double</span> <span class="title">sqr</span><span class="params">(<span class="keyword">double</span> x)</span> </span>{ <span class="keyword">return</span> x * x; }</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">double</span> <span class="title">getx</span><span class="params">(<span class="keyword">int</span> k)</span> </span>{ <span class="keyword">return</span> avg + sum[k]; }</span><br><span class="line"><span class="comment">//从前k个数分成j-1段转移到前i个数分成j段的最小值</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">double</span> <span class="title">calc</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j, <span class="keyword">int</span> k)</span> </span>{ <span class="keyword">return</span> f[k][j - <span class="number">1</span>] + sqr(sum[i] - getx(k)) / K; }</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">double</span> <span class="title">slope</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j, <span class="keyword">int</span> k)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">return</span> (f[k][j - <span class="number">1</span>] + getx(k) * getx(k) / K - f[i][j - <span class="number">1</span>] - getx(i) * getx(i) / K)</span><br><span class="line">        / (getx(k) - getx(i));</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">cin</span> >> N >> K;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="keyword">int</span> tmp;</span><br><span class="line">        <span class="built_in">cin</span> >> tmp;</span><br><span class="line">        sum[i] = sum[i - <span class="number">1</span>] + tmp;</span><br><span class="line">    }</span><br><span class="line">    avg = sum[N] * <span class="number">1.0</span> / K;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i <= n; i++) {< span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j <= k; j++) {< span><br><span class="line">            f[i][j] = <span class="number">0x7fffffff</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    f[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= k; j++) {< span><br><span class="line">        h = t = <span class="number">1</span>;</span><br><span class="line">        q[<span class="number">1</span>] = j - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = j; i <= n; i++) {< span><br><span class="line">            <span class="keyword">while</span> (h < t && calc(i, j, q[h]) >= calc(i, j, q[h + <span class="number">1</span>]))</span><br><span class="line">                h++;</span><br><span class="line">            f[i][j] = calc(i, j, q[h]);</span><br><span class="line">            <span class="keyword">while</span> (h < t && slope(q[t - <span class="number">1</span>], j, q[t]) >= slope(q[t - <span class="number">1</span>], j, i))</span><br><span class="line">                t--;</span><br><span class="line">            q[++t] = i;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> res = f[N][K] * K * K + <span class="number">0.5</span>;</span><br><span class="line">    <span class="built_in">cout</span> << res << <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></=></span></=></span></=></span></=></span></=></span></pre></td></tr></tbody></table></figure>
<h3 id="P2112-鸿雁传书"><a href="#P2112-鸿雁传书" class="headerlink" title="P2112 鸿雁传书"></a><a href="https://www.luogu.org/problemnew/show/P2112" target="_blank" rel="noopener">P2112 鸿雁传书</a></h3><p>R:斜率优化</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits stdc++.h></bits></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">/****</span></span><br><span class="line"><span class="comment"> * 以下是我用斜率优化dp的代码，跑的超级快，其实不用斜率优化也能AC</span></span><br><span class="line"><span class="comment"> * f[i][j] = f[k][j-1] + (sum[i]-sum[k]-avg)^2 / K</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">double</span> f[maxn][maxn], avg, sum[maxn];</span><br><span class="line"><span class="keyword">int</span> N, K, q[maxn], h, t;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">double</span> <span class="title">sqr</span><span class="params">(<span class="keyword">double</span> x)</span> </span>{ <span class="keyword">return</span> x * x; }</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">double</span> <span class="title">getx</span><span class="params">(<span class="keyword">int</span> k)</span> </span>{ <span class="keyword">return</span> avg + sum[k]; }</span><br><span class="line"><span class="comment">//从前k个数分成j-1段转移到前i个数分成j段的最小值</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">double</span> <span class="title">calc</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j, <span class="keyword">int</span> k)</span> </span>{ <span class="keyword">return</span> f[k][j - <span class="number">1</span>] + sqr(sum[i] - getx(k)) / K; }</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">double</span> <span class="title">slope</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j, <span class="keyword">int</span> k)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">return</span> (f[k][j - <span class="number">1</span>] + getx(k) * getx(k) / K - f[i][j - <span class="number">1</span>] - getx(i) * getx(i) / K)</span><br><span class="line">        / (getx(k) - getx(i));</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">cin</span> >> N >> K;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="built_in">string</span> tmp;</span><br><span class="line">        <span class="built_in">cin</span> >> tmp;</span><br><span class="line">        sum[i] = sum[i - <span class="number">1</span>] + tmp.size();</span><br><span class="line">    }</span><br><span class="line">    avg = sum[N] * <span class="number">1.0</span> / K;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i <= n; i++) {< span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j <= n; j++) {< span><br><span class="line">            f[i][j] = <span class="number">0x7fffffff</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    f[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= k; j++) {< span><br><span class="line">        h = t = <span class="number">1</span>;</span><br><span class="line">        q[<span class="number">1</span>] = j - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = j; i <= n; i++) {< span><br><span class="line">            <span class="keyword">while</span> (h < t && calc(i, j, q[h]) >= calc(i, j, q[h + <span class="number">1</span>]))</span><br><span class="line">                h++;</span><br><span class="line">            f[i][j] = calc(i, j, q[h]);</span><br><span class="line">            <span class="keyword">while</span> (h < t && slope(q[t - <span class="number">1</span>], j, q[t]) >= slope(q[t - <span class="number">1</span>], j, i))</span><br><span class="line">                t--;</span><br><span class="line">            q[++t] = i;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%.1lf\n"</span>, f[N][K]);</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></=></span></=></span></=></span></=></span></=></span></pre></td></tr></tbody></table></figure>
<h3 id="P2029-跳舞"><a href="#P2029-跳舞" class="headerlink" title="P2029 跳舞"></a><a href="https://www.luogu.org/problemnew/show/P2029" target="_blank" rel="noopener">P2029 跳舞</a></h3><p>R:滚动数组优化</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits stdc++.h></bits></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">/****</span></span><br><span class="line"><span class="comment"> * 这道题转移方程很好想，但是复杂度O(N^3)，需要使用滚动数组保存max值降低到O(N^2)，挺有意思</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">5000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> N, T, S[maxn], B[maxn], f[maxn], mx[maxn], sum[maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">cin</span> >> N >> T;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="built_in">cin</span> >> S[i];</span><br><span class="line">        sum[i] = sum[i - <span class="number">1</span>] + S[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="built_in">cin</span> >> B[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">memset</span>(mx, ~<span class="number">0x3f</span>, <span class="keyword">sizeof</span>(mx));</span><br><span class="line">    mx[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//mx[j]表示前i个，j步的最大值</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="keyword">int</span> remNum = mx[T];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = T; j >= <span class="number">1</span>; j--) {</span><br><span class="line">            <span class="keyword">if</span> (j == <span class="number">1</span>) {</span><br><span class="line">                f[j] = max(remNum + S[i] - sum[i - <span class="number">1</span>], S[i] - sum[i - <span class="number">1</span>]);</span><br><span class="line">                mx[j] = max(mx[j], f[j] + sum[i]);</span><br><span class="line">            } <span class="keyword">else</span> <span class="keyword">if</span> (j == T) {</span><br><span class="line">                f[j] = mx[j - <span class="number">1</span>] + S[i] + B[i] - sum[i - <span class="number">1</span>];</span><br><span class="line">                mx[j] = max(mx[j], f[j] + sum[i]);</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                f[j] = mx[j - <span class="number">1</span>] + S[i] - sum[i - <span class="number">1</span>];</span><br><span class="line">                mx[j] = max(mx[j], f[j] + sum[i]);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= t; i++) {< span><br><span class="line">        ans = max(ans, f[i]);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span> << ans << <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></=></span></=></span></=></span></=></span></pre></td></tr></tbody></table></figure>
<h3 id="P1610-鸿山洞的灯"><a href="#P1610-鸿山洞的灯" class="headerlink" title="P1610 鸿山洞的灯"></a><a href="https://www.luogu.org/problemnew/show/P1610" target="_blank" rel="noopener">P1610 鸿山洞的灯</a></h3><p>R:这道题是普及-的题,爆零4次,共WA10次，没有找出错误原因。原有思路:f[i][0]表示关这个灯,f[i][1]表示开这个灯,f[i][1] = max(f[i-1][0],f[i-1][1]),f[i][0] = max(f[k][1]+i-k,f[i][0]),不知为何不对。以下是AC代码, f[i]表示i打开且i之前能够关闭的最多灯,f[i] = max(f[k]+i-k-1)</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits stdc++.h></bits></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * f[i]表示i打开且i之前能够关闭的最多灯</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">100000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> f[maxn], N, dis, pos[maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &N, &dis);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &pos[i]);</span><br><span class="line">    }</span><br><span class="line">    sort(pos + <span class="number">1</span>, pos + <span class="number">1</span> + N);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = i - <span class="number">1</span>; j >= <span class="number">1</span>; j--) {</span><br><span class="line">            <span class="keyword">if</span> (pos[i] - pos[j] <= dis) {< span><br><span class="line">                f[i] = max(f[j] + (i - j - <span class="number">1</span>), f[i]);</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, f[N]);</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></=></span></=></span></=></span></pre></td></tr></tbody></table></figure>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/20/Algorithm0520/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Oduesp">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/head.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Oduesp">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/20/Algorithm0520/" itemprop="url">Konjak Record——2019.05.20</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-20T19:08:56+08:00">
                2019-05-20
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Konjak-Records/" itemprop="url" rel="index">
                    <span itemprop="name">Konjak Records</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/05/20/Algorithm0520/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/05/20/Algorithm0520/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="P2921-USACO08DEC-在农场万圣节Trick-or-Treat-on-the-Farm"><a href="#P2921-USACO08DEC-在农场万圣节Trick-or-Treat-on-the-Farm" class="headerlink" title="P2921 [USACO08DEC]在农场万圣节Trick or Treat on the Farm"></a><a href="https://www.luogu.org/problemnew/show/P2921" target="_blank" rel="noopener">P2921 [USACO08DEC]在农场万圣节Trick or Treat on the Farm</a></h3><p>R:dfs+回溯+dp</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits stdc++.h></bits></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">/***</span></span><br><span class="line"><span class="comment"> * 这道题仔细思考并不难，用的是dfs+记忆化搜索,如果一个点搜过，那么如果另一个搜索时遇到这个点</span></span><br><span class="line"><span class="comment"> * 就直接加上这个点的答案即可</span></span><br><span class="line"><span class="comment"> * 其中用到了引用用于回溯时的变量控制。</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">100000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> f[maxn], nxt[maxn], N, length[maxn], ans[maxn], in_circle[maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> pos, <span class="keyword">int</span> l, <span class="keyword">int</span>& circle, <span class="keyword">int</span>& overlap)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">if</span> (in_circle[pos] || ans[pos]) {</span><br><span class="line">        overlap = pos;</span><br><span class="line">        length[pos] = l;</span><br><span class="line">        <span class="keyword">return</span> ans[pos];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (length[pos] != <span class="number">0</span>) {</span><br><span class="line">        ans[pos] = l - length[pos], overlap = pos, circle = <span class="number">1</span>, in_circle[pos] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> l - length[pos];</span><br><span class="line">    }</span><br><span class="line">    length[pos] = l;</span><br><span class="line">    <span class="comment">//递归</span></span><br><span class="line">    <span class="keyword">int</span> cr = dfs(nxt[pos], l + <span class="number">1</span>, circle, overlap);</span><br><span class="line">    <span class="comment">//回溯</span></span><br><span class="line">    <span class="keyword">if</span> (circle) {</span><br><span class="line">        ans[pos] = cr, in_circle[pos] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (pos == overlap) {</span><br><span class="line">            circle = <span class="number">0</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> cr;</span><br><span class="line">    }</span><br><span class="line">    ans[pos] = cr + length[overlap] - length[pos];</span><br><span class="line">    <span class="keyword">return</span> cr;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &N);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &nxt[i]);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="keyword">if</span> (!ans[i]) {</span><br><span class="line">            <span class="keyword">int</span> circle = <span class="number">0</span>, overlap = <span class="number">-1</span>;</span><br><span class="line">            dfs(i, <span class="number">1</span>, circle, overlap);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans[i]);</span><br><span class="line">    }</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></=></span></=></span></=></span></pre></td></tr></tbody></table></figure>
<h3 id="P3842-TJOI2007-线段"><a href="#P3842-TJOI2007-线段" class="headerlink" title="P3842 [TJOI2007]线段"></a><a href="https://www.luogu.org/problemnew/show/P3842" target="_blank" rel="noopener">P3842 [TJOI2007]线段</a></h3><p>R:只和区间两个端点有关,f[i][0]表示走完i且停在左端点的最小值，f[i][1]类似。</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits stdc++.h></bits></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 这种带线段的dp,一般需要考虑线段的左右端点</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">20000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> f[maxn][<span class="number">2</span>], N, len[maxn];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> {</span></span><br><span class="line">    <span class="keyword">int</span> x, y;</span><br><span class="line">};</span><br><span class="line">Node nodes[maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">memset</span>(f, <span class="number">0x3f</span>, <span class="keyword">sizeof</span>(f));</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &N);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &nodes[i].x, &nodes[i].y);</span><br><span class="line">        len[i] = nodes[i].y - nodes[i].x;</span><br><span class="line">    }</span><br><span class="line">    f[<span class="number">1</span>][<span class="number">0</span>] = nodes[<span class="number">1</span>].y - <span class="number">1</span> + len[<span class="number">1</span>];</span><br><span class="line">    f[<span class="number">1</span>][<span class="number">1</span>] = nodes[<span class="number">1</span>].y - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i <= n; i++) {< span><br><span class="line">        f[i][<span class="number">0</span>] = min(f[i][<span class="number">0</span>], f[i - <span class="number">1</span>][<span class="number">0</span>] + <span class="built_in">abs</span>(nodes[i].y - nodes[i - <span class="number">1</span>].x) + len[i]);</span><br><span class="line">        f[i][<span class="number">0</span>] = min(f[i][<span class="number">0</span>], f[i - <span class="number">1</span>][<span class="number">1</span>] + <span class="built_in">abs</span>(nodes[i].y - nodes[i - <span class="number">1</span>].y) + len[i]);</span><br><span class="line">        f[i][<span class="number">1</span>] = min(f[i][<span class="number">1</span>], f[i - <span class="number">1</span>][<span class="number">0</span>] + <span class="built_in">abs</span>(nodes[i - <span class="number">1</span>].x - nodes[i].x) + len[i]);</span><br><span class="line">        f[i][<span class="number">1</span>] = min(f[i][<span class="number">1</span>], f[i - <span class="number">1</span>][<span class="number">1</span>] + <span class="built_in">abs</span>(nodes[i].x - nodes[i - <span class="number">1</span>].y) + len[i]);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, min(f[N][<span class="number">0</span>] + N - nodes[N].x, f[N][<span class="number">1</span>] + N - nodes[N].y) + N - <span class="number">1</span>);</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></=></span></=></span></pre></td></tr></tbody></table></figure>
<h3 id="P2015-二叉苹果树"><a href="#P2015-二叉苹果树" class="headerlink" title="P2015 二叉苹果树"></a><a href="https://www.luogu.org/problemnew/show/P2015" target="_blank" rel="noopener">P2015 二叉苹果树</a></h3><p>R:树上背包问题</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits stdc++.h></bits></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 这道题是简单的树形dp</span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">100</span> + <span class="number">5</span>;</span><br><span class="line"><span class="keyword">int</span> N, Q, tot, f[maxn][maxn];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> {</span></span><br><span class="line">    <span class="keyword">int</span> v, w;</span><br><span class="line">    Node* next;</span><br><span class="line">};</span><br><span class="line">Node *h[maxn], pool[maxn << <span class="number">1</span>];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add_edge</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> w)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    Node* p = &pool[tot++];</span><br><span class="line">    p->v = v, p->next = h[u], h[u] = p, p->w = w;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> r, <span class="keyword">int</span> fa)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">if</span> (h[r] == <span class="literal">NULL</span>) {</span><br><span class="line">        <span class="comment">//以root为根的树中保留i根枝条的最大苹果树为0</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (Node* p = h[r]; p; p = p->next) {</span><br><span class="line">        <span class="keyword">if</span> (p->v != fa) {</span><br><span class="line">            <span class="keyword">int</span> cur = dfs(p->v, r);</span><br><span class="line">            sum += cur + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = sum; i >= <span class="number">1</span>; i--) {</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j <= min(cur, i - <span class="number">1</=></span>); j++) {<br><span class="line">                    f[r][i] = max(f[r][i], f[r][i - j - <span class="number">1</span>] + f[p->v][j] + p->w);</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">cin</span> >> N >> Q;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i < N; i++) {</span><br><span class="line">        <span class="keyword">int</span> u, v, w;</span><br><span class="line">        <span class="built_in">cin</span> >> u >> v >> w;</span><br><span class="line">        add_edge(u, v, w), add_edge(v, u, w);</span><br><span class="line">    }</span><br><span class="line">    dfs(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">cout</span> << f[<span class="number">1</span>][Q] << <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="简单题"><a href="#简单题" class="headerlink" title="简单题"></a>简单题</h2><h3 id="P3800-Power收集"><a href="#P3800-Power收集" class="headerlink" title="P3800 Power收集"></a><a href="https://www.luogu.org/problemnew/show/P3800" target="_blank" rel="noopener">P3800 Power收集</a></h3><p>R:和P2295类似，会一题就可以</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits stdc++.h></bits></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 这个题和打老鼠那题类似</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">4000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> N, M, K, T;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> {</span></span><br><span class="line">    <span class="keyword">int</span> x, y, p;</span><br><span class="line">};</span><br><span class="line">Node nodes[maxn];</span><br><span class="line"><span class="keyword">int</span> f[maxn];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(<span class="keyword">const</span> Node& a, <span class="keyword">const</span> Node& b)</span> </span>{ <span class="keyword">return</span> a.x < b.x; }</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d %d %d"</span>, &N, &M, &K, &T);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= k; i++) {< span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>, &nodes[i].x, &nodes[i].y, &nodes[i].p);</span><br><span class="line">    }</span><br><span class="line">    sort(nodes + <span class="number">1</span>, nodes + <span class="number">1</span> + K, cmp);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= k; i++) {< span><br><span class="line">        f[i] = nodes[i].p;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j < i; j++) {</span><br><span class="line">            <span class="keyword">int</span> allt = nodes[i].x - nodes[j].x;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">abs</span>(nodes[i].y - nodes[j].y) <= t * allt) {< span><br><span class="line">                f[i] = max(f[i], f[j] + nodes[i].p);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= k; i++) {< span><br><span class="line">        ans = max(ans, f[i]);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></=></span></=></span></=></span></=></span></pre></td></tr></tbody></table></figure>
<h3 id="P2233-HNOI2002-公交车路线"><a href="#P2233-HNOI2002-公交车路线" class="headerlink" title="P2233 [HNOI2002]公交车路线"></a><a href="https://www.luogu.org/problemnew/show/P2233" target="_blank" rel="noopener">P2233 [HNOI2002]公交车路线</a></h3><p>R:f[i][n]表示经过N次换乘到达i的方案数，注意转移的边界条件即可。</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits stdc++.h></bits></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> mod = <span class="number">1000</span>;</span><br><span class="line"><span class="keyword">int</span> N, f[<span class="number">9</span>][<span class="number">3</span>];</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 注意边界条件，滚动数组优化</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">cin</span> >> N;</span><br><span class="line">    f[<span class="number">1</span>][<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= <span class="number">8</=></span>; j++) {</=></span><br><span class="line">            <span class="keyword">if</span> (j == <span class="number">8</span>) {</span><br><span class="line">                f[j][<span class="number">2</span>] = (f[j - <span class="number">1</span>][<span class="number">1</span>] + f[<span class="number">1</span>][<span class="number">1</span>]) % mod;</span><br><span class="line">            } <span class="keyword">else</span> <span class="keyword">if</span> (j == <span class="number">1</span>) {</span><br><span class="line">                f[j][<span class="number">2</span>] = (f[j + <span class="number">1</span>][<span class="number">1</span>] + f[<span class="number">8</span>][<span class="number">1</span>]) % mod;</span><br><span class="line">            } <span class="keyword">else</span> <span class="keyword">if</span> (j == <span class="number">4</span>) {</span><br><span class="line">                f[j][<span class="number">2</span>] = f[j - <span class="number">1</span>][<span class="number">1</span>];</span><br><span class="line">            } <span class="keyword">else</span> <span class="keyword">if</span> (j == <span class="number">6</span>) {</span><br><span class="line">                f[j][<span class="number">2</span>] = f[j + <span class="number">1</span>][<span class="number">1</span>];</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                f[j][<span class="number">2</span>] = (f[j - <span class="number">1</span>][<span class="number">1</span>] + f[j + <span class="number">1</span>][<span class="number">1</span>]) % mod;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= <span class="number">8</=></span>; j++) {<br><span class="line">            f[j][<span class="number">1</span>] = f[j][<span class="number">2</span>];</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span> << f[<span class="number">5</span>][<span class="number">2</span>] << <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/19/Algorithm0519/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Oduesp">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/head.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Oduesp">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/19/Algorithm0519/" itemprop="url">Konjak Record——2019.05.19</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-19T14:16:02+08:00">
                2019-05-19
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Konjak-Records/" itemprop="url" rel="index">
                    <span itemprop="name">Konjak Records</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/05/19/Algorithm0519/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/05/19/Algorithm0519/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="P2258-子矩阵"><a href="#P2258-子矩阵" class="headerlink" title="P2258 子矩阵"></a><a href="https://www.luogu.org/problemnew/show/P2258" target="_blank" rel="noopener">P2258 子矩阵</a></h3><p>R:dfs+区间dp</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits stdc++.h></bits></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">/***</span></span><br><span class="line"><span class="comment"> * 枚举R行，复杂度为C(16,8)=12870</span></span><br><span class="line"><span class="comment"> * dp是O(N^3)</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">20</span>;</span><br><span class="line"><span class="keyword">int</span> ans = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">int</span> N, M, chess[maxn][maxn], R, C, cache[maxn], vis[maxn], f[maxn][maxn], colsum[maxn], sub[maxn][maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> s, <span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">if</span> (n == R) {</span><br><span class="line">        <span class="built_in">memset</span>(f, <span class="number">0x3f</span>, <span class="keyword">sizeof</span>(f));</span><br><span class="line">        f[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">memset</span>(colsum, <span class="number">0</span>, <span class="keyword">sizeof</span>(colsum));</span><br><span class="line">        <span class="built_in">memset</span>(sub, <span class="number">0</span>, <span class="keyword">sizeof</span>(sub));</span><br><span class="line">        <span class="comment">//计算枚举的行中，每列的差的绝对值之和。</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= m; j++) {< span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i <= r; i++) {< span><br><span class="line">                colsum[j] += <span class="built_in">abs</span>(chess[cache[i]][j] - chess[cache[i - <span class="number">1</span>]][j]);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= m; i++) {< span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i + <span class="number">1</span>; j <= m; j++) {< span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">1</span>; k <= r; k++) {< span><br><span class="line">                    sub[i][j] += <span class="built_in">abs</span>(chess[cache[k]][j] - chess[cache[k]][i]);</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="comment">//f[i][j]表示前i个选j个且第i列必须选的最小值</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= m; i++) {< span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= c; j++) {< span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k < i; k++) {</span><br><span class="line">                    f[i][j] = min(f[i][j], f[k][j - <span class="number">1</span>] + sub[k][i] + colsum[i]);</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= m; i++) {< span><br><span class="line">            ans = min(ans, f[i][C]);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = s; i <= n; i++) {< span><br><span class="line">        <span class="keyword">if</span> (!vis[i]) {</span><br><span class="line">            cache[n + <span class="number">1</span>] = i;</span><br><span class="line">            vis[i] = <span class="number">1</span>;</span><br><span class="line">            dfs(i + <span class="number">1</span>, n + <span class="number">1</span>);</span><br><span class="line">            vis[i] = <span class="number">0</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cin</span> >> N >> M >> R >> C;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= m; j++) {< span><br><span class="line">            <span class="built_in">cin</span> >> chess[i][j];</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    dfs(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">cout</span> << ans << <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></=></span></=></span></=></span></=></span></=></span></=></span></=></span></=></span></=></span></=></span></=></span></pre></td></tr></tbody></table></figure>
<h3 id="P1472-奶牛家谱-Cow-Pedigrees"><a href="#P1472-奶牛家谱-Cow-Pedigrees" class="headerlink" title="P1472 奶牛家谱 Cow Pedigrees"></a><a href="https://www.luogu.org/problemnew/show/P1472" target="_blank" rel="noopener">P1472 奶牛家谱 Cow Pedigrees</a></h3><p>R:%%%%%%%%%%%%%%%%%%%%%%%%<br>table[i][j]表示深度为i、节点数为j的树的个数。根据给定的约束条件，j必须为奇数。你如何构造一棵树呢？当然是由更小的树来构造了。一棵深度为i、节点数为j的树可以由两个子树以及一个根结点构造而成。当i、j已经选定时，我们选择左子树的节点数k。</p>
<p>这样我们也就知道了右子树的节点数，即j-k-1。至于深度，至少要有一棵子树的深度为i-1才能使构造出的新树深度为i。有三种可能的情况：左子树深度为i-1 ，右子树深度小于i-1；右子树深度为i-1，左子树深度小于i-1；左右子树深度都为i-1。</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits stdc++.h></bits></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * dp[i][j]表示i个节点构成深度为j的数量</span></span><br><span class="line"><span class="comment"> * dp[i][j] = dp[m][i-1]*dp[i-m-1][1->i-2]</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">210</span>, maxk = <span class="number">105</span>, mod = <span class="number">9901</span>;</span><br><span class="line"><span class="keyword">int</span> f[maxn][maxk], N, K, sum[maxn][maxk];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">cin</span> >> N >> K;</span><br><span class="line">    f[<span class="number">1</span>][<span class="number">1</span>] = <span class="number">1</span>, sum[<span class="number">1</span>][<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i +="<span" class="number">2</=></span>) {<br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> d = <span class="number">2</span>; d <= k; d++) {< span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">1</span>; k < i - <span class="number">1</span>; k += <span class="number">2</span>) { <span class="comment">//左子树k个，右子树i - k -1个,</span></span><br><span class="line">                f[i][d] = (f[i][d] + f[k][d - <span class="number">1</span>] * sum[i - k - <span class="number">1</span>][d - <span class="number">2</span>]) % mod;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">1</span>; k < i - <span class="number">1</span>; k += <span class="number">2</span>) {</span><br><span class="line">                f[i][d] = (f[i][d] + f[i - k - <span class="number">1</span>][d - <span class="number">1</span>] * sum[k][d - <span class="number">2</span>]) % mod;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">1</span>; k < i - <span class="number">1</span>; k += <span class="number">2</span>) {</span><br><span class="line">                f[i][d] = (f[i][d] + f[k][d - <span class="number">1</span>] * f[i - k - <span class="number">1</span>][d - <span class="number">1</span>]) % mod;</span><br><span class="line">            }</span><br><span class="line">            sum[i][d] = (sum[i][d - <span class="number">1</span>] + f[i][d]) % mod;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span> << f[N][K] << <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></=></span></pre></td></tr></tbody></table></figure>
<h3 id="P2285-HNOI2004-打鼹鼠"><a href="#P2285-HNOI2004-打鼹鼠" class="headerlink" title="P2285 [HNOI2004]打鼹鼠"></a><a href="https://www.luogu.org/problemnew/show/P2285" target="_blank" rel="noopener">P2285 [HNOI2004]打鼹鼠</a></h3><p>R:dp[i][j][t]表示t时刻在i,j点的最大数量，这样转移方程很简单，但是时间、空间都要炸穿。将老鼠出现的时间顺序进行排列，dp[i] = max(dp[j]+1,dp[i]),这样就很简洁了。</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits stdc++.h></bits></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1005</span>, maxm = <span class="number">10000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> {</span></span><br><span class="line">    <span class="keyword">int</span> x, y, t;</span><br><span class="line">} nodes[maxm];</span><br><span class="line"><span class="keyword">int</span> N, M, f[maxm];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> pre, <span class="keyword">int</span> next)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">int</span> t = nodes[next].t - nodes[pre].t;</span><br><span class="line">    <span class="keyword">int</span> dis = <span class="built_in">abs</span>(nodes[next].x - nodes[pre].x) + <span class="built_in">abs</span>(nodes[pre].y - nodes[next].y);</span><br><span class="line">    <span class="keyword">if</span> (t >= dis) {</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &N, &M);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= m; i++) {< span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>, &nodes[i].t, &nodes[i].x, &nodes[i].y);</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= m; i++) {< span><br><span class="line">        f[i] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j < i; j++) {</span><br><span class="line">            <span class="keyword">if</span> (check(j, i)) {</span><br><span class="line">                f[i] = max(f[j] + <span class="number">1</span>, f[i]);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= m; i++)< span><br><span class="line">        ans = max(ans, f[i]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></=></span></=></span></=></span></pre></td></tr></tbody></table></figure>
<h3 id="P2836-加油问题"><a href="#P2836-加油问题" class="headerlink" title="P2836 加油问题"></a><a href="https://www.luogu.org/problemnew/show/P2836" target="_blank" rel="noopener">P2836 加油问题</a></h3><p>R:加油问题</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits stdc++.h></bits></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 这道题想了好久，我真是菜鸡</span></span><br><span class="line"><span class="comment"> * f[i]表示从起点到达i节点，并在i节点充满油的最小消耗。转移的时候就遍历节点，油量小于1/2且能够到达</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">55</span>;</span><br><span class="line"><span class="keyword">double</span> dis, contain, every, startCost;</span><br><span class="line"><span class="keyword">int</span> N;</span><br><span class="line"><span class="keyword">double</span> pos[maxn], spend[maxn];</span><br><span class="line"><span class="keyword">int</span> f[maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">cin</span> >> dis >> contain >> every >> startCost >> N;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="built_in">cin</span> >> pos[i] >> spend[i];</span><br><span class="line">    }</span><br><span class="line">    pos[N + <span class="number">1</span>] = dis;</span><br><span class="line">    <span class="built_in">memset</span>(f, <span class="number">0x3f</span>, <span class="keyword">sizeof</span>(f));</span><br><span class="line">    f[<span class="number">0</span>] = startCost * <span class="number">100</span> + <span class="number">0.5</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = i - <span class="number">1</span>; j >= <span class="number">0</span>; j--) {</span><br><span class="line">            <span class="keyword">double</span> dis = pos[i] - pos[j];</span><br><span class="line">            <span class="keyword">double</span> consume = dis / every;</span><br><span class="line">            <span class="keyword">if</span> (consume > contain) {</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (consume >= contain / <span class="number">2</span>) {</span><br><span class="line">                f[i] = min((<span class="keyword">int</span>)(f[j] + <span class="number">200</span> + consume * spend[i] + <span class="number">0.5</span>), f[i]);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = N; i >= <span class="number">0</span>; i--) {</span><br><span class="line">        <span class="keyword">double</span> dis = pos[N + <span class="number">1</span>] - pos[i];</span><br><span class="line">        <span class="keyword">double</span> consume = dis / every;</span><br><span class="line">        <span class="keyword">if</span> (consume > contain) {</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        }</span><br><span class="line">        ans = min(ans, f[i]);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%.2lf\n"</span>, ans * <span class="number">1.0</span> / <span class="number">100.0</span>);</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></=></span></=></span></pre></td></tr></tbody></table></figure><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/18/Algorithm0518/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Oduesp">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/head.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Oduesp">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/18/Algorithm0518/" itemprop="url">Konjak Record——2019.05.18</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-18T16:14:59+08:00">
                2019-05-18
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Konjak-Records/" itemprop="url" rel="index">
                    <span itemprop="name">Konjak Records</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/05/18/Algorithm0518/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/05/18/Algorithm0518/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="P1854-花店橱窗布置"><a href="#P1854-花店橱窗布置" class="headerlink" title="P1854 花店橱窗布置"></a><a href="https://www.luogu.org/problemnew/show/P1854" target="_blank" rel="noopener">P1854 花店橱窗布置</a></h3><p>R:背包问题，动态规划中的路径记录</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits stdc++.h></bits></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * f[i][j]表示前i盆花放在前j个盆的最大值</span></span><br><span class="line"><span class="comment"> * f[i][j] = max(f[i-1][j],f[i-1][j-1]+收益)</span></span><br><span class="line"><span class="comment"> * 初始化f[0][0]=0,这道题的路径记录有点意思</span></span><br><span class="line"><span class="comment"> * 我的空间复杂度是O(N^3)，但是这是一个从无到有的过程</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">100</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> f[maxn][maxn], F, V, A[maxn][maxn];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> {</span></span><br><span class="line">    <span class="keyword">int</span> tail, a[maxn];</span><br><span class="line">} way[maxn][maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">memset</span>(f, ~<span class="number">0x3f</span>, <span class="keyword">sizeof</span>(f));</span><br><span class="line">    <span class="built_in">cin</span> >> F >> V;</span><br><span class="line">    <span class="comment">//第0棵花放到前V个花瓶的收益为0</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i <= v; i++) {< span><br><span class="line">        f[<span class="number">0</span>][i] = <span class="number">0</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= f; i++) {< span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= v; j++) {< span><br><span class="line">            <span class="built_in">cin</span> >> A[i][j];</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= f; i++) {< span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= v; j++) {< span><br><span class="line">            <span class="keyword">if</span> (f[i][j - <span class="number">1</span>] > f[i - <span class="number">1</span>][j - <span class="number">1</span>] + A[i][j]) {</span><br><span class="line">                f[i][j] = f[i][j - <span class="number">1</span>];</span><br><span class="line">                way[i][j] = way[i][j - <span class="number">1</span>];</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                f[i][j] = f[i - <span class="number">1</span>][j - <span class="number">1</span>] + A[i][j];</span><br><span class="line">                way[i][j] = way[i - <span class="number">1</span>][j - <span class="number">1</span>];</span><br><span class="line">                way[i][j].a[++way[i][j].tail] = j;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span> << f[F][V] << <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= f; i++) {< span><br><span class="line">        <span class="built_in">cout</span> << way[F][V].a[i] << <span class="string">" "</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span> << <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></=></span></=></span></=></span></=></span></=></span></=></span></pre></td></tr></tbody></table></figure>
<h3 id="P2890-USACO07OPEN-便宜的回文Cheapest-Palindrome"><a href="#P2890-USACO07OPEN-便宜的回文Cheapest-Palindrome" class="headerlink" title="P2890 [USACO07OPEN]便宜的回文Cheapest Palindrome"></a><a href="https://www.luogu.org/problemnew/show/P2890" target="_blank" rel="noopener">P2890 [USACO07OPEN]便宜的回文Cheapest Palindrome</a></h3><p>R:回文</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits stdc++.h></bits></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 这道题和P3847，属于回文dp，f[i][j]表示i,j是回文串的最小花费</span></span><br><span class="line"><span class="comment"> * 如果ai==aj,则直接从i+1,j-1转移</span></span><br><span class="line"><span class="comment"> * 如果ai!=aj,则考虑在f[i+1][e]基础上删除e或增加e</span></span><br><span class="line"><span class="comment"> * 或者在[s][e-1]基础上删除s或者增加s</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">2000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">char</span> str[maxn];</span><br><span class="line"><span class="keyword">int</span> cost[<span class="number">27</span>][<span class="number">2</span>], N, M, f[maxn][maxn];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">Min2</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">return</span> a < b ? a : b;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">Min4</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="keyword">int</span> c, <span class="keyword">int</span> d)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">return</span> Min2(a, b) < Min2(c, d) ? Min2(a, b) : Min2(c, d);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &M, &N);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%s"</span>, &str[<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= m; i++) {< span><br><span class="line">        <span class="keyword">char</span> c;</span><br><span class="line">        <span class="built_in">cin</span> >> c;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &cost[c - <span class="string">'a'</span> + <span class="number">1</span>][<span class="number">0</span>], &cost[c - <span class="string">'a'</span> + <span class="number">1</span>][<span class="number">1</span>]);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i <= n; i++) {< span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> s = <span class="number">1</span>; s <= n; s++) {< span><br><span class="line">            <span class="keyword">int</span> e = s + i - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (e > N)</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">if</span> (str[s] == str[e]) {</span><br><span class="line">                f[s][e] = f[s + <span class="number">1</span>][e - <span class="number">1</span>];</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                <span class="keyword">int</span> r = str[e] - <span class="string">'a'</span> + <span class="number">1</span>, l = str[s] - <span class="string">'a'</span> + <span class="number">1</span>;</span><br><span class="line">                f[s][e] = Min4(f[s + <span class="number">1</span>][e] + cost[l][<span class="number">1</span>], f[s][e - <span class="number">1</span>] + cost[r][<span class="number">1</span>],</span><br><span class="line">                    f[s + <span class="number">1</span>][e] + cost[l][<span class="number">0</span>], f[s][e - <span class="number">1</span>] + cost[r][<span class="number">0</span>]);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,f[<span class="number">1</span>][N]);</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></=></span></=></span></=></span></pre></td></tr></tbody></table></figure>
<h3 id="P3847-TJOI2007-调整队形"><a href="#P3847-TJOI2007-调整队形" class="headerlink" title="P3847 [TJOI2007]调整队形"></a><a href="https://www.luogu.org/problemnew/show/P3847" target="_blank" rel="noopener">P3847 [TJOI2007]调整队形</a></h3><p>R:回文</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits stdc++.h></bits></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * dp[i][j]表示使得区间[i,j]变为回文串的最小修改次数，注意[i,j]内的元素不一定是j-i+1了，但是对结果不影响</span></span><br><span class="line"><span class="comment"> * 如果ai==aj,则有i+1,j-1转移,如果ai!=aj,则有[i+1,j],[i,j-1],[i-1][j+1]中的最小值加一转移</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">3000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> f[maxn][maxn], a[maxn], N;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &N);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &a[i]);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i <= n; i++) {< span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> s = <span class="number">1</span>; s <= n; s++) {< span><br><span class="line">            <span class="keyword">int</span> e = s + i - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (e > N) {</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (a[s] == a[e]) {</span><br><span class="line">                f[s][e] = f[s + <span class="number">1</span>][e - <span class="number">1</span>];</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                f[s][e] = min(f[s + <span class="number">1</span>][e - <span class="number">1</span>], min(f[s][e - <span class="number">1</span>], f[s + <span class="number">1</span>][e])) + <span class="number">1</span>;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, f[<span class="number">1</span>][N]);</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></=></span></=></span></=></span></pre></td></tr></tbody></table></figure><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/17/Algorithm0517/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Oduesp">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/head.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Oduesp">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/17/Algorithm0517/" itemprop="url">Konjak Record——2019.05.17</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-17T12:44:09+08:00">
                2019-05-17
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Konjak-Records/" itemprop="url" rel="index">
                    <span itemprop="name">Konjak Records</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/05/17/Algorithm0517/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/05/17/Algorithm0517/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="难题"><a href="#难题" class="headerlink" title="难题"></a>难题</h2><h3 id="1、P1868-饥饿的奶牛"><a href="#1、P1868-饥饿的奶牛" class="headerlink" title="1、P1868 饥饿的奶牛"></a><a href="https://www.luogu.org/problemnew/show/P1868" target="_blank" rel="noopener">1、P1868 饥饿的奶牛</a></h3><p>R:如果f[i]从f[j] (j<=i)转移时，如果f[1]->f[i]具有单调性，那么二分查找可以降低复杂度。其次，遇到区间问题时，按某个端点排序可以有利于问题解决。</=i)转移时，如果f[1]-></p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits stdc++.h></bits></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">150000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 首先将节点按照右端点排序，f[i]表示前i堆草的最大值，f[i] = max(f[i-1],f[j]+吃这堆草)</span></span><br><span class="line"><span class="comment"> * 排序以及该转移方程可以保证f是不减的,因为即使两个区间a,b的右端点相同，左端点不同，那它们位置上</span></span><br><span class="line"><span class="comment"> * 是连续的，可以通过max这个转移过来。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">int</span> N, f[maxn];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> {</span></span><br><span class="line">    <span class="keyword">int</span> l, r;</span><br><span class="line">} nodes[maxn];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="keyword">inline</span> <span class="title">cmp</span><span class="params">(<span class="keyword">const</span> Node& a, <span class="keyword">const</span> Node& b)</span> </span>{ <span class="keyword">return</span> a.r < b.r; }</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">int</span> l = <span class="number">1</span>, r = x, pos = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (l <= r) {< span><br><span class="line">        <span class="keyword">int</span> mid = (l + r) >> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (nodes[mid].r < nodes[x].l) {</span><br><span class="line">            pos = mid, l = mid + <span class="number">1</span>;</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            r = mid - <span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> pos;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &N);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &nodes[i].l, &nodes[i].r);</span><br><span class="line">    }</span><br><span class="line">    sort(nodes + <span class="number">1</span>, nodes + <span class="number">1</span> + N, cmp);</span><br><span class="line">    f[<span class="number">1</span>] = nodes[<span class="number">1</span>].r - nodes[<span class="number">1</span>].l + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i <= n; i++) {< span><br><span class="line">        f[i] = f[i - <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">int</span> pos = find(i);</span><br><span class="line">        f[i] = max(f[pos] + nodes[i].r - nodes[i].l + <span class="number">1</span>, f[i]);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,f[N]);</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></=></span></=></span></=></span></pre></td></tr></tbody></table></figure>
<h3 id="2、P1986-元旦晚会"><a href="#2、P1986-元旦晚会" class="headerlink" title="2、P1986 元旦晚会"></a><a href="https://www.luogu.org/problemnew/show/P1986" target="_blank" rel="noopener">2、P1986 元旦晚会</a></h3><p>R:贪心，类似P2887，更简单一些</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits stdc++.h></bits></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">30000</span> + <span class="number">10</span>, maxm = <span class="number">5005</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> {</span></span><br><span class="line">    <span class="keyword">int</span> l, r, num;</span><br><span class="line">} nodes[maxm];</span><br><span class="line"><span class="keyword">int</span> N, M, visited[maxn];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(<span class="keyword">const</span> Node& a, <span class="keyword">const</span> Node& b)</span> </span>{ <span class="keyword">return</span> a.r < b.r; }</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &N, &M);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= m; i++) {< span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>, &nodes[i].l, &nodes[i].r, &nodes[i].num);</span><br><span class="line">    }</span><br><span class="line">    sort(nodes + <span class="number">1</span>, nodes + <span class="number">1</span> + M, cmp);</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= m; i++) {< span><br><span class="line">        <span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = nodes[i].r; j >= nodes[i].l; j--) {</span><br><span class="line">            <span class="keyword">if</span> (visited[j]) {</span><br><span class="line">                k++;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span> (k > nodes[i].num) {</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = nodes[i].r; j >= nodes[i].l; j--) {</span><br><span class="line">            <span class="keyword">if</span> (k >= nodes[i].num) {</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (!visited[j]) {</span><br><span class="line">                k++, ans++, visited[j] = <span class="number">1</span>;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></=></span></=></span></pre></td></tr></tbody></table></figure>
<h3 id="3、P4019-多边形染色"><a href="#3、P4019-多边形染色" class="headerlink" title="3、P4019 多边形染色"></a><a href="https://www.luogu.org/problemnew/show/P4019" target="_blank" rel="noopener">3、P4019 多边形染色</a></h3><p>R:环形dp的方法</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits stdc++.h></bits></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/***</span></span><br><span class="line"><span class="comment"> * 通过这道题，我学习了环状dp的方法：枚举开头，在最后一个判断合法性。</span></span><br><span class="line"><span class="comment"> * dp[i][c] = sum(dp[i-1][k])</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">50000</span> + <span class="number">10</span>, mod = <span class="number">987654321</span>;</span><br><span class="line"><span class="comment">//col表示节点不能涂的颜色</span></span><br><span class="line"><span class="keyword">int</span> N, M, C, dp[maxn][<span class="number">15</span>], uncol[maxn][<span class="number">15</span>], e[maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>, &N, &M, &C);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= m; i++) {< span><br><span class="line">        <span class="keyword">int</span> option, x, y;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>, &option, &x, &y);</span><br><span class="line">        <span class="keyword">if</span> (option == <span class="number">1</span>) {</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= c; j++) {< span><br><span class="line">                <span class="keyword">if</span> (j != y)</span><br><span class="line">                    uncol[x][j] = <span class="number">1</span>;</span><br><span class="line">            }</span><br><span class="line">        } <span class="keyword">else</span> <span class="keyword">if</span> (option == <span class="number">2</span>) {</span><br><span class="line">            uncol[x][y] = <span class="number">1</span>;</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            e[max(x, y)] = min(x, y);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> color = <span class="number">1</span>; color <= c; color++) {< span><br><span class="line">        <span class="keyword">if</span> (uncol[<span class="number">1</span>][color])</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        <span class="built_in">memset</span>(dp, <span class="number">0</span>, <span class="keyword">sizeof</span>(dp));</span><br><span class="line">        dp[<span class="number">1</span>][color] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i < N; i++) {</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= c; j++) {< span><br><span class="line">                <span class="keyword">if</span> (uncol[i][j]) {</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">if</span> (e[i]) {</span><br><span class="line">                    dp[i][j] = dp[i - <span class="number">1</span>][j];</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">1</span>; k <= c; k++) {< span><br><span class="line">                    <span class="keyword">if</span> (k != j) {</span><br><span class="line">                        dp[i][j] = (dp[i][j] + dp[i - <span class="number">1</span>][k]) % mod;</span><br><span class="line">                    }</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= c; i++) {< span><br><span class="line">            <span class="keyword">if</span> (uncol[N][i] || i == color) {</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (e[N]) {</span><br><span class="line">                dp[N][i] = dp[N - <span class="number">1</span>][i];</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">1</span>; k <= c; k++) {< span><br><span class="line">                <span class="keyword">if</span> (k != i) {</span><br><span class="line">                    dp[N][i] = (dp[N][i] + dp[N - <span class="number">1</span>][k]) % mod;</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= c; i++) {< span><br><span class="line">            ans = (ans + dp[N][i]) % mod;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></=></span></=></span></=></span></=></span></=></span></=></span></=></span></=></span></pre></td></tr></tbody></table></figure>
<h3 id="4、P2365-任务安排"><a href="#4、P2365-任务安排" class="headerlink" title="4、P2365 任务安排"></a><a href="https://www.luogu.org/problemnew/show/P2365" target="_blank" rel="noopener">4、P2365 任务安排</a></h3><p>R:区间dp的升级</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits stdc++.h></bits></span></span></span><br><span class="line"><span class="comment">/***</span></span><br><span class="line"><span class="comment"> * 以下是60分做法，原因是超时三个点，还有WA一个点，超时的原因是复杂度是O(N^3)</span></span><br><span class="line"><span class="comment"> * WA原因是int，但是内存不够开Long long</span></span><br><span class="line"><span class="comment"> * f[i][j]表示前i个任务分成j段的最小值，转移方程就很好像，复杂度是N^3</span></span><br><span class="line"><span class="comment"> * 其实我不用前i个任务分成几段，f[j]->f[i]转移只需要增加一个任务启动时间S即可。</span></span><br><span class="line"><span class="comment"> * 无后效性：动态规划法的最优解通常是由一系列最优决策组成的决策序列，</span></span><br><span class="line"><span class="comment"> * 最优子结构就是这些最优决策序列中的一个子序列，对于每个子序列再做</span></span><br><span class="line"><span class="comment"> * 最优决策会产生新的最优决策（子）序列，如果某个决策只受当前最优决</span></span><br><span class="line"><span class="comment"> * 策子序列的影响，而不受当前决策可能产生的新的最优决策子序列的影响，</span></span><br><span class="line"><span class="comment"> * 则可以理解这个最优决策具有无后效性。</span></span><br><span class="line"><span class="comment"> * f[j]表示前j个任务的最优值，F[i]就可以从当前的最优子序列[0,i-1]中选择转移且不会因为最新</span></span><br><span class="line"><span class="comment"> * 的子序列影响。注意每开一个段新的，就会产生使得后续的时间推迟S,所以加上(系数差)*S,再算上当前段任务完成的代价。</span></span><br><span class="line"><span class="comment"> * 还有斜率优化将复杂度降到O(N)，今天心情不好不学了。</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">5000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> N, S, t[maxn], a[maxn], f[maxn][maxn], sum[maxn], total_a[maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">cin</span> >> N >> S;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="built_in">cin</span> >> t[i] >> a[i];</span><br><span class="line">        sum[i] = sum[i - <span class="number">1</span>] + t[i];</span><br><span class="line">        total_a[i] = total_a[i - <span class="number">1</span>] + a[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">memset</span>(f, <span class="number">0x3f</span>, <span class="keyword">sizeof</span>(f));</span><br><span class="line">    f[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= i; j++) {< span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k = i - <span class="number">1</span>; k >= j - <span class="number">1</span>; k--) {</span><br><span class="line">                f[i][j] = min(f[i][j],</span><br><span class="line">                    f[k][j - <span class="number">1</span>] + (S * j + sum[i]) * (total_a[i] - total_a[k]));</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        ans = min(ans, f[N][i]);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></=></span></=></span></=></span></=></span></pre></td></tr></tbody></table></figure>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits stdc++.h></bits></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ri register int</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">5000</span> + <span class="number">10</span>;</span><br><span class="line">ll as[maxn], ts[maxn], a[maxn], t[maxn], f[maxn], N, S;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">cin</span> >> N >> S;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="built_in">cin</span> >> t[i] >> a[i];</span><br><span class="line">        ts[i] = ts[i - <span class="number">1</span>] + t[i], as[i] = as[i - <span class="number">1</span>] + a[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">memset</span>(f, <span class="number">0x3f</span>, <span class="keyword">sizeof</span>(f));</span><br><span class="line">    f[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (ri i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="keyword">for</span> (ri j = <span class="number">0</span>; j < i; j++) {</span><br><span class="line">            f[i] = min(f[i], f[j] + ts[i] * (as[i] - as[j]) + S * (as[N] - as[j]));</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span> << f[N] << <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></=></span></=></span></pre></td></tr></tbody></table></figure>
<h2 id="常规题"><a href="#常规题" class="headerlink" title="常规题"></a>常规题</h2><h3 id="5、P2389-电脑班的裁员"><a href="#5、P2389-电脑班的裁员" class="headerlink" title="5、P2389 电脑班的裁员"></a><a href="https://www.luogu.org/problemnew/show/P2389" target="_blank" rel="noopener">5、P2389 电脑班的裁员</a></h3><p>R:平平无奇的区间dp</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits stdc++.h></bits></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">505</span>;</span><br><span class="line"><span class="keyword">int</span> K, score[maxn], dp[maxn][maxn], N, sum[maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">cin</span> >> N >> K;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="built_in">cin</span> >> score[i];</span><br><span class="line">        sum[i] = sum[i - <span class="number">1</span>] + score[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">memset</span>(dp, ~<span class="number">0x3f</span>, <span class="keyword">sizeof</span>(dp));</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i <= n; i++) {< span><br><span class="line">        dp[i][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">1</span>; k <= k; k++) {< span><br><span class="line">            <span class="keyword">if</span> (k > i) {</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            }</span><br><span class="line">            dp[i][k] = dp[i - <span class="number">1</span>][k];</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i - <span class="number">1</span>; j >= <span class="number">0</span>; j--) {</span><br><span class="line">                <span class="keyword">if</span> (j < k - <span class="number">1</span>) {</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                }</span><br><span class="line">                dp[i][k] = max(dp[j][k - <span class="number">1</span>] + sum[i] - sum[j], dp[i][k]);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">-0x3f3f3f3f</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j <= k; j++) {< span><br><span class="line">            ans = max(ans, dp[i][j]);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span> << ans << <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></=></span></=></span></=></span></=></span></=></span></=></span></pre></td></tr></tbody></table></figure>
<h3 id="6、P2340-奶牛会展"><a href="#6、P2340-奶牛会展" class="headerlink" title="6、P2340 奶牛会展"></a><a href="https://www.luogu.org/problemnew/show/P2340" target="_blank" rel="noopener">6、P2340 奶牛会展</a></h3><p>R:带有负值的dp，之前做过，所以算简单题</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits stdc++.h></bits></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> zero = (<span class="number">400</span> * <span class="number">1000</span> + <span class="number">10</span>), maxn = zero << <span class="number">1</span>, up = maxn - <span class="number">1</span>;</span><br><span class="line"><span class="keyword">int</span> dp[maxn], clever[<span class="number">405</span>], love[<span class="number">405</span>], N;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    ios::sync_with_stdio(<span class="number">0</span>), <span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">cin</span> >> N;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="built_in">cin</span> >> clever[i] >> love[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">memset</span>(dp, ~<span class="number">0x3f</span>, <span class="keyword">sizeof</span>(dp));</span><br><span class="line">    dp[zero] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="keyword">if</span> (clever[i] < <span class="number">0</span>) {</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j - clever[i] <= up; j++) {< span><br><span class="line">                dp[j] = max(dp[j - clever[i]] + love[i], dp[j]);</span><br><span class="line">            }</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = up; j >= clever[i]; j--) {</span><br><span class="line">                dp[j] = max(dp[j - clever[i]] + love[i], dp[j]);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">-0x3f3f3f3f</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = zero; i <= up; i++) {< span><br><span class="line">        <span class="keyword">if</span> (dp[i] >= <span class="number">0</span>) {</span><br><span class="line">            ans = max(ans, i - zero + dp[i]);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span> << ans << <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></=></span></=></span></=></span></=></span></pre></td></tr></tbody></table></figure><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/16/Java0516/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Oduesp">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/head.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Oduesp">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/16/Java0516/" itemprop="url">Java程序提交Spark任务</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-16T16:52:06+08:00">
                2019-05-16
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/Spark/" itemprop="url" rel="index">
                    <span itemprop="name">Spark</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/05/16/Java0516/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/05/16/Java0516/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h2><h3 id="1、java-cp-jar-xxx"><a href="#1、java-cp-jar-xxx" class="headerlink" title="1、java -cp *.jar xxx"></a>1、java -cp *.jar xxx</h3><p>报错：java.lang.SecurityException: Invalid signature file digest for Manifest main attributes.</p>
<p>解决方法：打开META-INF目录，将<em>.SF,</em>.DSA,*.RSA文件删除即可。</p>
<h3 id="Java程序调用Spark-Submit"><a href="#Java程序调用Spark-Submit" class="headerlink" title="Java程序调用Spark Submit"></a>Java程序调用Spark Submit</h3><p>1、首先引入maven依赖,需要注意的是将Spark中的hadoop去掉，然后引入自定义的hadoop版本。这个过程要对jar包进行更改,将maven reposity中的hadoop-common包中的core-default.xml添加以下语句,如果没有这个操作，可能会造成hdfs schema错误。<a href="https://www.cnblogs.com/TTyb/p/7283437.html" target="_blank" rel="noopener">参考链接</a></p>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><!--- global properties --></span></span><br><span class="line"><span class="tag"><<span class="name">property</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">name</span>></span>fs.hdfs.impl<span class="tag">name</span>></span><br><span class="line">        <span class="tag"><<span class="name">value</span>></span>org.apache.hadoop.hdfs.DistributedFileSystem<span class="tag">value</span>></span><br><span class="line">        <span class="tag"><<span class="name">description</span>></span>The FileSystem for hdfs: uris.<span class="tag">description</span>></span><br><span class="line"><span class="tag">property</span>></span><br><span class="line"><span class="tag"><<span class="name">property</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">name</span>></span>fs.file.impl<span class="tag">name</span>></span><br><span class="line">        <span class="tag"><<span class="name">value</span>></span>org.apache.hadoop.fs.LocalFileSystem<span class="tag">value</span>></span><br><span class="line">        <span class="tag"><<span class="name">description</span>></span>The FileSystem for hdfs: uris.<span class="tag">description</span>></span><br><span class="line"><span class="tag">property</span>></span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"><?xml version="1.0" encoding="UTF-8"?></span></span><br><span class="line"><span class="tag"><<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>></span></span><br><span class="line">    <span class="tag"><<span class="name">modelVersion</span>></span>4.0.0<span class="tag">modelVersion</span>></span><br><span class="line"></span><br><span class="line">    <span class="tag"><<span class="name">groupId</span>></span>org.gzp.team<span class="tag">groupId</span>></span><br><span class="line">    <span class="tag"><<span class="name">artifactId</span>></span>submit<span class="tag">artifactId</span>></span><br><span class="line">    <span class="tag"><<span class="name">version</span>></span>1.0<span class="tag">version</span>></span><br><span class="line"></span><br><span class="line">    <span class="tag"><<span class="name">properties</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">spark.version</span>></span>2.3.2<span class="tag">spark.version</span>></span><br><span class="line">        <span class="tag"><<span class="name">scala.compat.version</span>></span>2.11<span class="tag">scala.compat.version</span>></span><br><span class="line">        <span class="tag"><<span class="name">org.apache.hadoop.version</span>></span>2.7.7<span class="tag">org.apache.hadoop.version</span>></span><br><span class="line">        <span class="tag"><<span class="name">project.build.sourceEncoding</span>></span>UTF-8<span class="tag">project.build.sourceEncoding</span>></span><br><span class="line">    <span class="tag">properties</span>></span><br><span class="line"></span><br><span class="line">    <span class="tag"><<span class="name">dependencies</span>></span></span><br><span class="line">        <span class="comment"><!-- https://mvnrepository.com/artifact/org.apache.spark/spark-core --></span></span><br><span class="line">        <span class="tag"><<span class="name">dependency</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">groupId</span>></span>org.apache.spark<span class="tag">groupId</span>></span><br><span class="line">            <span class="tag"><<span class="name">artifactId</span>></span>spark-core_${scala.compat.version}<span class="tag">artifactId</span>></span><br><span class="line">            <span class="tag"><<span class="name">version</span>></span>${spark.version}<span class="tag">version</span>></span><br><span class="line">            <span class="tag"><<span class="name">exclusions</span>></span></span><br><span class="line">                <span class="tag"><<span class="name">exclusion</span>></span></span><br><span class="line">                    <span class="tag"><<span class="name">groupId</span>></span>org.apache.hadoop<span class="tag">groupId</span>></span><br><span class="line">                    <span class="tag"><<span class="name">artifactId</span>></span>*<span class="tag">artifactId</span>></span><br><span class="line">                <span class="tag">exclusion</span>></span><br><span class="line">            <span class="tag">exclusions</span>></span><br><span class="line">        <span class="tag">dependency</span>></span><br><span class="line">        <span class="tag"><<span class="name">dependency</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">groupId</span>></span>org.apache.hadoop<span class="tag">groupId</span>></span><br><span class="line">            <span class="tag"><<span class="name">artifactId</span>></span>hadoop-client<span class="tag">artifactId</span>></span><br><span class="line">            <span class="tag"><<span class="name">version</span>></span>${org.apache.hadoop.version}<span class="tag">version</span>></span><br><span class="line">        <span class="tag">dependency</span>></span><br><span class="line"></span><br><span class="line">        <span class="tag"><<span class="name">dependency</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">groupId</span>></span>org.apache.spark<span class="tag">groupId</span>></span><br><span class="line">            <span class="tag"><<span class="name">artifactId</span>></span>spark-sql_${scala.compat.version}<span class="tag">artifactId</span>></span><br><span class="line">            <span class="tag"><<span class="name">version</span>></span>${spark.version}<span class="tag">version</span>></span><br><span class="line">        <span class="tag">dependency</span>></span><br><span class="line"></span><br><span class="line">    <span class="tag">dependencies</span>></span><br><span class="line">    <span class="comment"><!--超级jar包--></span></span><br><span class="line">    <span class="tag"><<span class="name">build</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">plugins</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">plugin</span>></span></span><br><span class="line">                <span class="tag"><<span class="name">groupId</span>></span>org.apache.maven.plugins<span class="tag">groupId</span>></span><br><span class="line">                <span class="tag"><<span class="name">artifactId</span>></span>maven-shade-plugin<span class="tag">artifactId</span>></span><br><span class="line">                <span class="tag"><<span class="name">version</span>></span>3.1.0<span class="tag">version</span>></span><br><span class="line">                <span class="tag"><<span class="name">executions</span>></span></span><br><span class="line">                    <span class="tag"><<span class="name">execution</span>></span></span><br><span class="line">                        <span class="tag"><<span class="name">phase</span>></span>package<span class="tag">phase</span>></span><br><span class="line">                        <span class="tag"><<span class="name">goals</span>></span></span><br><span class="line">                            <span class="tag"><<span class="name">goal</span>></span>shade<span class="tag">goal</span>></span><br><span class="line">                        <span class="tag">goals</span>></span><br><span class="line">                    <span class="tag">execution</span>></span><br><span class="line">                <span class="tag">executions</span>></span><br><span class="line"></span><br><span class="line">            <span class="tag">plugin</span>></span><br><span class="line">        <span class="tag">plugins</span>></span><br><span class="line">    <span class="tag">build</span>></span><br><span class="line"></span><br><span class="line"><span class="tag">project</span>></span><br></pre></td></tr></tbody></table></figure>
<p>2、调用SparkSubmit.main(args)</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.spark.deploy.SparkSubmit;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">KFSubmit</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        SparkSubmit.main(args);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>3、调用java，注意里面有坑，需要提供两个虚拟机参数，否则会提交失败。</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -Xms256m -Xmx1024m -cp submit-1.0.jar KFSubmit --class RipleysKJavaExample  --conf "spark.executor.memory=1g" --conf "spark.driver.memory=1g" --master spark://master:7077 hdfs://master:9000/applications/origin_k.jar spark://master:7077 hdfs://master:9000/points/hubei.csv hdfs://master:9000/polygons/hubei.json true 10000 10000 10 Months 10 10 randomPermutation 1 70 true false false true hdfs://master:9000/ripleysk/try.json</span><br></pre></td></tr></tbody></table></figure>
<p>4、很重要的一点，二者的spark版本要一致！！！！否者会可能会出现提交但是不工作的问题。</p>
<p>5、还有一个坑：写文件到hdfs时出现以下错误:java.lang.IllegalArgumentException: Wrong FS://expected: file:///<br>解决方法是:</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Configuration conf = <span class="keyword">new</span> Configuration();</span><br><span class="line"><span class="comment">//使用hadoop的core-site.xml中的fs.defaultFS参数，防止Wrong FS: hdfs:.......file:///  错误异常</span></span><br><span class="line">conf.set(<span class="string">"fs.defaultFS"</span>, <span class="string">"hdfs://192.168.184.99:9000"</span>);</span><br></pre></td></tr></tbody></table></figure>
<h2 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h2><h3 id="1、引入Maven依赖"><a href="#1、引入Maven依赖" class="headerlink" title="1、引入Maven依赖"></a>1、引入Maven依赖</h3><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag"><<span class="name">dependency</span>></span></span><br><span class="line">  <span class="tag"><<span class="name">groupId</span>></span>com.github.ywilkof<span class="tag">groupId</span>></span><br><span class="line">  <span class="tag"><<span class="name">artifactId</span>></span>spark-jobs-rest-client<span class="tag">artifactId</span>></span><br><span class="line">  <span class="tag"><<span class="name">version</span>></span>1.3.9<span class="tag">version</span>></span><br><span class="line"><span class="tag">dependency</span>></span><br></pre></td></tr></tbody></table></figure>
<h3 id="2、向spark的Restful接口提交任务"><a href="#2、向spark的Restful接口提交任务" class="headerlink" title="2、向spark的Restful接口提交任务"></a>2、向spark的Restful接口提交任务</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">submitByRest</span><span class="params">(HttpServletRequest httpServletRequest)</span> </span>{</span><br><span class="line">    <span class="comment">//HttpServletRequest用来读取请求参数</span></span><br><span class="line">    SimpleDateFormat df = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd-HH-mm-ss"</span>);<span class="comment">//设置日期格式</span></span><br><span class="line">    String cur = df.format(<span class="keyword">new</span> Date());</span><br><span class="line">    <span class="comment">//masterHost指定spark://master:7077中的IP</span></span><br><span class="line">    SparkRestClient sparkRestClient = SparkRestClient.builder()</span><br><span class="line">            .masterHost(masterHost)</span><br><span class="line">            .sparkVersion(sparkVersion)</span><br><span class="line">            .build();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> {</span><br><span class="line">        <span class="comment">//程序需要用到的参数</span></span><br><span class="line">        String[] schemas = {</span><br><span class="line">                master,</span><br><span class="line">                <span class="string">"hdfs://192.168.200.149:9000/points/hubei.csv"</span></span><br><span class="line">                , <span class="string">"hdfs://192.168.200.149:9000/polygons/hubei.json"</span>,</span><br><span class="line">                <span class="string">"true"</span>, <span class="string">"5000"</span>, <span class="string">"100"</span>, <span class="string">"10"</span>, <span class="string">"Months"</span>, <span class="string">"10"</span>, <span class="string">"10"</span>,</span><br><span class="line">                <span class="string">"randomPermutation"</span>, <span class="string">"1"</span>, <span class="string">"70"</span>, <span class="string">"true"</span>, <span class="string">"false"</span>,</span><br><span class="line">                <span class="string">"false"</span>, <span class="string">"true"</span>, defaultDFS,</span><br><span class="line">                resultDir + cur + <span class="string">".json"</span>};</span><br><span class="line">        List<string> arg = Arrays.asList(schemas);</string></span><br><span class="line">        <span class="keyword">final</span> String submissionId = sparkRestClient.prepareJobSubmit()</span><br><span class="line">                .appName(appName)</span><br><span class="line">                .appResource(appResource)</span><br><span class="line">                .mainClass(mainClass)</span><br><span class="line">                .appArgs(arg)</span><br><span class="line">                .withProperties()</span><br><span class="line">                .submit();</span><br><span class="line">                <span class="comment">//put方法将内存等信息上传</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        .put("spark.executor.memory", "1g")</span></span><br><span class="line"><span class="comment">                .put("spark.executor.cores", "8")</span></span><br><span class="line"><span class="comment">                .put("spark.executor.nums", "50")</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        System.out.println(submissionId);</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) {</span><br><span class="line">            <span class="comment">//查询状态</span></span><br><span class="line">            <span class="keyword">final</span> DriverState driverState = sparkRestClient</span><br><span class="line">                    .checkJobStatus()</span><br><span class="line">                    .withSubmissionId(submissionId);</span><br><span class="line">            System.out.println(driverState);</span><br><span class="line">            <span class="keyword">if</span> (driverState.name().equals(DriverState.RUNNING.name())) {</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            }<span class="keyword">else</span>{</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        Thread.sleep(<span class="number">30000</span>);</span><br><span class="line">        <span class="keyword">return</span> getResult(resultDir + cur + <span class="string">".json"</span>);</span><br><span class="line">    } <span class="keyword">catch</span> (FailedSparkRequestException e) {</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"error"</span>;</span><br><span class="line">    } <span class="keyword">catch</span> (InterruptedException e) {</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"error"</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/15/Algorithm0515/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Oduesp">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/head.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Oduesp">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/15/Algorithm0515/" itemprop="url">Konjak Record——2019.05.15</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-15T16:07:31+08:00">
                2019-05-15
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Konjak-Records/" itemprop="url" rel="index">
                    <span itemprop="name">Konjak Records</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/05/15/Algorithm0515/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/05/15/Algorithm0515/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="难题"><a href="#难题" class="headerlink" title="难题"></a>难题</h2><h3 id="1、P3004-USACO10DEC-宝箱Treasure-Chest"><a href="#1、P3004-USACO10DEC-宝箱Treasure-Chest" class="headerlink" title="1、P3004 [USACO10DEC]宝箱Treasure Chest"></a><a href="https://www.luogu.org/problemnew/show/P3004" target="_blank" rel="noopener">1、P3004 [USACO10DEC]宝箱Treasure Chest</a></h3><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits stdc++.h></bits></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * f[i][j]表示区间[i,j]内先手所取的最大值</span></span><br><span class="line"><span class="comment"> * f[i][j] = sum[i,j] - min(f[i+1][j],f[i][j-1])</span></span><br><span class="line"><span class="comment"> * 内存限制64MB搞我用动态内存,压维我不太会</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">5000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> v[maxn], N, sum[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">cin</span> >> N;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="built_in">cin</span> >> v[i];</span><br><span class="line">        sum[i] = sum[i - <span class="number">1</span>] + v[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span>** f = <span class="keyword">new</span> <span class="keyword">int</span>*[maxn];</span><br><span class="line">    <span class="keyword">int</span> maxlen = N + <span class="number">10</span>;</span><br><span class="line">    <span class="comment">//f[1][0]表示f[1][1],f[2][0]表示f[2][2]</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        f[i] = <span class="keyword">new</span> <span class="keyword">int</span>[maxlen];</span><br><span class="line">        maxlen--;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        f[i][<span class="number">0</span>] = v[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> len = <span class="number">1</span>; len <= n; len++) {< span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> s = <span class="number">1</span>; s <= n; s++) {< span><br><span class="line">            <span class="keyword">int</span> e = s + len;</span><br><span class="line">            <span class="keyword">if</span> (e > N) {</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            }</span><br><span class="line">            f[s][len] = sum[e] - sum[s - <span class="number">1</span>] - min(f[s + <span class="number">1</span>][len - <span class="number">1</span>], f[s][len - <span class="number">1</span>]);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span> << f[<span class="number">1</span>][N - <span class="number">1</span>] << <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="keyword">delete</span>[] f[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">delete</span>[] f;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></=></span></=></span></=></span></=></span></=></span></=></span></pre></td></tr></tbody></table></figure>
<h3 id="2、P3110-USACO14DEC-驮运Piggy-Back"><a href="#2、P3110-USACO14DEC-驮运Piggy-Back" class="headerlink" title="2、P3110 [USACO14DEC]驮运Piggy Back"></a><a href="https://www.luogu.org/problemnew/show/P3110" target="_blank" rel="noopener">2、P3110 [USACO14DEC]驮运Piggy Back</a></h3><p>R:堆优化的迪杰斯特拉算法+动态规划。</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits stdc++.h></bits></span></span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 如果B+E>P，那么就不要相遇了，各走各的最短路径到达终点。</span></span><br><span class="line"><span class="comment"> * 如果B+E<p，那么可以枚举相遇点，计算b、e到相遇点的最短路径，最后求和。< span></p，那么可以枚举相遇点，计算b、e到相遇点的最短路径，最后求和。<></span><br><span class="line"><span class="comment"> * 即使B+E<p，能保证相遇一定会比不相遇好吗？那就再和不相遇的比一下。< span></p，能保证相遇一定会比不相遇好吗？那就再和不相遇的比一下。<></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pii pair<span class="meta-string"><int, int></int,></span></span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">40000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> {</span></span><br><span class="line">    <span class="keyword">int</span> v;</span><br><span class="line">    Edge* next;</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line">Edge *h[maxn], pool[maxn << <span class="number">1</span>];</span><br><span class="line"><span class="keyword">int</span> tot, B, E, P, N, M, db[maxn], de[maxn], dp[maxn], visited[maxn];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add_edge</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    Edge* p = &pool[tot++];</span><br><span class="line">    p->v = v, p->next = h[u], h[u] = p;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dj</span><span class="params">(<span class="keyword">int</span>* d, <span class="keyword">int</span> source)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="comment">//注意这里的优先队列使用方法</span></span><br><span class="line">    priority_queue<pii, <span class="built_in">vector</pii,></span><pii>, greater<pii>> q;</pii></pii></span><br><span class="line">    <span class="built_in">memset</span>(visited, <span class="number">0</span>, <span class="keyword">sizeof</span>(visited));</span><br><span class="line">    d[source] = <span class="number">0</span>;</span><br><span class="line">    q.push(make_pair(<span class="number">0</span>, source));</span><br><span class="line">    <span class="keyword">while</span> (!q.empty()) {</span><br><span class="line">        pii top = q.top();</span><br><span class="line">        q.pop();</span><br><span class="line">        <span class="keyword">int</span> u = top.second;</span><br><span class="line">        <span class="keyword">if</span> (visited[u]) {</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        }</span><br><span class="line">        visited[u] = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span> (Edge* p = h[u]; p; p = p->next) {</span><br><span class="line">            <span class="keyword">int</span> v = p->v;</span><br><span class="line">            <span class="keyword">if</span> (d[v] > d[u] + <span class="number">1</span>) {</span><br><span class="line">                d[v] = d[u] + <span class="number">1</span>;</span><br><span class="line">                q.push(make_pair(d[v], v));</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d %d %d %d"</span>, &B, &E, &P, &N, &M);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= m; i++) {< span><br><span class="line">        <span class="keyword">int</span> u, v;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &u, &v);</span><br><span class="line">        add_edge(u, v), add_edge(v, u);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">memset</span>(db, <span class="number">0x3f</span>, <span class="keyword">sizeof</span>(db)), <span class="built_in">memset</span>(de, <span class="number">0x3f</span>, <span class="keyword">sizeof</span>(de)), <span class="built_in">memset</span>(dp, <span class="number">0x3f</span>, <span class="keyword">sizeof</span>(dp));</span><br><span class="line">    dj(db, <span class="number">1</span>), dj(de, <span class="number">2</span>), dj(dp, N);</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="keyword">int</span> tmp = db[i] * B + dp[i] * P + de[i] * E;</span><br><span class="line">        ans = min(ans, tmp);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></=></span></=></span></span></pre></td></tr></tbody></table></figure>
<h3 id="3、P2887-USACO07NOV-防晒霜Sunscreen"><a href="#3、P2887-USACO07NOV-防晒霜Sunscreen" class="headerlink" title="3、P2887 [USACO07NOV]防晒霜Sunscreen"></a><a href="https://www.luogu.org/problemnew/show/P2887" target="_blank" rel="noopener">3、P2887 [USACO07NOV]防晒霜Sunscreen</a></h3><p>R:贪心</p>
<figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits stdc++.h></bits></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">2500</span> + <span class="number">10</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 不知道是哪路神仙贴了一个dp的标签，想了半天想不出来，于是用了贪心的方法。</span></span><br><span class="line"><span class="comment"> * 贪心的方法，首先按照线段左端点降序排序,对于防晒霜由大到小贪心。</span></span><br><span class="line"><span class="comment"> * 对于一个区间[min,max]，对于下一个奶牛,必有min(next)<min(cur)< span></min(cur)<></span><br><span class="line"><span class="comment"> * 对于两瓶符合当前奶牛条件的防晒霜x,y,设x>y，对于下界是一定可以满足的，因为对下界降序排列了一次。</span></span><br><span class="line"><span class="comment"> * 所以需要对上界进行检验，共有三种情况</span></span><br><span class="line"><span class="comment"> * 1.x，y都能使用，即x<max(next)< span></max(next)<></span><br><span class="line"><span class="comment"> * 2.x,y都不能使用,即y>max(next)</span></span><br><span class="line"><span class="comment"> * 3.x不能使用,y能使用,即x>max(next),y<max(next)< span></max(next)<></span><br><span class="line"><span class="comment"> * 综上所述,把x给当前奶牛是最好的，如果把y取了，那么后面一个奶牛可能就无法晒太阳了。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Cower</span> {</span></span><br><span class="line">    <span class="keyword">int</span> l, r;</span><br><span class="line">} cowers[maxn];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Protect</span> {</span></span><br><span class="line">    <span class="keyword">int</span> val, num;</span><br><span class="line">} protects[maxn];</span><br><span class="line"><span class="keyword">int</span> N, C;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmp1</span><span class="params">(<span class="keyword">const</span> Cower& a, <span class="keyword">const</span> Cower& b)</span> </span>{ <span class="keyword">return</span> a.l > b.l; }</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmp2</span><span class="params">(<span class="keyword">const</span> Protect& a, <span class="keyword">const</span> Protect& b)</span> </span>{ <span class="keyword">return</span> a.val > b.val; };</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &N, &C);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &cowers[i].l, &cowers[i].r);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= c; i++) {< span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &protects[i].val, &protects[i].num);</span><br><span class="line">    }</span><br><span class="line">    sort(cowers + <span class="number">1</span>, cowers + <span class="number">1</span> + N, cmp1), sort(protects + <span class="number">1</span>, protects + <span class="number">1</span> + C, cmp2);</span><br><span class="line">    <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++) {< span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= c; j++) {< span><br><span class="line">            <span class="keyword">if</span> (protects[j].num > <span class="number">0</span> && protects[j].val >= cowers[i].l && protects[j].val <= cowers[i].r) {< span><br><span class="line">                sum++;</span><br><span class="line">                protects[j].num--;</span><br><span class="line">                <span class="keyword">break</span>;<span class="comment">//WA WA WA WA WA WA WA WA WA WA WA WA WA WA WA WA WA WA WA WA WA WA WA WA WA </span></span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, sum);</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></=></span></=></span></=></span></=></span></=></span></span></span></span></pre></td></tr></tbody></table></figure><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/head.jpg" alt="Oduesp">
            
              <p class="site-author-name" itemprop="name">Oduesp</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">22</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">5</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">43</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://sunyunzeng.github.io/" title="sunyunzeng" target="_blank">sunyunzeng</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://mzzzzzzzp.github.io/" title="mzzzzzzzp" target="_blank">mzzzzzzzp</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Oduesp</span>

  
</div>









        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  










  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'nlj1JLvl3nzo1vU8n7HHrrng-gzGzoHsz',
        appKey: 'MTYTWoVCfpfyUglV6Ccx7953',
        placeholder: '写下你的评论...',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>




  





  

  

  

  
  

  

  

  

</body>
</html>
