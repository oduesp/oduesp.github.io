<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Oduesp</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2019-05-18T08:21:43.128Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>Oduesp</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Konjak Record——2019.05.17</title>
    <link href="http://yoursite.com/2019/05/18/Algorithm0518/"/>
    <id>http://yoursite.com/2019/05/18/Algorithm0518/</id>
    <published>2019-05-18T08:14:59.381Z</published>
    <updated>2019-05-18T08:21:43.128Z</updated>
    
    <content type="html"><![CDATA[<h3 id="P1854-花店橱窗布置"><a href="#P1854-花店橱窗布置" class="headerlink" title="P1854 花店橱窗布置"></a><a href="https://www.luogu.org/problemnew/show/P1854" target="_blank" rel="noopener">P1854 花店橱窗布置</a></h3><p>R:背包问题，动态规划中的路径记录</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * f[i][j]表示前i盆花放在前j个盆的最大值</span></span><br><span class="line"><span class="comment"> * f[i][j] = max(f[i-1][j],f[i-1][j-1]+收益)</span></span><br><span class="line"><span class="comment"> * 初始化f[0][0]=0,这道题的路径记录有点意思</span></span><br><span class="line"><span class="comment"> * 我的空间复杂度是O(N^3)，但是这是一个从无到有的过程</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">100</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> f[maxn][maxn], F, V, A[maxn][maxn];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> {</span></span><br><span class="line">    <span class="keyword">int</span> tail, a[maxn];</span><br><span class="line">} way[maxn][maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">memset</span>(f, ~<span class="number">0x3f</span>, <span class="keyword">sizeof</span>(f));</span><br><span class="line">    <span class="built_in">cin</span> >> F >> V;</span><br><span class="line">    <span class="comment">//第0棵花放到前V个花瓶的收益为0</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i <= V; i++) {</span><br><span class="line">        f[<span class="number">0</span>][i] = <span class="number">0</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= F; i++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= V; j++) {</span><br><span class="line">            <span class="built_in">cin</span> >> A[i][j];</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= F; i++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= V; j++) {</span><br><span class="line">            <span class="keyword">if</span> (f[i][j - <span class="number">1</span>] > f[i - <span class="number">1</span>][j - <span class="number">1</span>] + A[i][j]) {</span><br><span class="line">                f[i][j] = f[i][j - <span class="number">1</span>];</span><br><span class="line">                way[i][j] = way[i][j - <span class="number">1</span>];</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                f[i][j] = f[i - <span class="number">1</span>][j - <span class="number">1</span>] + A[i][j];</span><br><span class="line">                way[i][j] = way[i - <span class="number">1</span>][j - <span class="number">1</span>];</span><br><span class="line">                way[i][j].a[++way[i][j].tail] = j;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span> << f[F][V] << <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= F; i++) {</span><br><span class="line">        <span class="built_in">cout</span> << way[F][V].a[i] << <span class="string">" "</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span> << <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="P2890-USACO07OPEN-便宜的回文Cheapest-Palindrome"><a href="#P2890-USACO07OPEN-便宜的回文Cheapest-Palindrome" class="headerlink" title="P2890 [USACO07OPEN]便宜的回文Cheapest Palindrome"></a><a href="https://www.luogu.org/problemnew/show/P2890" target="_blank" rel="noopener">P2890 [USACO07OPEN]便宜的回文Cheapest Palindrome</a></h3><p>R:回文</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 这道题和P3847，属于回文dp，f[i][j]表示i,j是回文串的最小花费</span></span><br><span class="line"><span class="comment"> * 如果ai==aj,则直接从i+1,j-1转移</span></span><br><span class="line"><span class="comment"> * 如果ai!=aj,则考虑在f[i+1][e]基础上删除e或增加e</span></span><br><span class="line"><span class="comment"> * 或者在[s][e-1]基础上删除s或者增加s</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">2000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">char</span> str[maxn];</span><br><span class="line"><span class="keyword">int</span> cost[<span class="number">27</span>][<span class="number">2</span>], N, M, f[maxn][maxn];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">Min2</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">return</span> a < b ? a : b;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">Min4</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="keyword">int</span> c, <span class="keyword">int</span> d)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">return</span> Min2(a, b) < Min2(c, d) ? Min2(a, b) : Min2(c, d);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &M, &N);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%s"</span>, &str[<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= M; i++) {</span><br><span class="line">        <span class="keyword">char</span> c;</span><br><span class="line">        <span class="built_in">cin</span> >> c;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &cost[c - <span class="string">'a'</span> + <span class="number">1</span>][<span class="number">0</span>], &cost[c - <span class="string">'a'</span> + <span class="number">1</span>][<span class="number">1</span>]);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i <= N; i++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> s = <span class="number">1</span>; s <= N; s++) {</span><br><span class="line">            <span class="keyword">int</span> e = s + i - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (e > N)</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">if</span> (str[s] == str[e]) {</span><br><span class="line">                f[s][e] = f[s + <span class="number">1</span>][e - <span class="number">1</span>];</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                <span class="keyword">int</span> r = str[e] - <span class="string">'a'</span> + <span class="number">1</span>, l = str[s] - <span class="string">'a'</span> + <span class="number">1</span>;</span><br><span class="line">                f[s][e] = Min4(f[s + <span class="number">1</span>][e] + cost[l][<span class="number">1</span>], f[s][e - <span class="number">1</span>] + cost[r][<span class="number">1</span>],</span><br><span class="line">                    f[s + <span class="number">1</span>][e] + cost[l][<span class="number">0</span>], f[s][e - <span class="number">1</span>] + cost[r][<span class="number">0</span>]);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,f[<span class="number">1</span>][N]);</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="P3847-TJOI2007-调整队形"><a href="#P3847-TJOI2007-调整队形" class="headerlink" title="P3847 [TJOI2007]调整队形"></a><a href="https://www.luogu.org/problemnew/show/P3847" target="_blank" rel="noopener">P3847 [TJOI2007]调整队形</a></h3><p>R:回文</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * dp[i][j]表示使得区间[i,j]变为回文串的最小修改次数，注意[i,j]内的元素不一定是j-i+1了，但是对结果不影响</span></span><br><span class="line"><span class="comment"> * 如果ai==aj,则有i+1,j-1转移,如果ai!=aj,则有[i+1,j],[i,j-1],[i-1][j+1]中的最小值加一转移</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">3000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> f[maxn][maxn], a[maxn], N;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &N);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &a[i]);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i <= N; i++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> s = <span class="number">1</span>; s <= N; s++) {</span><br><span class="line">            <span class="keyword">int</span> e = s + i - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (e > N) {</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (a[s] == a[e]) {</span><br><span class="line">                f[s][e] = f[s + <span class="number">1</span>][e - <span class="number">1</span>];</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                f[s][e] = min(f[s + <span class="number">1</span>][e - <span class="number">1</span>], min(f[s][e - <span class="number">1</span>], f[s + <span class="number">1</span>][e])) + <span class="number">1</span>;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, f[<span class="number">1</span>][N]);</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;P1854-花店橱窗布置&quot;&gt;&lt;a href=&quot;#P1854-花店橱窗布置&quot; class=&quot;headerlink&quot; title=&quot;P1854 花店橱窗布置&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://www.luogu.org/problemnew/show/P18
      
    
    </summary>
    
      <category term="Konjak Records" scheme="http://yoursite.com/categories/Konjak-Records/"/>
    
    
      <category term="动态规划" scheme="http://yoursite.com/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
    
      <category term="背包" scheme="http://yoursite.com/tags/%E8%83%8C%E5%8C%85/"/>
    
      <category term="路径记录" scheme="http://yoursite.com/tags/%E8%B7%AF%E5%BE%84%E8%AE%B0%E5%BD%95/"/>
    
      <category term="回文dp" scheme="http://yoursite.com/tags/%E5%9B%9E%E6%96%87dp/"/>
    
  </entry>
  
  <entry>
    <title>Konjak Record——2019.05.17</title>
    <link href="http://yoursite.com/2019/05/17/Algorithm0517/"/>
    <id>http://yoursite.com/2019/05/17/Algorithm0517/</id>
    <published>2019-05-17T04:44:09.505Z</published>
    <updated>2019-05-17T05:50:11.417Z</updated>
    
    <content type="html"><![CDATA[<h2 id="难题"><a href="#难题" class="headerlink" title="难题"></a>难题</h2><h3 id="1、P1868-饥饿的奶牛"><a href="#1、P1868-饥饿的奶牛" class="headerlink" title="1、P1868 饥饿的奶牛"></a><a href="https://www.luogu.org/problemnew/show/P1868" target="_blank" rel="noopener">1、P1868 饥饿的奶牛</a></h3><p>R:如果f[i]从f[j] (j<=i)转移时，如果f[1]->f[i]具有单调性，那么二分查找可以降低复杂度。其次，遇到区间问题时，按某个端点排序可以有利于问题解决。</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">150000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 首先将节点按照右端点排序，f[i]表示前i堆草的最大值，f[i] = max(f[i-1],f[j]+吃这堆草)</span></span><br><span class="line"><span class="comment"> * 排序以及该转移方程可以保证f是不减的,因为即使两个区间a,b的右端点相同，左端点不同，那它们位置上</span></span><br><span class="line"><span class="comment"> * 是连续的，可以通过max这个转移过来。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">int</span> N, f[maxn];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> {</span></span><br><span class="line">    <span class="keyword">int</span> l, r;</span><br><span class="line">} nodes[maxn];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="keyword">inline</span> <span class="title">cmp</span><span class="params">(<span class="keyword">const</span> Node& a, <span class="keyword">const</span> Node& b)</span> </span>{ <span class="keyword">return</span> a.r < b.r; }</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">int</span> l = <span class="number">1</span>, r = x, pos = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (l <= r) {</span><br><span class="line">        <span class="keyword">int</span> mid = (l + r) >> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (nodes[mid].r < nodes[x].l) {</span><br><span class="line">            pos = mid, l = mid + <span class="number">1</span>;</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            r = mid - <span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> pos;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &N);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &nodes[i].l, &nodes[i].r);</span><br><span class="line">    }</span><br><span class="line">    sort(nodes + <span class="number">1</span>, nodes + <span class="number">1</span> + N, cmp);</span><br><span class="line">    f[<span class="number">1</span>] = nodes[<span class="number">1</span>].r - nodes[<span class="number">1</span>].l + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i <= N; i++) {</span><br><span class="line">        f[i] = f[i - <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">int</span> pos = find(i);</span><br><span class="line">        f[i] = max(f[pos] + nodes[i].r - nodes[i].l + <span class="number">1</span>, f[i]);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,f[N]);</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="2、P1986-元旦晚会"><a href="#2、P1986-元旦晚会" class="headerlink" title="2、P1986 元旦晚会"></a><a href="https://www.luogu.org/problemnew/show/P1986" target="_blank" rel="noopener">2、P1986 元旦晚会</a></h3><p>R:贪心，类似P2887，更简单一些</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">30000</span> + <span class="number">10</span>, maxm = <span class="number">5005</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> {</span></span><br><span class="line">    <span class="keyword">int</span> l, r, num;</span><br><span class="line">} nodes[maxm];</span><br><span class="line"><span class="keyword">int</span> N, M, visited[maxn];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(<span class="keyword">const</span> Node& a, <span class="keyword">const</span> Node& b)</span> </span>{ <span class="keyword">return</span> a.r < b.r; }</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &N, &M);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= M; i++) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>, &nodes[i].l, &nodes[i].r, &nodes[i].num);</span><br><span class="line">    }</span><br><span class="line">    sort(nodes + <span class="number">1</span>, nodes + <span class="number">1</span> + M, cmp);</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= M; i++) {</span><br><span class="line">        <span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = nodes[i].r; j >= nodes[i].l; j--) {</span><br><span class="line">            <span class="keyword">if</span> (visited[j]) {</span><br><span class="line">                k++;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span> (k > nodes[i].num) {</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = nodes[i].r; j >= nodes[i].l; j--) {</span><br><span class="line">            <span class="keyword">if</span> (k >= nodes[i].num) {</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (!visited[j]) {</span><br><span class="line">                k++, ans++, visited[j] = <span class="number">1</span>;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="3、P4019-多边形染色"><a href="#3、P4019-多边形染色" class="headerlink" title="3、P4019 多边形染色"></a><a href="https://www.luogu.org/problemnew/show/P4019" target="_blank" rel="noopener">3、P4019 多边形染色</a></h3><p>R:环形dp的方法</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/***</span></span><br><span class="line"><span class="comment"> * 通过这道题，我学习了环状dp的方法：枚举开头，在最后一个判断合法性。</span></span><br><span class="line"><span class="comment"> * dp[i][c] = sum(dp[i-1][k])</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">50000</span> + <span class="number">10</span>, mod = <span class="number">987654321</span>;</span><br><span class="line"><span class="comment">//col表示节点不能涂的颜色</span></span><br><span class="line"><span class="keyword">int</span> N, M, C, dp[maxn][<span class="number">15</span>], uncol[maxn][<span class="number">15</span>], e[maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>, &N, &M, &C);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= M; i++) {</span><br><span class="line">        <span class="keyword">int</span> option, x, y;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>, &option, &x, &y);</span><br><span class="line">        <span class="keyword">if</span> (option == <span class="number">1</span>) {</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= C; j++) {</span><br><span class="line">                <span class="keyword">if</span> (j != y)</span><br><span class="line">                    uncol[x][j] = <span class="number">1</span>;</span><br><span class="line">            }</span><br><span class="line">        } <span class="keyword">else</span> <span class="keyword">if</span> (option == <span class="number">2</span>) {</span><br><span class="line">            uncol[x][y] = <span class="number">1</span>;</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            e[max(x, y)] = min(x, y);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> color = <span class="number">1</span>; color <= C; color++) {</span><br><span class="line">        <span class="keyword">if</span> (uncol[<span class="number">1</span>][color])</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        <span class="built_in">memset</span>(dp, <span class="number">0</span>, <span class="keyword">sizeof</span>(dp));</span><br><span class="line">        dp[<span class="number">1</span>][color] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i < N; i++) {</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= C; j++) {</span><br><span class="line">                <span class="keyword">if</span> (uncol[i][j]) {</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">if</span> (e[i]) {</span><br><span class="line">                    dp[i][j] = dp[i - <span class="number">1</span>][j];</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">1</span>; k <= C; k++) {</span><br><span class="line">                    <span class="keyword">if</span> (k != j) {</span><br><span class="line">                        dp[i][j] = (dp[i][j] + dp[i - <span class="number">1</span>][k]) % mod;</span><br><span class="line">                    }</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= C; i++) {</span><br><span class="line">            <span class="keyword">if</span> (uncol[N][i] || i == color) {</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (e[N]) {</span><br><span class="line">                dp[N][i] = dp[N - <span class="number">1</span>][i];</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">1</span>; k <= C; k++) {</span><br><span class="line">                <span class="keyword">if</span> (k != i) {</span><br><span class="line">                    dp[N][i] = (dp[N][i] + dp[N - <span class="number">1</span>][k]) % mod;</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= C; i++) {</span><br><span class="line">            ans = (ans + dp[N][i]) % mod;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="4、P2365-任务安排"><a href="#4、P2365-任务安排" class="headerlink" title="4、P2365 任务安排"></a><a href="https://www.luogu.org/problemnew/show/P2365" target="_blank" rel="noopener">4、P2365 任务安排</a></h3><p>R:区间dp的升级</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="comment">/***</span></span><br><span class="line"><span class="comment"> * 以下是60分做法，原因是超时三个点，还有WA一个点，超时的原因是复杂度是O(N^3)</span></span><br><span class="line"><span class="comment"> * WA原因是int，但是内存不够开Long long</span></span><br><span class="line"><span class="comment"> * f[i][j]表示前i个任务分成j段的最小值，转移方程就很好像，复杂度是N^3</span></span><br><span class="line"><span class="comment"> * 其实我不用前i个任务分成几段，f[j]->f[i]转移只需要增加一个任务启动时间S即可。</span></span><br><span class="line"><span class="comment"> * 无后效性：动态规划法的最优解通常是由一系列最优决策组成的决策序列，</span></span><br><span class="line"><span class="comment"> * 最优子结构就是这些最优决策序列中的一个子序列，对于每个子序列再做</span></span><br><span class="line"><span class="comment"> * 最优决策会产生新的最优决策（子）序列，如果某个决策只受当前最优决</span></span><br><span class="line"><span class="comment"> * 策子序列的影响，而不受当前决策可能产生的新的最优决策子序列的影响，</span></span><br><span class="line"><span class="comment"> * 则可以理解这个最优决策具有无后效性。</span></span><br><span class="line"><span class="comment"> * f[j]表示前j个任务的最优值，F[i]就可以从当前的最优子序列[0,i-1]中选择转移且不会因为最新</span></span><br><span class="line"><span class="comment"> * 的子序列影响。注意每开一个段新的，就会产生使得后续的时间推迟S,所以加上(系数差)*S,再算上当前段任务完成的代价。</span></span><br><span class="line"><span class="comment"> * 还有斜率优化将复杂度降到O(N)，今天心情不好不学了。</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">5000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> N, S, t[maxn], a[maxn], f[maxn][maxn], sum[maxn], total_a[maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">cin</span> >> N >> S;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="built_in">cin</span> >> t[i] >> a[i];</span><br><span class="line">        sum[i] = sum[i - <span class="number">1</span>] + t[i];</span><br><span class="line">        total_a[i] = total_a[i - <span class="number">1</span>] + a[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">memset</span>(f, <span class="number">0x3f</span>, <span class="keyword">sizeof</span>(f));</span><br><span class="line">    f[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= i; j++) {</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k = i - <span class="number">1</span>; k >= j - <span class="number">1</span>; k--) {</span><br><span class="line">                f[i][j] = min(f[i][j],</span><br><span class="line">                    f[k][j - <span class="number">1</span>] + (S * j + sum[i]) * (total_a[i] - total_a[k]));</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        ans = min(ans, f[N][i]);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ri register int</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">5000</span> + <span class="number">10</span>;</span><br><span class="line">ll as[maxn], ts[maxn], a[maxn], t[maxn], f[maxn], N, S;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">cin</span> >> N >> S;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="built_in">cin</span> >> t[i] >> a[i];</span><br><span class="line">        ts[i] = ts[i - <span class="number">1</span>] + t[i], as[i] = as[i - <span class="number">1</span>] + a[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">memset</span>(f, <span class="number">0x3f</span>, <span class="keyword">sizeof</span>(f));</span><br><span class="line">    f[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (ri i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="keyword">for</span> (ri j = <span class="number">0</span>; j < i; j++) {</span><br><span class="line">            f[i] = min(f[i], f[j] + ts[i] * (as[i] - as[j]) + S * (as[N] - as[j]));</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span> << f[N] << <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="常规题"><a href="#常规题" class="headerlink" title="常规题"></a>常规题</h2><h3 id="5、P2389-电脑班的裁员"><a href="#5、P2389-电脑班的裁员" class="headerlink" title="5、P2389 电脑班的裁员"></a><a href="https://www.luogu.org/problemnew/show/P2389" target="_blank" rel="noopener">5、P2389 电脑班的裁员</a></h3><p>R:平平无奇的区间dp</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">505</span>;</span><br><span class="line"><span class="keyword">int</span> K, score[maxn], dp[maxn][maxn], N, sum[maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">cin</span> >> N >> K;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="built_in">cin</span> >> score[i];</span><br><span class="line">        sum[i] = sum[i - <span class="number">1</span>] + score[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">memset</span>(dp, ~<span class="number">0x3f</span>, <span class="keyword">sizeof</span>(dp));</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i <= N; i++) {</span><br><span class="line">        dp[i][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">1</span>; k <= K; k++) {</span><br><span class="line">            <span class="keyword">if</span> (k > i) {</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            }</span><br><span class="line">            dp[i][k] = dp[i - <span class="number">1</span>][k];</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i - <span class="number">1</span>; j >= <span class="number">0</span>; j--) {</span><br><span class="line">                <span class="keyword">if</span> (j < k - <span class="number">1</span>) {</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                }</span><br><span class="line">                dp[i][k] = max(dp[j][k - <span class="number">1</span>] + sum[i] - sum[j], dp[i][k]);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">-0x3f3f3f3f</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j <= K; j++) {</span><br><span class="line">            ans = max(ans, dp[i][j]);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span> << ans << <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="6、P2340-奶牛会展"><a href="#6、P2340-奶牛会展" class="headerlink" title="6、P2340 奶牛会展"></a><a href="https://www.luogu.org/problemnew/show/P2340" target="_blank" rel="noopener">6、P2340 奶牛会展</a></h3><p>R:带有负值的dp，之前做过，所以算简单题</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> zero = (<span class="number">400</span> * <span class="number">1000</span> + <span class="number">10</span>), maxn = zero << <span class="number">1</span>, up = maxn - <span class="number">1</span>;</span><br><span class="line"><span class="keyword">int</span> dp[maxn], clever[<span class="number">405</span>], love[<span class="number">405</span>], N;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    ios::sync_with_stdio(<span class="number">0</span>), <span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">cin</span> >> N;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="built_in">cin</span> >> clever[i] >> love[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">memset</span>(dp, ~<span class="number">0x3f</span>, <span class="keyword">sizeof</span>(dp));</span><br><span class="line">    dp[zero] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="keyword">if</span> (clever[i] < <span class="number">0</span>) {</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j - clever[i] <= up; j++) {</span><br><span class="line">                dp[j] = max(dp[j - clever[i]] + love[i], dp[j]);</span><br><span class="line">            }</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = up; j >= clever[i]; j--) {</span><br><span class="line">                dp[j] = max(dp[j - clever[i]] + love[i], dp[j]);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">-0x3f3f3f3f</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = zero; i <= up; i++) {</span><br><span class="line">        <span class="keyword">if</span> (dp[i] >= <span class="number">0</span>) {</span><br><span class="line">            ans = max(ans, i - zero + dp[i]);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span> << ans << <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;难题&quot;&gt;&lt;a href=&quot;#难题&quot; class=&quot;headerlink&quot; title=&quot;难题&quot;&gt;&lt;/a&gt;难题&lt;/h2&gt;&lt;h3 id=&quot;1、P1868-饥饿的奶牛&quot;&gt;&lt;a href=&quot;#1、P1868-饥饿的奶牛&quot; class=&quot;headerlink&quot; title=
      
    
    </summary>
    
      <category term="Konjak Records" scheme="http://yoursite.com/categories/Konjak-Records/"/>
    
    
      <category term="动态规划" scheme="http://yoursite.com/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
    
      <category term="贪心" scheme="http://yoursite.com/tags/%E8%B4%AA%E5%BF%83/"/>
    
      <category term="迪杰斯特拉算法" scheme="http://yoursite.com/tags/%E8%BF%AA%E6%9D%B0%E6%96%AF%E7%89%B9%E6%8B%89%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>Java程序提交Spark任务</title>
    <link href="http://yoursite.com/2019/05/16/Java0516/"/>
    <id>http://yoursite.com/2019/05/16/Java0516/</id>
    <published>2019-05-16T08:52:06.035Z</published>
    <updated>2019-05-18T08:14:32.091Z</updated>
    
    <content type="html"><![CDATA[<h2 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h2><h3 id="1、java-cp-jar-xxx"><a href="#1、java-cp-jar-xxx" class="headerlink" title="1、java -cp *.jar xxx"></a>1、java -cp *.jar xxx</h3><p>报错：java.lang.SecurityException: Invalid signature file digest for Manifest main attributes.</p><p>解决方法：打开META-INF目录，将<em>.SF,</em>.DSA,*.RSA文件删除即可。</p><h3 id="Java程序调用Spark-Submit"><a href="#Java程序调用Spark-Submit" class="headerlink" title="Java程序调用Spark Submit"></a>Java程序调用Spark Submit</h3><p>1、首先引入maven依赖,需要注意的是将Spark中的hadoop去掉，然后引入自定义的hadoop版本。这个过程要对jar包进行更改,将maven reposity中的hadoop-common包中的core-default.xml添加以下语句,如果没有这个操作，可能会造成hdfs schema错误。<a href="https://www.cnblogs.com/TTyb/p/7283437.html" target="_blank" rel="noopener">参考链接</a></p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><!--- global properties --></span></span><br><span class="line"><span class="tag"><<span class="name">property</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">name</span>></span>fs.hdfs.impl<span class="tag"></<span class="name">name</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">value</span>></span>org.apache.hadoop.hdfs.DistributedFileSystem<span class="tag"></<span class="name">value</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">description</span>></span>The FileSystem for hdfs: uris.<span class="tag"></<span class="name">description</span>></span></span><br><span class="line"><span class="tag"></<span class="name">property</span>></span></span><br><span class="line"><span class="tag"><<span class="name">property</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">name</span>></span>fs.file.impl<span class="tag"></<span class="name">name</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">value</span>></span>org.apache.hadoop.fs.LocalFileSystem<span class="tag"></<span class="name">value</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">description</span>></span>The FileSystem for hdfs: uris.<span class="tag"></<span class="name">description</span>></span></span><br><span class="line"><span class="tag"></<span class="name">property</span>></span></span><br></pre></td></tr></tbody></table></figure><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"><?xml version="1.0" encoding="UTF-8"?></span></span><br><span class="line"><span class="tag"><<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>></span></span><br><span class="line">    <span class="tag"><<span class="name">modelVersion</span>></span>4.0.0<span class="tag"></<span class="name">modelVersion</span>></span></span><br><span class="line"></span><br><span class="line">    <span class="tag"><<span class="name">groupId</span>></span>org.gzp.team<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">    <span class="tag"><<span class="name">artifactId</span>></span>submit<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">    <span class="tag"><<span class="name">version</span>></span>1.0<span class="tag"></<span class="name">version</span>></span></span><br><span class="line"></span><br><span class="line">    <span class="tag"><<span class="name">properties</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">spark.version</span>></span>2.3.2<span class="tag"></<span class="name">spark.version</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">scala.compat.version</span>></span>2.11<span class="tag"></<span class="name">scala.compat.version</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">org.apache.hadoop.version</span>></span>2.7.7<span class="tag"></<span class="name">org.apache.hadoop.version</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">project.build.sourceEncoding</span>></span>UTF-8<span class="tag"></<span class="name">project.build.sourceEncoding</span>></span></span><br><span class="line">    <span class="tag"></<span class="name">properties</span>></span></span><br><span class="line"></span><br><span class="line">    <span class="tag"><<span class="name">dependencies</span>></span></span><br><span class="line">        <span class="comment"><!-- https://mvnrepository.com/artifact/org.apache.spark/spark-core --></span></span><br><span class="line">        <span class="tag"><<span class="name">dependency</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">groupId</span>></span>org.apache.spark<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">artifactId</span>></span>spark-core_${scala.compat.version}<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">version</span>></span>${spark.version}<span class="tag"></<span class="name">version</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">exclusions</span>></span></span><br><span class="line">                <span class="tag"><<span class="name">exclusion</span>></span></span><br><span class="line">                    <span class="tag"><<span class="name">groupId</span>></span>org.apache.hadoop<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">                    <span class="tag"><<span class="name">artifactId</span>></span>*<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">                <span class="tag"></<span class="name">exclusion</span>></span></span><br><span class="line">            <span class="tag"></<span class="name">exclusions</span>></span></span><br><span class="line">        <span class="tag"></<span class="name">dependency</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">dependency</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">groupId</span>></span>org.apache.hadoop<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">artifactId</span>></span>hadoop-client<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">version</span>></span>${org.apache.hadoop.version}<span class="tag"></<span class="name">version</span>></span></span><br><span class="line">        <span class="tag"></<span class="name">dependency</span>></span></span><br><span class="line"></span><br><span class="line">        <span class="tag"><<span class="name">dependency</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">groupId</span>></span>org.apache.spark<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">artifactId</span>></span>spark-sql_${scala.compat.version}<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">version</span>></span>${spark.version}<span class="tag"></<span class="name">version</span>></span></span><br><span class="line">        <span class="tag"></<span class="name">dependency</span>></span></span><br><span class="line"></span><br><span class="line">    <span class="tag"></<span class="name">dependencies</span>></span></span><br><span class="line">    <span class="comment"><!--超级jar包--></span></span><br><span class="line">    <span class="tag"><<span class="name">build</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">plugins</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">plugin</span>></span></span><br><span class="line">                <span class="tag"><<span class="name">groupId</span>></span>org.apache.maven.plugins<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">                <span class="tag"><<span class="name">artifactId</span>></span>maven-shade-plugin<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">                <span class="tag"><<span class="name">version</span>></span>3.1.0<span class="tag"></<span class="name">version</span>></span></span><br><span class="line">                <span class="tag"><<span class="name">executions</span>></span></span><br><span class="line">                    <span class="tag"><<span class="name">execution</span>></span></span><br><span class="line">                        <span class="tag"><<span class="name">phase</span>></span>package<span class="tag"></<span class="name">phase</span>></span></span><br><span class="line">                        <span class="tag"><<span class="name">goals</span>></span></span><br><span class="line">                            <span class="tag"><<span class="name">goal</span>></span>shade<span class="tag"></<span class="name">goal</span>></span></span><br><span class="line">                        <span class="tag"></<span class="name">goals</span>></span></span><br><span class="line">                    <span class="tag"></<span class="name">execution</span>></span></span><br><span class="line">                <span class="tag"></<span class="name">executions</span>></span></span><br><span class="line"></span><br><span class="line">            <span class="tag"></<span class="name">plugin</span>></span></span><br><span class="line">        <span class="tag"></<span class="name">plugins</span>></span></span><br><span class="line">    <span class="tag"></<span class="name">build</span>></span></span><br><span class="line"></span><br><span class="line"><span class="tag"></<span class="name">project</span>></span></span><br></pre></td></tr></tbody></table></figure><p>2、调用SparkSubmit.main(args)</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.spark.deploy.SparkSubmit;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">KFSubmit</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        SparkSubmit.main(args);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>3、调用java，注意里面有坑，需要提供两个虚拟机参数，否则会提交失败。</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -Xms256m -Xmx1024m -cp submit-1.0.jar KFSubmit --class RipleysKJavaExample  --conf "spark.executor.memory=1g" --conf "spark.driver.memory=1g" --master spark://master:7077 hdfs://master:9000/applications/origin_k.jar spark://master:7077 hdfs://master:9000/points/hubei.csv hdfs://master:9000/polygons/hubei.json true 10000 10000 10 Months 10 10 randomPermutation 1 70 true false false true hdfs://master:9000/ripleysk/try.json</span><br></pre></td></tr></tbody></table></figure><p>4、很重要的一点，二者的spark版本要一致！！！！否者会可能会出现提交但是不工作的问题。</p><p>5、还有一个坑：写文件到hdfs时出现以下错误:java.lang.IllegalArgumentException: Wrong FS://expected: file:///<br>解决方法是:</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Configuration conf = <span class="keyword">new</span> Configuration();</span><br><span class="line"><span class="comment">//使用hadoop的core-site.xml中的fs.defaultFS参数，防止Wrong FS: hdfs:.......file:///  错误异常</span></span><br><span class="line">conf.set(<span class="string">"fs.defaultFS"</span>, <span class="string">"hdfs://192.168.184.99:9000"</span>);</span><br></pre></td></tr></tbody></table></figure><h2 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h2><h3 id="1、引入Maven依赖"><a href="#1、引入Maven依赖" class="headerlink" title="1、引入Maven依赖"></a>1、引入Maven依赖</h3><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag"><<span class="name">dependency</span>></span></span><br><span class="line">  <span class="tag"><<span class="name">groupId</span>></span>com.github.ywilkof<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">  <span class="tag"><<span class="name">artifactId</span>></span>spark-jobs-rest-client<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">  <span class="tag"><<span class="name">version</span>></span>1.3.9<span class="tag"></<span class="name">version</span>></span></span><br><span class="line"><span class="tag"></<span class="name">dependency</span>></span></span><br></pre></td></tr></tbody></table></figure><h3 id="2、向spark的Restful接口提交任务"><a href="#2、向spark的Restful接口提交任务" class="headerlink" title="2、向spark的Restful接口提交任务"></a>2、向spark的Restful接口提交任务</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">submitByRest</span><span class="params">(HttpServletRequest httpServletRequest)</span> </span>{</span><br><span class="line">    <span class="comment">//HttpServletRequest用来读取请求参数</span></span><br><span class="line">    SimpleDateFormat df = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd-HH-mm-ss"</span>);<span class="comment">//设置日期格式</span></span><br><span class="line">    String cur = df.format(<span class="keyword">new</span> Date());</span><br><span class="line">    <span class="comment">//masterHost指定spark://master:7077中的IP</span></span><br><span class="line">    SparkRestClient sparkRestClient = SparkRestClient.builder()</span><br><span class="line">            .masterHost(masterHost)</span><br><span class="line">            .sparkVersion(sparkVersion)</span><br><span class="line">            .build();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> {</span><br><span class="line">        <span class="comment">//程序需要用到的参数</span></span><br><span class="line">        String[] schemas = {</span><br><span class="line">                master,</span><br><span class="line">                <span class="string">"hdfs://192.168.200.149:9000/points/hubei.csv"</span></span><br><span class="line">                , <span class="string">"hdfs://192.168.200.149:9000/polygons/hubei.json"</span>,</span><br><span class="line">                <span class="string">"true"</span>, <span class="string">"5000"</span>, <span class="string">"100"</span>, <span class="string">"10"</span>, <span class="string">"Months"</span>, <span class="string">"10"</span>, <span class="string">"10"</span>,</span><br><span class="line">                <span class="string">"randomPermutation"</span>, <span class="string">"1"</span>, <span class="string">"70"</span>, <span class="string">"true"</span>, <span class="string">"false"</span>,</span><br><span class="line">                <span class="string">"false"</span>, <span class="string">"true"</span>, defaultDFS,</span><br><span class="line">                resultDir + cur + <span class="string">".json"</span>};</span><br><span class="line">        List<String> arg = Arrays.asList(schemas);</span><br><span class="line">        <span class="keyword">final</span> String submissionId = sparkRestClient.prepareJobSubmit()</span><br><span class="line">                .appName(appName)</span><br><span class="line">                .appResource(appResource)</span><br><span class="line">                .mainClass(mainClass)</span><br><span class="line">                .appArgs(arg)</span><br><span class="line">                .withProperties()</span><br><span class="line">                .submit();</span><br><span class="line">                <span class="comment">//put方法将内存等信息上传</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        .put("spark.executor.memory", "1g")</span></span><br><span class="line"><span class="comment">                .put("spark.executor.cores", "8")</span></span><br><span class="line"><span class="comment">                .put("spark.executor.nums", "50")</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        System.out.println(submissionId);</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) {</span><br><span class="line">            <span class="comment">//查询状态</span></span><br><span class="line">            <span class="keyword">final</span> DriverState driverState = sparkRestClient</span><br><span class="line">                    .checkJobStatus()</span><br><span class="line">                    .withSubmissionId(submissionId);</span><br><span class="line">            System.out.println(driverState);</span><br><span class="line">            <span class="keyword">if</span> (driverState.name().equals(DriverState.RUNNING.name())) {</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            }<span class="keyword">else</span>{</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        Thread.sleep(<span class="number">30000</span>);</span><br><span class="line">        <span class="keyword">return</span> getResult(resultDir + cur + <span class="string">".json"</span>);</span><br><span class="line">    } <span class="keyword">catch</span> (FailedSparkRequestException e) {</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"error"</span>;</span><br><span class="line">    } <span class="keyword">catch</span> (InterruptedException e) {</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"error"</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;方法一&quot;&gt;&lt;a href=&quot;#方法一&quot; class=&quot;headerlink&quot; title=&quot;方法一&quot;&gt;&lt;/a&gt;方法一&lt;/h2&gt;&lt;h3 id=&quot;1、java-cp-jar-xxx&quot;&gt;&lt;a href=&quot;#1、java-cp-jar-xxx&quot; class=&quot;header
      
    
    </summary>
    
      <category term="Java" scheme="http://yoursite.com/categories/Java/"/>
    
      <category term="Spark" scheme="http://yoursite.com/categories/Java/Spark/"/>
    
    
  </entry>
  
  <entry>
    <title>Konjak Record——2019.05.15</title>
    <link href="http://yoursite.com/2019/05/15/Algorithm0515/"/>
    <id>http://yoursite.com/2019/05/15/Algorithm0515/</id>
    <published>2019-05-15T08:07:31.550Z</published>
    <updated>2019-05-15T08:14:13.362Z</updated>
    
    <content type="html"><![CDATA[<h2 id="难题"><a href="#难题" class="headerlink" title="难题"></a>难题</h2><h3 id="1、P3004-USACO10DEC-宝箱Treasure-Chest"><a href="#1、P3004-USACO10DEC-宝箱Treasure-Chest" class="headerlink" title="1、P3004 [USACO10DEC]宝箱Treasure Chest"></a><a href="https://www.luogu.org/problemnew/show/P3004" target="_blank" rel="noopener">1、P3004 [USACO10DEC]宝箱Treasure Chest</a></h3><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * f[i][j]表示区间[i,j]内先手所取的最大值</span></span><br><span class="line"><span class="comment"> * f[i][j] = sum[i,j] - min(f[i+1][j],f[i][j-1])</span></span><br><span class="line"><span class="comment"> * 内存限制64MB搞我用动态内存,压维我不太会</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">5000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> v[maxn], N, sum[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">cin</span> >> N;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="built_in">cin</span> >> v[i];</span><br><span class="line">        sum[i] = sum[i - <span class="number">1</span>] + v[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span>** f = <span class="keyword">new</span> <span class="keyword">int</span>*[maxn];</span><br><span class="line">    <span class="keyword">int</span> maxlen = N + <span class="number">10</span>;</span><br><span class="line">    <span class="comment">//f[1][0]表示f[1][1],f[2][0]表示f[2][2]</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        f[i] = <span class="keyword">new</span> <span class="keyword">int</span>[maxlen];</span><br><span class="line">        maxlen--;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        f[i][<span class="number">0</span>] = v[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> len = <span class="number">1</span>; len <= N; len++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> s = <span class="number">1</span>; s <= N; s++) {</span><br><span class="line">            <span class="keyword">int</span> e = s + len;</span><br><span class="line">            <span class="keyword">if</span> (e > N) {</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            }</span><br><span class="line">            f[s][len] = sum[e] - sum[s - <span class="number">1</span>] - min(f[s + <span class="number">1</span>][len - <span class="number">1</span>], f[s][len - <span class="number">1</span>]);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span> << f[<span class="number">1</span>][N - <span class="number">1</span>] << <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="keyword">delete</span>[] f[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">delete</span>[] f;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="2、P3110-USACO14DEC-驮运Piggy-Back"><a href="#2、P3110-USACO14DEC-驮运Piggy-Back" class="headerlink" title="2、P3110 [USACO14DEC]驮运Piggy Back"></a><a href="https://www.luogu.org/problemnew/show/P3110" target="_blank" rel="noopener">2、P3110 [USACO14DEC]驮运Piggy Back</a></h3><p>R:堆优化的迪杰斯特拉算法+动态规划。</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 如果B+E>P，那么就不要相遇了，各走各的最短路径到达终点。</span></span><br><span class="line"><span class="comment"> * 如果B+E<P，那么可以枚举相遇点，计算B、E到相遇点的最短路径，最后求和。</span></span><br><span class="line"><span class="comment"> * 即使B+E<P，能保证相遇一定会比不相遇好吗？那就再和不相遇的比一下。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pii pair<span class="meta-string"><int, int></span></span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">40000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> {</span></span><br><span class="line">    <span class="keyword">int</span> v;</span><br><span class="line">    Edge* next;</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line">Edge *h[maxn], pool[maxn << <span class="number">1</span>];</span><br><span class="line"><span class="keyword">int</span> tot, B, E, P, N, M, db[maxn], de[maxn], dp[maxn], visited[maxn];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add_edge</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    Edge* p = &pool[tot++];</span><br><span class="line">    p->v = v, p->next = h[u], h[u] = p;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dj</span><span class="params">(<span class="keyword">int</span>* d, <span class="keyword">int</span> source)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="comment">//注意这里的优先队列使用方法</span></span><br><span class="line">    priority_queue<pii, <span class="built_in">vector</span><pii>, greater<pii>> q;</span><br><span class="line">    <span class="built_in">memset</span>(visited, <span class="number">0</span>, <span class="keyword">sizeof</span>(visited));</span><br><span class="line">    d[source] = <span class="number">0</span>;</span><br><span class="line">    q.push(make_pair(<span class="number">0</span>, source));</span><br><span class="line">    <span class="keyword">while</span> (!q.empty()) {</span><br><span class="line">        pii top = q.top();</span><br><span class="line">        q.pop();</span><br><span class="line">        <span class="keyword">int</span> u = top.second;</span><br><span class="line">        <span class="keyword">if</span> (visited[u]) {</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        }</span><br><span class="line">        visited[u] = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span> (Edge* p = h[u]; p; p = p->next) {</span><br><span class="line">            <span class="keyword">int</span> v = p->v;</span><br><span class="line">            <span class="keyword">if</span> (d[v] > d[u] + <span class="number">1</span>) {</span><br><span class="line">                d[v] = d[u] + <span class="number">1</span>;</span><br><span class="line">                q.push(make_pair(d[v], v));</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d %d %d %d"</span>, &B, &E, &P, &N, &M);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= M; i++) {</span><br><span class="line">        <span class="keyword">int</span> u, v;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &u, &v);</span><br><span class="line">        add_edge(u, v), add_edge(v, u);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">memset</span>(db, <span class="number">0x3f</span>, <span class="keyword">sizeof</span>(db)), <span class="built_in">memset</span>(de, <span class="number">0x3f</span>, <span class="keyword">sizeof</span>(de)), <span class="built_in">memset</span>(dp, <span class="number">0x3f</span>, <span class="keyword">sizeof</span>(dp));</span><br><span class="line">    dj(db, <span class="number">1</span>), dj(de, <span class="number">2</span>), dj(dp, N);</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="keyword">int</span> tmp = db[i] * B + dp[i] * P + de[i] * E;</span><br><span class="line">        ans = min(ans, tmp);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="3、P2887-USACO07NOV-防晒霜Sunscreen"><a href="#3、P2887-USACO07NOV-防晒霜Sunscreen" class="headerlink" title="3、P2887 [USACO07NOV]防晒霜Sunscreen"></a><a href="https://www.luogu.org/problemnew/show/P2887" target="_blank" rel="noopener">3、P2887 [USACO07NOV]防晒霜Sunscreen</a></h3><p>R:贪心</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">2500</span> + <span class="number">10</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 不知道是哪路神仙贴了一个dp的标签，想了半天想不出来，于是用了贪心的方法。</span></span><br><span class="line"><span class="comment"> * 贪心的方法，首先按照线段左端点降序排序,对于防晒霜由大到小贪心。</span></span><br><span class="line"><span class="comment"> * 对于一个区间[min,max]，对于下一个奶牛,必有min(next)<min(cur)</span></span><br><span class="line"><span class="comment"> * 对于两瓶符合当前奶牛条件的防晒霜x,y,设x>y，对于下界是一定可以满足的，因为对下界降序排列了一次。</span></span><br><span class="line"><span class="comment"> * 所以需要对上界进行检验，共有三种情况</span></span><br><span class="line"><span class="comment"> * 1.x，y都能使用，即x<max(next)</span></span><br><span class="line"><span class="comment"> * 2.x,y都不能使用,即y>max(next)</span></span><br><span class="line"><span class="comment"> * 3.x不能使用,y能使用,即x>max(next),y<max(next)</span></span><br><span class="line"><span class="comment"> * 综上所述,把x给当前奶牛是最好的，如果把y取了，那么后面一个奶牛可能就无法晒太阳了。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Cower</span> {</span></span><br><span class="line">    <span class="keyword">int</span> l, r;</span><br><span class="line">} cowers[maxn];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Protect</span> {</span></span><br><span class="line">    <span class="keyword">int</span> val, num;</span><br><span class="line">} protects[maxn];</span><br><span class="line"><span class="keyword">int</span> N, C;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmp1</span><span class="params">(<span class="keyword">const</span> Cower& a, <span class="keyword">const</span> Cower& b)</span> </span>{ <span class="keyword">return</span> a.l > b.l; }</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmp2</span><span class="params">(<span class="keyword">const</span> Protect& a, <span class="keyword">const</span> Protect& b)</span> </span>{ <span class="keyword">return</span> a.val > b.val; };</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &N, &C);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &cowers[i].l, &cowers[i].r);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= C; i++) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &protects[i].val, &protects[i].num);</span><br><span class="line">    }</span><br><span class="line">    sort(cowers + <span class="number">1</span>, cowers + <span class="number">1</span> + N, cmp1), sort(protects + <span class="number">1</span>, protects + <span class="number">1</span> + C, cmp2);</span><br><span class="line">    <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= C; j++) {</span><br><span class="line">            <span class="keyword">if</span> (protects[j].num > <span class="number">0</span> && protects[j].val >= cowers[i].l && protects[j].val <= cowers[i].r) {</span><br><span class="line">                sum++;</span><br><span class="line">                protects[j].num--;</span><br><span class="line">                <span class="keyword">break</span>;<span class="comment">//WA WA WA WA WA WA WA WA WA WA WA WA WA WA WA WA WA WA WA WA WA WA WA WA WA </span></span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, sum);</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;难题&quot;&gt;&lt;a href=&quot;#难题&quot; class=&quot;headerlink&quot; title=&quot;难题&quot;&gt;&lt;/a&gt;难题&lt;/h2&gt;&lt;h3 id=&quot;1、P3004-USACO10DEC-宝箱Treasure-Chest&quot;&gt;&lt;a href=&quot;#1、P3004-USACO10DEC
      
    
    </summary>
    
      <category term="Konjak Records" scheme="http://yoursite.com/categories/Konjak-Records/"/>
    
    
      <category term="动态规划" scheme="http://yoursite.com/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
    
      <category term="贪心" scheme="http://yoursite.com/tags/%E8%B4%AA%E5%BF%83/"/>
    
      <category term="迪杰斯特拉算法" scheme="http://yoursite.com/tags/%E8%BF%AA%E6%9D%B0%E6%96%AF%E7%89%B9%E6%8B%89%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>Konjak Record——2019.05.14</title>
    <link href="http://yoursite.com/2019/05/14/Algorithm0514/"/>
    <id>http://yoursite.com/2019/05/14/Algorithm0514/</id>
    <published>2019-05-14T06:22:19.341Z</published>
    <updated>2019-05-15T08:08:17.116Z</updated>
    
    <content type="html"><![CDATA[<h2 id="难题"><a href="#难题" class="headerlink" title="难题"></a>难题</h2><h3 id="1、P4060-Code-1-可做题"><a href="#1、P4060-Code-1-可做题" class="headerlink" title="1、P4060 [Code+#1]可做题"></a><a href="https://www.luogu.org/problemnew/show/P4060" target="_blank" rel="noopener">1、P4060 [Code+#1]可做题</a></h3><p>R:拆位dp、位运算、路径压缩</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">/*n<=1e9,m<=1e5</span></span><br><span class="line"><span class="comment">* 1、首先需要想到的是每位的位运算是独立的，所以拆位后位运算dp，这样算法复杂度是O(N)</span></span><br><span class="line"><span class="comment">* 2、N的范围太大，肯定超时，因此必须想方法进行路径压缩(例如青蛙过河那道题)。</span></span><br><span class="line"><span class="comment">* 3、f[i][0]表示前i个数进行异或，最后结果为0的最小和，f[i][1]同理。</span></span><br><span class="line"><span class="comment">* 4、假如[s,e]为未定义,则f[i][0] = min(f[i-1][0],f[i-1][1]),f[1][1]=min(f[i-1][0],f[i-1][1])+1<<p</span></span><br><span class="line"><span class="comment">所以如果有两个以上的未定义区，则只有最后一个会对下一个产生影响。</span></span><br><span class="line"><span class="comment">* 5、因为N的范围太大，所以需要注意离散化。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">3</span> * <span class="number">1e5</span>;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> {</span></span><br><span class="line">    <span class="keyword">int</span> id, val;</span><br><span class="line">};</span><br><span class="line">Node nodes[maxn];</span><br><span class="line"><span class="keyword">int</span> scatter[maxn], N, M;</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> f[maxn][<span class="number">2</span>], ans;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">1</span>, r = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> c = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(c)) {</span><br><span class="line">        <span class="keyword">if</span> (c == <span class="string">'-'</span>)</span><br><span class="line">            f = <span class="number">-1</span>;</span><br><span class="line">        c = getchar();</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(c)) {</span><br><span class="line">        r = <span class="number">10</span> * r + c - <span class="string">'0'</span>, c = getchar();</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> f * r;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(<span class="keyword">const</span> Node& a, <span class="keyword">const</span> Node& b)</span> </span>{ <span class="keyword">return</span> a.id < b.id; }</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    N = read(), M = read();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= M; i++)</span><br><span class="line">        nodes[i].id = read(), nodes[i].val = read();</span><br><span class="line">    sort(nodes + <span class="number">1</span>, nodes + <span class="number">1</span> + M, cmp);</span><br><span class="line">    N = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= M; i++) {</span><br><span class="line">        <span class="keyword">if</span> (nodes[i].id - nodes[i - <span class="number">1</span>].id >= <span class="number">2</span>) {</span><br><span class="line">            scatter[++N] = <span class="number">-1</span>;</span><br><span class="line">        }</span><br><span class="line">        scatter[++N] = nodes[i].val;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> p = <span class="number">0</span>; p <= <span class="number">30</span>; p++) {</span><br><span class="line">        f[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>, f[<span class="number">0</span>][<span class="number">1</span>] = <span class="number">1e15</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= N; j++) {</span><br><span class="line">            <span class="keyword">if</span> (scatter[j] == <span class="number">-1</span>) {</span><br><span class="line">                f[j][<span class="number">0</span>] = min(f[j - <span class="number">1</span>][<span class="number">1</span>], f[j - <span class="number">1</span>][<span class="number">0</span>]);</span><br><span class="line">                f[j][<span class="number">1</span>] = min(f[j - <span class="number">1</span>][<span class="number">0</span>] + (<span class="number">1</span> << p), f[j - <span class="number">1</span>][<span class="number">1</span>] + (<span class="number">1</span> << p));</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                <span class="keyword">if</span> (scatter[j] & (<span class="number">1</span> << p)) {</span><br><span class="line">                    f[j][<span class="number">1</span>] = f[j - <span class="number">1</span>][<span class="number">0</span>] + (<span class="number">1</span> << p);</span><br><span class="line">                    f[j][<span class="number">0</span>] = f[j - <span class="number">1</span>][<span class="number">1</span>];</span><br><span class="line">                } <span class="keyword">else</span> {</span><br><span class="line">                    f[j][<span class="number">1</span>] = f[j - <span class="number">1</span>][<span class="number">1</span>] + (<span class="number">1</span> << p);</span><br><span class="line">                    f[j][<span class="number">0</span>] = f[j - <span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        ans += min(f[N][<span class="number">0</span>], f[N][<span class="number">1</span>]);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span> << ans << <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="2、P2079-烛光晚餐"><a href="#2、P2079-烛光晚餐" class="headerlink" title="2、P2079 烛光晚餐"></a><a href="https://www.luogu.org/problemnew/show/P2079" target="_blank" rel="noopener">2、P2079 烛光晚餐</a></h3><p>R:含有负值的多维背包,平移坐标轴。</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 出现负值的多维背包问题，坐标轴平移有点意思。 </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">100</span> + <span class="number">10</span>, maxv = <span class="number">500</span> + <span class="number">10</span>, maxf = <span class="number">500</span> + <span class="number">10</span>, up = (maxf << <span class="number">1</span>), down = maxf;</span><br><span class="line"><span class="keyword">int</span> ming[maxn], cost[maxn], red[maxn], N, V;</span><br><span class="line"><span class="keyword">int</span> dp[maxv][up + <span class="number">1</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">memset</span>(dp, ~<span class="number">0x3f</span>, <span class="keyword">sizeof</span>(dp));</span><br><span class="line">    <span class="built_in">cin</span> >> N >> V;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="built_in">cin</span> >> cost[i] >> ming[i] >> red[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">//坐标轴平移,由数据范围知：小明的总喜欢度在-500-500之间，所以坐标轴移500</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i <= V; i++) {</span><br><span class="line">        dp[i][down] = <span class="number">0</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = V; j >= cost[i]; j--) {</span><br><span class="line">            <span class="keyword">if</span> (ming[i] > <span class="number">0</span>) {</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> k = up; k >= ming[i]; k--) {</span><br><span class="line">                    dp[j][k] = max(dp[j][k], dp[j - cost[i]][k - ming[i]] + red[i]);</span><br><span class="line">                }</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k - ming[i] <= up; k++) {</span><br><span class="line">                    dp[j][k] = max(dp[j][k], dp[j - cost[i]][k - ming[i]] + red[i]);</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = up; i >= down; i--) {</span><br><span class="line">        ans = max(ans, dp[V][i]);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span> << ans << <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="3、P2732-商店购物-Shopping-Offers"><a href="#3、P2732-商店购物-Shopping-Offers" class="headerlink" title="3、P2732 商店购物 Shopping Offers"></a><a href="https://www.luogu.org/problemnew/show/P2732" target="_blank" rel="noopener">3、P2732 商店购物 Shopping Offers</a></h3><p>R:完全背包，方案可重用。</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 完全背包,dp[i][j][k][l][m]表示购买I,j,k...各第一第二类物品的最小代价，注意方案可以重复使用。</span></span><br><span class="line"><span class="comment"> *  */</span></span><br><span class="line"><span class="keyword">int</span> S, N, dp[<span class="number">6</span>][<span class="number">6</span>][<span class="number">6</span>][<span class="number">6</span>][<span class="number">6</span>];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> {</span></span><br><span class="line">    <span class="keyword">int</span> len, c[<span class="number">5</span>], k[<span class="number">5</span>], price;</span><br><span class="line">} nodes[<span class="number">105</span>];</span><br><span class="line"><span class="keyword">int</span> origin[<span class="number">1005</span>], num[<span class="number">1005</span>], kind[<span class="number">6</span>], tmp[<span class="number">1005</span>];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> method)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> o = <span class="number">0</span>; o < nodes[method].len; o++) {</span><br><span class="line">        <span class="keyword">int</span> k = nodes[method].c[o];</span><br><span class="line">        <span class="keyword">if</span> (tmp[k] < nodes[method].k[o]) {</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        }</span><br><span class="line">        tmp[k] -= nodes[method].k[o];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">cin</span> >> S;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= S; i++) {</span><br><span class="line">        <span class="built_in">cin</span> >> nodes[i].len;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j < nodes[i].len; j++) {</span><br><span class="line">            <span class="built_in">cin</span> >> nodes[i].c[j] >> nodes[i].k[j];</span><br><span class="line">        }</span><br><span class="line">        <span class="built_in">cin</span> >> nodes[i].price;</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cin</span> >> N;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="keyword">int</span> c, k, p;</span><br><span class="line">        <span class="built_in">cin</span> >> c >> k >> p;</span><br><span class="line">        origin[c] = p, num[c] = k, kind[i] = c;</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">memset</span>(dp, <span class="number">0x3f</span>, <span class="keyword">sizeof</span>(dp)), dp[<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i <= num[kind[<span class="number">1</span>]]; i++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j <= num[kind[<span class="number">2</span>]]; j++) {</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k <= num[kind[<span class="number">3</span>]]; k++) {</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> m = <span class="number">0</span>; m <= num[kind[<span class="number">4</span>]]; m++) {</span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">int</span> n = <span class="number">0</span>; n <= num[kind[<span class="number">5</span>]]; n++) {</span><br><span class="line">                        dp[i][j][k][m][n] = min(i * origin[kind[<span class="number">1</span>]] + j * origin[kind[<span class="number">2</span>]] + k * origin[kind[<span class="number">3</span>]] + m * origin[kind[<span class="number">4</span>]] + n * origin[kind[<span class="number">5</span>]], dp[i][j][k][m][n]);</span><br><span class="line">                        <span class="keyword">for</span> (<span class="keyword">int</span> o = <span class="number">1</span>; o <= S; o++) {</span><br><span class="line">                            tmp[kind[<span class="number">1</span>]] = i, tmp[kind[<span class="number">2</span>]] = j, tmp[kind[<span class="number">3</span>]] = k, tmp[kind[<span class="number">4</span>]] = m, tmp[kind[<span class="number">5</span>]] = n;</span><br><span class="line">                            <span class="keyword">if</span> (check(o)) {</span><br><span class="line">                                dp[i][j][k][m][n] = min(dp[i][j][k][m][n], dp[tmp[kind[<span class="number">1</span>]]][tmp[kind[<span class="number">2</span>]]][tmp[kind[<span class="number">3</span>]]][tmp[kind[<span class="number">4</span>]]][tmp[kind[<span class="number">5</span>]]] + nodes[o].price);</span><br><span class="line">                            }</span><br><span class="line">                        }</span><br><span class="line">                    }</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span> << dp[num[kind[<span class="number">1</span>]]][num[kind[<span class="number">2</span>]]][num[kind[<span class="number">3</span>]]][num[kind[<span class="number">4</span>]]][num[kind[<span class="number">5</span>]]] << <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="4、P2295-MICE"><a href="#4、P2295-MICE" class="headerlink" title="4、P2295 MICE"></a><a href="https://www.luogu.org/problemnew/show/P2295" target="_blank" rel="noopener">4、P2295 MICE</a></h3><p>R:和常规的网格dp不同，与前前个状态位置有关。</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 注意常规的地图dp都是dp[i][j] = dp[i-1][j],dp[i][j-1],但是这里还和前前个位置有关，所以要加一维表示从</span></span><br><span class="line"><span class="comment"> * 左还是上转移。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> chess[maxn][maxn], dp[maxn][maxn][<span class="number">2</span>], N, M;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &N, &M);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= M; j++) {</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &chess[i][j]);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">memset</span>(dp, <span class="number">0x3f</span>, <span class="keyword">sizeof</span>(dp));</span><br><span class="line">    dp[<span class="number">1</span>][<span class="number">1</span>][<span class="number">0</span>] = chess[<span class="number">1</span>][<span class="number">1</span>] + chess[<span class="number">2</span>][<span class="number">1</span>] + chess[<span class="number">1</span>][<span class="number">2</span>];</span><br><span class="line">    dp[<span class="number">1</span>][<span class="number">1</span>][<span class="number">1</span>] = dp[<span class="number">1</span>][<span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= M; j++) {</span><br><span class="line">            <span class="keyword">if</span> (i * j == <span class="number">1</span>) {</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            }</span><br><span class="line">            dp[i][j][<span class="number">0</span>] = min(dp[i][j - <span class="number">1</span>][<span class="number">0</span>] + chess[i - <span class="number">1</span>][j], dp[i][j - <span class="number">1</span>][<span class="number">1</span>]) + chess[i + <span class="number">1</span>][j] + chess[i][j + <span class="number">1</span>];</span><br><span class="line">            dp[i][j][<span class="number">1</span>] = min(dp[i - <span class="number">1</span>][j][<span class="number">1</span>] + chess[i][j - <span class="number">1</span>], dp[i - <span class="number">1</span>][j][<span class="number">0</span>]) + chess[i + <span class="number">1</span>][j] + chess[i][j + <span class="number">1</span>];</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, min(dp[N][M][<span class="number">0</span>], dp[N][M][<span class="number">1</span>]));</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="5、P4925-1007-Scarlet的字符串不可能这么可爱"><a href="#5、P4925-1007-Scarlet的字符串不可能这么可爱" class="headerlink" title="5、P4925 [1007]Scarlet的字符串不可能这么可爱"></a><a href="https://www.luogu.org/problemnew/show/P4925" target="_blank" rel="noopener">5、P4925 [1007]Scarlet的字符串不可能这么可爱</a></h3><p>R:快速幂，推公式</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 推公式，快速幂</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> k, l, p, s, w, ans = <span class="number">1</span>;</span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="keyword">long</span> <span class="title">quick_pow</span><span class="params">(<span class="keyword">long</span> a, <span class="keyword">long</span> b)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    a %= p;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> res = <span class="number">1</span>, k = a;</span><br><span class="line">    <span class="keyword">while</span> (b) {</span><br><span class="line">        <span class="keyword">if</span> (b & <span class="number">1</span>) {</span><br><span class="line">            res = (k * res) % p;</span><br><span class="line">        }</span><br><span class="line">        k = (k * k) % p;</span><br><span class="line">        b >>= <span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">cin</span> >> k >> l >> p >> s >> w;</span><br><span class="line">    <span class="keyword">if</span> (l == <span class="number">1</span>) {</span><br><span class="line">        <span class="keyword">if</span> (s) {</span><br><span class="line">            <span class="built_in">cout</span> << <span class="number">1</span> << <span class="built_in">endl</span>;</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            <span class="built_in">cout</span> << k << <span class="built_in">endl</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (s == <span class="number">0</span>) {</span><br><span class="line">        ans = ((k % p) * ((k - <span class="number">1</span>) % p)) % p;</span><br><span class="line">        ans = (ans * quick_pow(k - <span class="number">2</span>, l - <span class="number">2</span>)) % p;</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        ans = (k - <span class="number">1</span>) % p;</span><br><span class="line">        ans = (ans * quick_pow(k - <span class="number">2</span>, l - <span class="number">2</span>)) % p;</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span> << ans << <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="6、P3408-恋爱"><a href="#6、P3408-恋爱" class="headerlink" title="6、P3408 恋爱"></a><a href="https://www.luogu.org/problemnew/show/P3408" target="_blank" rel="noopener">6、P3408 恋爱</a></h3><p>R:树上贪心，简单题(要是lian ai有这么简单就好了)</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *树上贪心，不算难题，和dp无关</span></span><br><span class="line"><span class="comment"> *  </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">500000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> {</span></span><br><span class="line">    <span class="keyword">int</span> v;</span><br><span class="line">    Node* next;</span><br><span class="line">};</span><br><span class="line">Node *h[maxn], pool[maxn];</span><br><span class="line"><span class="keyword">int</span> tot, N;</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> A[maxn];</span><br><span class="line"><span class="keyword">double</span> T, C;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add_edge</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    Node* p = &pool[tot++];</span><br><span class="line">    p->v = v, p->next = h[u], h[u] = p;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="keyword">long</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">if</span> (h[u] == <span class="literal">NULL</span>) {</span><br><span class="line">        <span class="keyword">return</span> A[u];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">    priority_queue<<span class="keyword">long</span> <span class="keyword">long</span>, <span class="built_in">vector</span><<span class="keyword">long</span> <span class="keyword">long</span>>, greater<<span class="keyword">long</span> <span class="keyword">long</span>>> q;</span><br><span class="line">    <span class="keyword">for</span> (Node* p = h[u]; p; p = p->next) {</span><br><span class="line">        sum += <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">long</span> v = dfs(p->v);</span><br><span class="line">        q.push(v);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">double</span> standard = A[u] * <span class="number">1.0</span> / T;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> cost = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= sum; i++) {</span><br><span class="line">        cost += q.top();</span><br><span class="line">        q.pop();</span><br><span class="line">        <span class="keyword">if</span> (i * <span class="number">1.0</span> / sum >= standard) {</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> cost;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %lf %lf"</span>, &N, &T, &C);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="keyword">int</span> father;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %lld"</span>, &father, &A[i]);</span><br><span class="line">        add_edge(father, i);</span><br><span class="line">    }</span><br><span class="line">    A[<span class="number">0</span>] = C;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, dfs(<span class="number">0</span>));</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;难题&quot;&gt;&lt;a href=&quot;#难题&quot; class=&quot;headerlink&quot; title=&quot;难题&quot;&gt;&lt;/a&gt;难题&lt;/h2&gt;&lt;h3 id=&quot;1、P4060-Code-1-可做题&quot;&gt;&lt;a href=&quot;#1、P4060-Code-1-可做题&quot; class=&quot;headerli
      
    
    </summary>
    
      <category term="Konjak Records" scheme="http://yoursite.com/categories/Konjak-Records/"/>
    
    
      <category term="动态规划" scheme="http://yoursite.com/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
    
      <category term="拆位dp" scheme="http://yoursite.com/tags/%E6%8B%86%E4%BD%8Ddp/"/>
    
      <category term="位运算" scheme="http://yoursite.com/tags/%E4%BD%8D%E8%BF%90%E7%AE%97/"/>
    
      <category term="路径压缩" scheme="http://yoursite.com/tags/%E8%B7%AF%E5%BE%84%E5%8E%8B%E7%BC%A9/"/>
    
      <category term="负值背包" scheme="http://yoursite.com/tags/%E8%B4%9F%E5%80%BC%E8%83%8C%E5%8C%85/"/>
    
      <category term="多维完全背包" scheme="http://yoursite.com/tags/%E5%A4%9A%E7%BB%B4%E5%AE%8C%E5%85%A8%E8%83%8C%E5%8C%85/"/>
    
      <category term="网格dp" scheme="http://yoursite.com/tags/%E7%BD%91%E6%A0%BCdp/"/>
    
      <category term="快速幂" scheme="http://yoursite.com/tags/%E5%BF%AB%E9%80%9F%E5%B9%82/"/>
    
  </entry>
  
  <entry>
    <title>svn服务器搭建记录</title>
    <link href="http://yoursite.com/2019/05/12/svn/"/>
    <id>http://yoursite.com/2019/05/12/svn/</id>
    <published>2019-05-12T03:30:25.144Z</published>
    <updated>2019-05-12T03:48:26.517Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1、安装svn"><a href="#1、安装svn" class="headerlink" title="1、安装svn"></a>1、安装svn</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install subversion</span><br></pre></td></tr></tbody></table></figure><h3 id="2、创建目录"><a href="#2、创建目录" class="headerlink" title="2、创建目录"></a>2、创建目录</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 以下代码表示创建一个名为svn的根目录，GeoCommerce为具体项目名称。</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> /home/hjw/modules/</span><br><span class="line">mkdir svn</span><br><span class="line"><span class="built_in">cd</span> svn</span><br><span class="line">mkdir GeoCommerce</span><br><span class="line">chmod -R 777 /home/hjw/modules/svn/</span><br></pre></td></tr></tbody></table></figure><h3 id="3、创建版本仓库"><a href="#3、创建版本仓库" class="headerlink" title="3、创建版本仓库"></a>3、创建版本仓库</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo svnadmin create /home/hjw/modules/svn/GeoCommerce</span><br></pre></td></tr></tbody></table></figure><h3 id="4、配置"><a href="#4、配置" class="headerlink" title="4、配置"></a>4、配置</h3><h4 id="（1）svnserve-conf"><a href="#（1）svnserve-conf" class="headerlink" title="（1）svnserve.conf"></a>（1）svnserve.conf</h4><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[general]</span><br><span class="line"><span class="comment"># 匿名用户不可读</span></span><br><span class="line">anon-access = none</span><br><span class="line"><span class="comment"># 权限用户可写</span></span><br><span class="line">auth-access = write</span><br><span class="line"><span class="comment"># 密码文件为passwd</span></span><br><span class="line">password-db = passwd</span><br><span class="line"><span class="comment"># 权限文件为authz</span></span><br><span class="line">authz-db = authz</span><br></pre></td></tr></tbody></table></figure><h4 id="（2）authz"><a href="#（2）authz" class="headerlink" title="（2）authz"></a>（2）authz</h4><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[groups]</span><br><span class="line"><span class="comment"># 用户组</span></span><br><span class="line">admin=wjh,syz,mzp,pdh</span><br><span class="line">[/] <span class="comment"># 必须写/，因为这表示从仓库的目录开始设置权限</span></span><br><span class="line">@admin=rw <span class="comment"># admin组有rw(读写权限)，所有人有r(读权限)</span></span><br><span class="line">*=r</span><br></pre></td></tr></tbody></table></figure><h4 id="（3）passwd"><a href="#（3）passwd" class="headerlink" title="（3）passwd"></a>（3）passwd</h4><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 指定密码</span></span><br><span class="line">[users]</span><br><span class="line">wjh=fool</span><br><span class="line">mzp=god</span><br><span class="line">syz=god</span><br><span class="line">pdh=god</span><br></pre></td></tr></tbody></table></figure><h3 id="5、启动svn服务"><a href="#5、启动svn服务" class="headerlink" title="5、启动svn服务"></a>5、启动svn服务</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo svnserve -d -r /home/hjw/modules/svn/ --listen-port 8888 <span class="comment"># 启动服务器</span></span><br><span class="line">-d 守护模式</span><br><span class="line">-r 指定svn版本库根目录</span><br><span class="line">--listen-port 指定端口</span><br></pre></td></tr></tbody></table></figure><h3 id="6、连接svn"><a href="#6、连接svn" class="headerlink" title="6、连接svn"></a>6、连接svn</h3><p>打开svn客户端，输入svn://ip:port/GeoCommerce</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;1、安装svn&quot;&gt;&lt;a href=&quot;#1、安装svn&quot; class=&quot;headerlink&quot; title=&quot;1、安装svn&quot;&gt;&lt;/a&gt;1、安装svn&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td 
      
    
    </summary>
    
      <category term="其他" scheme="http://yoursite.com/categories/%E5%85%B6%E4%BB%96/"/>
    
    
  </entry>
  
  <entry>
    <title>Konjak Record——2019.05.11</title>
    <link href="http://yoursite.com/2019/05/11/Algorithm0511/"/>
    <id>http://yoursite.com/2019/05/11/Algorithm0511/</id>
    <published>2019-05-11T06:45:56.938Z</published>
    <updated>2019-05-11T06:59:36.812Z</updated>
    
    <content type="html"><![CDATA[<h2 id="素数打表"><a href="#素数打表" class="headerlink" title="素数打表"></a>素数打表</h2><h3 id="1、P1832-A-B-Problem（再升级）"><a href="#1、P1832-A-B-Problem（再升级）" class="headerlink" title="1、P1832 A+B Problem（再升级）"></a><a href="https://www.luogu.org/problemnew/show/P1832" target="_blank" rel="noopener">1、P1832 A+B Problem（再升级）</a></h3><p>R:这是一个完全背包问题，对我来说这题还是挺难的，在大神眼里我就是个垃圾。注意代码中的质数打表方法，挺有用的(古人云:暴力出奇迹，打表出省一，爆搜挂着机，骗分过样例)。</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> visited[maxn], primes[maxn], len, N;</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> dp[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">get_primes</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i < maxn; i++) {</span><br><span class="line">        <span class="keyword">if</span> (!visited[i]) {</span><br><span class="line">            primes[len++] = i;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i * i; j < maxn; j += i) {</span><br><span class="line">                visited[j] = <span class="literal">true</span>;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">cnt</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i < len; i++) {</span><br><span class="line">        <span class="keyword">if</span> (primes[i] > N) {</span><br><span class="line">            <span class="keyword">return</span> i - <span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">cin</span> >> N;</span><br><span class="line">    get_primes();</span><br><span class="line">    <span class="keyword">int</span> num = cnt();</span><br><span class="line">    dp[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i <= num; i++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = primes[i]; j <= N; j++) {</span><br><span class="line">            dp[j] += dp[j - primes[i]];</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span> << dp[N] << <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="常规题"><a href="#常规题" class="headerlink" title="常规题"></a>常规题</h2><h3 id="2、P1803-凌乱的yyy-线段覆盖"><a href="#2、P1803-凌乱的yyy-线段覆盖" class="headerlink" title="2、P1803 凌乱的yyy / 线段覆盖"></a><a href="https://www.luogu.org/problemnew/show/P1803" target="_blank" rel="noopener">2、P1803 凌乱的yyy / 线段覆盖</a></h3><p>R:贪心问题，按右端点排序，能放就放。</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1000000</span> + <span class="number">9</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> {</span></span><br><span class="line">    <span class="keyword">int</span> l, r;</span><br><span class="line">};</span><br><span class="line">Node nodes[maxn];</span><br><span class="line"><span class="keyword">int</span> N;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(<span class="keyword">const</span> Node& a, <span class="keyword">const</span> Node& b)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">if</span> (a.r == b.r)</span><br><span class="line">        <span class="keyword">return</span> a.l > b.l;</span><br><span class="line">    <span class="keyword">return</span> a.r < b.r;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">1</span>, r = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> c = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(c)) {</span><br><span class="line">        <span class="keyword">if</span> (c == <span class="string">'-'</span>)</span><br><span class="line">            f = <span class="number">-1</span>;</span><br><span class="line">        c = getchar();</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(c)) {</span><br><span class="line">        r = <span class="number">10</span> * r + c - <span class="string">'0'</span>;</span><br><span class="line">        c = getchar();</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> f * r;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    N = read();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        nodes[i].l = read(), nodes[i].r = read();</span><br><span class="line">    }</span><br><span class="line">    sort(nodes + <span class="number">1</span>, nodes + <span class="number">1</span> + N, cmp);</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>, r = <span class="number">0</span>, pos = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (pos <= N) {</span><br><span class="line">        <span class="keyword">if</span> (nodes[pos].l >= r) {</span><br><span class="line">            ans += <span class="number">1</span>, r = nodes[pos].r;</span><br><span class="line">            pos++;</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            pos++;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans);</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="难题"><a href="#难题" class="headerlink" title="难题"></a>难题</h2><h3 id="3、P1450-HAOI2008-硬币购物"><a href="#3、P1450-HAOI2008-硬币购物" class="headerlink" title="3、P1450 [HAOI2008]硬币购物"></a><a href="https://www.luogu.org/problemnew/show/P1450" target="_blank" rel="noopener">3、P1450 [HAOI2008]硬币购物</a></h3><p>R:见代码,f[i]表示价值为i的物品，不限各个硬币次数，现在强制第j种硬币至少用d[j]+1个，相当于(d[j]+1)<em>c[j]把它定死了，其余的就自由组合，所以不符合方案数为dp[s-(d[j]+1)</em>c[j]],剩下的就用容斥原理瞎搞，用的是位运算枚举子集，具体见代码。</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">100000</span> + <span class="number">10</span>;</span><br><span class="line">ll f[maxn];</span><br><span class="line"><span class="keyword">int</span> c[<span class="number">5</span>], d[<span class="number">5</span>], tot, S;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">注意tmp>>1和tmp>>=1的区别！</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">对于每次询问，我们先假设答案为f[s]，但s>=(d[1]+1)*c[1]，即f[s]中包含了第一种硬币超过限制的情况。</span></span><br><span class="line"><span class="comment">要减去这部分。 </span></span><br><span class="line"><span class="comment">很明显，对于第一种硬币超过限制的情况，所用的第一种硬币数量>=d[1]+1。 </span></span><br><span class="line"><span class="comment">容易发现，总和为s，第一种硬币至少d[1]+1的情况个数，等于总和为s-(d[1]+1)*c[1]，硬币个数没有限制的情况个数！ </span></span><br><span class="line"><span class="comment">因为总和为s，第一种硬币至少d[1]+1的情况个数中，那d[1]+1个硬币是固定的，是不会变的，对于情况个数是不会有影响的。 </span></span><br><span class="line"><span class="comment">所以，我们将原先为f[s]的答案减去f[s-(d[1]+1)*c[1]]即可得出正确答案。 </span></span><br><span class="line"><span class="comment">这只是一种硬币超过限制的解决办法。对于两种硬币超过限制我们也同样这么减去</span></span><br><span class="line"><span class="comment">，但重复减去了一部分：那些两种硬币同时超过限制的情况。 </span></span><br><span class="line"><span class="comment">因此我们要加回两种硬币同时超过限制的情况</span></span><br><span class="line"><span class="comment">接着用位运算计算容斥原理的结果。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= <span class="number">4</span>; i++) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &c[i]);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &tot);</span><br><span class="line">    f[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= <span class="number">4</span>; i++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = c[i]; j < maxn; j++) {</span><br><span class="line">            f[j] += f[j - c[i]];</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">while</span> (tot--) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= <span class="number">4</span>; i++) {</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &d[i]);</span><br><span class="line">        }</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &S);</span><br><span class="line">        ll ans = f[S];</span><br><span class="line">        <span class="comment">//容斥原理,奇减偶加</span></span><br><span class="line">        <span class="comment">//总共16位数，即0001-1111所以从1枚举到15</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= <span class="number">15</span>; i++) {</span><br><span class="line">            <span class="keyword">int</span> tmp = i, now = S;</span><br><span class="line">            <span class="keyword">int</span> j = <span class="number">1</span>; <span class="comment">//表示末尾第几位，例如1111,首先是1111，右移一位变为0111，j加一</span></span><br><span class="line">            <span class="keyword">int</span> k = <span class="number">0</span>; <span class="comment">//用来判断i的二进制表示中共有几个1，用异或来表示</span></span><br><span class="line">            <span class="comment">//k开始为0，与1异或一次就为1，再与1异或一次变为0，所以可以表达1的个数</span></span><br><span class="line">            <span class="keyword">for</span> (; tmp; tmp >>= <span class="number">1</span>, j++) {</span><br><span class="line">                <span class="keyword">if</span> (tmp & <span class="number">1</span>) { <span class="comment">//最后一位</span></span><br><span class="line">                    now -= (d[j] + <span class="number">1</span>) * c[j];</span><br><span class="line">                    k ^= <span class="number">1</span>;</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (now >= <span class="number">0</span>) {</span><br><span class="line">                k ? ans -= f[now] : ans += f[now];</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, ans);</span><br><span class="line">    }</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;素数打表&quot;&gt;&lt;a href=&quot;#素数打表&quot; class=&quot;headerlink&quot; title=&quot;素数打表&quot;&gt;&lt;/a&gt;素数打表&lt;/h2&gt;&lt;h3 id=&quot;1、P1832-A-B-Problem（再升级）&quot;&gt;&lt;a href=&quot;#1、P1832-A-B-Problem（再
      
    
    </summary>
    
      <category term="Konjak Records" scheme="http://yoursite.com/categories/Konjak-Records/"/>
    
    
      <category term="动态规划" scheme="http://yoursite.com/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
    
      <category term="贪心" scheme="http://yoursite.com/tags/%E8%B4%AA%E5%BF%83/"/>
    
      <category term="质数打表" scheme="http://yoursite.com/tags/%E8%B4%A8%E6%95%B0%E6%89%93%E8%A1%A8/"/>
    
      <category term="容斥原理" scheme="http://yoursite.com/tags/%E5%AE%B9%E6%96%A5%E5%8E%9F%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>Konjak Record——2019.05.10</title>
    <link href="http://yoursite.com/2019/05/10/Algorithm0510/"/>
    <id>http://yoursite.com/2019/05/10/Algorithm0510/</id>
    <published>2019-05-10T08:02:01.922Z</published>
    <updated>2019-05-11T06:45:24.366Z</updated>
    
    <content type="html"><![CDATA[<h2 id="常规题"><a href="#常规题" class="headerlink" title="常规题"></a>常规题</h2><h3 id="1、P1336-最佳课题选择"><a href="#1、P1336-最佳课题选择" class="headerlink" title="1、P1336 最佳课题选择"></a><a href="https://www.luogu.org/problemnew/show/P1336" target="_blank" rel="noopener">1、P1336 最佳课题选择</a></h3><p>R:多重背包</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">205</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> {</span></span><br><span class="line">    <span class="keyword">int</span> A, B;</span><br><span class="line">} nodes[<span class="number">25</span>];</span><br><span class="line"><span class="keyword">int</span> N, M;</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> dp[<span class="number">25</span>][maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">cin</span> >> N >> M;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= M; i++) {</span><br><span class="line">        <span class="built_in">cin</span> >> nodes[i].A >> nodes[i].B;</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">memset</span>(dp, <span class="number">0x3f</span>, <span class="keyword">sizeof</span>(dp));</span><br><span class="line">    <span class="comment">//前i个课题选0篇的时间均为0</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i <= M; i++) {</span><br><span class="line">        dp[i][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= M; i++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= N; j++) {</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k <= j; k++) {</span><br><span class="line">                dp[i][j] = min(dp[i - <span class="number">1</span>][j - k] + nodes[i].A * (<span class="keyword">long</span> <span class="keyword">long</span>)<span class="built_in">pow</span>(k, nodes[i].B), dp[i][j]);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span> << dp[M][N] << <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="2、P1359-租用游艇"><a href="#2、P1359-租用游艇" class="headerlink" title="2、P1359 租用游艇"></a><a href="https://www.luogu.org/problemnew/show/P1359" target="_blank" rel="noopener">2、P1359 租用游艇</a></h3><p>R：水题</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">205</span>;</span><br><span class="line"><span class="keyword">int</span> f[maxn], r[maxn][maxn], N;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    ios::sync_with_stdio(<span class="number">0</span>), <span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">cin</span> >> N;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i < N; i++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = i + <span class="number">1</span>; j <= N; j++) {</span><br><span class="line">            <span class="built_in">cin</span> >> r[i][j];</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">memset</span>(f, <span class="number">0x3f</span>, <span class="keyword">sizeof</span>(f));</span><br><span class="line">    f[<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">1</span>; k < i; k++) {</span><br><span class="line">            f[i] = min(f[i], f[k] + r[k][i]);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span> << f[N] << <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="3、P1364-医院设置"><a href="#3、P1364-医院设置" class="headerlink" title="3、P1364 医院设置"></a><a href="https://www.luogu.org/problemnew/show/P1364" target="_blank" rel="noopener">3、P1364 医院设置</a></h3><p>R:水题</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">105</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> {</span></span><br><span class="line">    <span class="keyword">int</span> v;</span><br><span class="line">    Node* next;</span><br><span class="line">};</span><br><span class="line"><span class="keyword">int</span> tot, N, people[maxn], ans = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line">Node *h[maxn], pool[maxn << <span class="number">1</span>];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add_edge</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    Node* p = &pool[tot++];</span><br><span class="line">    p->v = v, p->next = h[u], h[u] = p;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> s, <span class="keyword">int</span> f, <span class="keyword">int</span> dis, <span class="keyword">int</span>& sum)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    sum += people[s] * dis;</span><br><span class="line">    <span class="keyword">for</span> (Node* p = h[s]; p; p = p->next) {</span><br><span class="line">        <span class="keyword">int</span> v = p->v;</span><br><span class="line">        <span class="keyword">if</span> (v != f) {</span><br><span class="line">            dfs(v, s, dis + <span class="number">1</span>, sum);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span> >> N;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="keyword">int</span> l, r;</span><br><span class="line">        <span class="built_in">cin</span> >> people[i] >> l >> r;</span><br><span class="line">        <span class="keyword">if</span> (l != <span class="number">0</span>)</span><br><span class="line">            add_edge(i, l), add_edge(l, i);</span><br><span class="line">        <span class="keyword">if</span> (r != <span class="number">0</span>)</span><br><span class="line">            add_edge(i, r), add_edge(r, i);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        dfs(i, <span class="number">0</span>, <span class="number">0</span>, sum);</span><br><span class="line">        ans = min(ans, sum);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span> << ans << <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="有意思的题"><a href="#有意思的题" class="headerlink" title="有意思的题"></a>有意思的题</h2><h3 id="4、P1351-联合权值"><a href="#4、P1351-联合权值" class="headerlink" title="4、P1351 联合权值"></a><a href="https://www.luogu.org/problemnew/show/P1351" target="_blank" rel="noopener">4、P1351 联合权值</a></h3><p>R:n个节点n-1条边，说明这个图可以表示成一棵树，注意dfs的细节(带上祖父节点,不走回父节点)，此外需要注意同余定理中负数的处理，统计方法很简单，不多写。</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">200000</span> + <span class="number">10</span>, mod = <span class="number">10007</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> {</span></span><br><span class="line">    <span class="keyword">int</span> v;</span><br><span class="line">    Node* next;</span><br><span class="line">};</span><br><span class="line">Node *h[maxn], pool[maxn << <span class="number">1</span>];</span><br><span class="line"><span class="keyword">int</span> tot, total_sum, mx, w[maxn], N;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add_edge</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    Node* p = &pool[tot++];</span><br><span class="line">    p->v = v, p->next = h[u], h[u] = p;</span><br><span class="line">}</span><br><span class="line"><span class="comment">//son father grandfather</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> s, <span class="keyword">int</span> f, <span class="keyword">int</span> g)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">int</span> sum = <span class="number">0</span>, sq = <span class="number">0</span>, first = <span class="number">0</span>, second = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (Node* p = h[s]; p != <span class="literal">NULL</span>; p = p->next) {</span><br><span class="line">        <span class="keyword">int</span> v = p->v;</span><br><span class="line">        <span class="keyword">if</span> (v == f) {</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        }</span><br><span class="line">        sum = (w[v] + sum) % mod;</span><br><span class="line">        sq = (w[v] * w[v] + sq) % mod;</span><br><span class="line">        <span class="comment">//求第一第二的权值</span></span><br><span class="line">        <span class="keyword">if</span> (w[v] >= first) {</span><br><span class="line">            second = first, first = w[v];</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            <span class="keyword">if</span> (w[v] > second) {</span><br><span class="line">                second = w[v];</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        dfs(v, s, f);</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">//注意这里负数的解决方法</span></span><br><span class="line">    total_sum = ((sum * sum - sq + mod) % mod + total_sum) % mod;</span><br><span class="line">    mx = max(mx, first * second);</span><br><span class="line">    total_sum = (<span class="number">2</span> * w[s] * w[g] + total_sum) % mod;</span><br><span class="line">    mx = max(w[s] * w[g], mx);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    ios::sync_with_stdio(<span class="number">0</span>), <span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">cin</span> >> N;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i < N; i++) {</span><br><span class="line">        <span class="keyword">int</span> u, v;</span><br><span class="line">        <span class="built_in">cin</span> >> u >> v;</span><br><span class="line">        add_edge(u, v), add_edge(v, u);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="built_in">cin</span> >> w[i];</span><br><span class="line">    }</span><br><span class="line">    dfs(<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">cout</span> << mx << <span class="string">" "</span> << total_sum << <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="5、P1439-【模板】最长公共子序列"><a href="#5、P1439-【模板】最长公共子序列" class="headerlink" title="5、P1439 【模板】最长公共子序列"></a><a href="https://www.luogu.org/problemnew/show/P1439" target="_blank" rel="noopener">5、P1439 【模板】最长公共子序列</a></h3><p>R:将LCS问题转为LIS问题，降低复杂度，将3，4，1，2，5离散化为3-1,4-2,1-3,2-4,5-5<br>根据这个键值对关系将序列后进行替换<br>1,2,3,4,5 -> 3,4,1,2,5<br>然后对其求最长不下降序列即可</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">100000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> seg[maxn << <span class="number">2</span>], s1[maxn], s2[maxn], N, id[maxn], ans = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">vector</span><<span class="keyword">int</span>> v;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">getid</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">return</span> lower_bound(v.begin(), v.end(), x) - v.begin() + <span class="number">1</span>;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> pos, <span class="keyword">int</span> C, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> cur)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="comment">//这里我原来写l==pos,害我WA成傻逼</span></span><br><span class="line">    <span class="keyword">if</span> (r == l) {</span><br><span class="line">        seg[cur] = max(seg[cur], C);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> mid = (l + r) >> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (pos <= mid) {</span><br><span class="line">        update(pos, C, l, mid, cur << <span class="number">1</span>);</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        update(pos, C, mid + <span class="number">1</span>, r, cur << <span class="number">1</span> | <span class="number">1</span>);</span><br><span class="line">    }</span><br><span class="line">    seg[cur] = max(seg[cur << <span class="number">1</span>], seg[cur << <span class="number">1</span> | <span class="number">1</span>]);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> L, <span class="keyword">int</span> R, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> cur)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">if</span> (L > R) {</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (l >= L && r <= R) {</span><br><span class="line">        <span class="keyword">return</span> seg[cur];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> mid = (l + r) >> <span class="number">1</span>, mx = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (mid >= L) {</span><br><span class="line">        mx = max(mx, query(L, R, l, mid, cur << <span class="number">1</span>));</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (mid < R) {</span><br><span class="line">        mx = max(mx, query(L, R, mid + <span class="number">1</span>, r, cur << <span class="number">1</span> | <span class="number">1</span>));</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> mx;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    ios::sync_with_stdio(<span class="number">0</span>), <span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">cin</span> >> N;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="built_in">cin</span> >> s1[i];</span><br><span class="line">        id[s1[i]] = i;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="keyword">int</span> tmp;</span><br><span class="line">        <span class="built_in">cin</span> >> tmp;</span><br><span class="line">        s2[i] = id[tmp];</span><br><span class="line">        v.push_back(s2[i]);</span><br><span class="line">    }</span><br><span class="line">    sort(v.begin(), v.end());</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="keyword">int</span> idx = getid(s2[i]);</span><br><span class="line">        <span class="keyword">int</span> pre = query(<span class="number">1</span>, idx, <span class="number">1</span>, N, <span class="number">1</span>);</span><br><span class="line">        update(idx, pre + <span class="number">1</span>, <span class="number">1</span>, N, <span class="number">1</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span> << query(<span class="number">1</span>, N, <span class="number">1</span>, N, <span class="number">1</span>) << <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="模板题"><a href="#模板题" class="headerlink" title="模板题"></a>模板题</h2><h3 id="6、P1440-求m区间内的最小值"><a href="#6、P1440-求m区间内的最小值" class="headerlink" title="6、P1440 求m区间内的最小值"></a><a href="https://www.luogu.org/problemnew/show/P1440" target="_blank" rel="noopener">6、P1440 求m区间内的最小值</a></h3><p>R:这道题可以用线段树O(Nlog2N)，但是卡常，用了单调队列O(N)</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//线段树版本</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">//这道题要吸氧气才能通过</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">2000000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> seg[maxn << <span class="number">2</span>], f[maxn], N, M;</span><br><span class="line"><span class="comment">//快读</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">1</span>, r = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> c = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(c)) {</span><br><span class="line">        <span class="keyword">if</span> (c == <span class="string">'-'</span>)</span><br><span class="line">            f = <span class="number">-1</span>;</span><br><span class="line">        c = getchar();</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(c)) {</span><br><span class="line">        r = <span class="number">10</span> * r + c - <span class="string">'0'</span>;</span><br><span class="line">        c = getchar();</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> f * r;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> pos, <span class="keyword">int</span> c, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> cur)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">if</span> (l == r) {</span><br><span class="line">        seg[cur] = c;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> mid = (l + r) >> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (pos <= mid) {</span><br><span class="line">        update(pos, c, l, mid, cur << <span class="number">1</span>);</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        update(pos, c, mid + <span class="number">1</span>, r, cur << <span class="number">1</span> | <span class="number">1</span>);</span><br><span class="line">    }</span><br><span class="line">    seg[cur] = min(seg[cur << <span class="number">1</span>], seg[cur << <span class="number">1</span> | <span class="number">1</span>]);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> L, <span class="keyword">int</span> R, <span class="keyword">int</span> cur)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">if</span> (L > R) {</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (l >= L && r <= R) {</span><br><span class="line">        <span class="keyword">return</span> seg[cur];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> mid = (l + r) >> <span class="number">1</span>, mn = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line">    <span class="keyword">if</span> (mid >= L) {</span><br><span class="line">        mn = min(mn, query(l, mid, L, R, cur << <span class="number">1</span>));</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (mid < R) {</span><br><span class="line">        mn = min(mn, query(mid + <span class="number">1</span>, r, L, R, cur << <span class="number">1</span> | <span class="number">1</span>));</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> mn;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    N = read(), M = read();</span><br><span class="line">    <span class="built_in">memset</span>(seg, <span class="number">0x3f</span>, <span class="keyword">sizeof</span>(seg));</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        f[i] = read();</span><br><span class="line">        update(i, f[i], <span class="number">1</span>, N, <span class="number">1</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="keyword">int</span> s = i - M;</span><br><span class="line">        s = max(s, <span class="number">1</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, query(<span class="number">1</span>, N, s, i - <span class="number">1</span>, <span class="number">1</span>));</span><br><span class="line">    }</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"><span class="comment">//单调队列版本</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">//cout,cin非常非常非常慢，我用cin/cout费时4400ms，改成scanf后只有1500ms</span></span><br><span class="line"><span class="comment">//单调队列还是挺好打的，线段树要吸氧才能过</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">2000000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> f[maxn], N, M;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> {</span></span><br><span class="line">    <span class="keyword">int</span> index, value;</span><br><span class="line">};</span><br><span class="line"><span class="built_in">deque</span><Node> q;</span><br><span class="line"><span class="comment">//去除过期数据</span></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">(<span class="keyword">int</span> now)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">int</span> start = now - M;</span><br><span class="line">    <span class="keyword">while</span> (!q.empty()) {</span><br><span class="line">        Node head = q.front();</span><br><span class="line">        <span class="keyword">if</span> (head.index < start) {</span><br><span class="line">            q.pop_front();</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">get</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">if</span> (q.empty()) {</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        <span class="keyword">return</span> q.front().value;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">int</span> idx, <span class="keyword">int</span> val)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    Node nN;</span><br><span class="line">    nN.index = idx, nN.value = val;</span><br><span class="line">    <span class="keyword">while</span> (!q.empty() && q.back().value >= val) {</span><br><span class="line">        q.pop_back();</span><br><span class="line">    }</span><br><span class="line">    q.push_back(nN);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line"></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &N, &M);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &f[i]);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        remove(i);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, get());</span><br><span class="line">        insert(i, f[i]);</span><br><span class="line">    }</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="错题"><a href="#错题" class="headerlink" title="错题"></a>错题</h2><h3 id="7、P1353-USACO08JAN-跑步Running"><a href="#7、P1353-USACO08JAN-跑步Running" class="headerlink" title="7、P1353 [USACO08JAN]跑步Running"></a><a href="https://www.luogu.org/problemnew/show/P1353" target="_blank" rel="noopener">7、P1353 [USACO08JAN]跑步Running</a></h3><p>R:这道题我不会写转移方程，f[i][j]表示i分钟j疲劳度的最远距离<br>如果i这个时刻在休息，那么dp[i+j][0] = max(dp[i-1][j+1],dp[i+j][0])<br>如果i这个时刻在跑步, 那么dp[i][j] = max(dp[i-1][j-1],dp[i][j])<br>如果j为0，上一个时刻在休息，这个时刻可能还在休息，且疲劳度为0，所以dp[i][0] = max(dp[i][0],dp[i-1][0])</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxt = <span class="number">10005</span>, maxm = <span class="number">505</span>;</span><br><span class="line"><span class="keyword">int</span> dp[maxt][maxm], N, M, d[maxt];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    ios::sync_with_stdio(<span class="number">0</span>), <span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">cin</span> >> N >> M;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="built_in">cin</span> >> d[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j <= M; j++) {</span><br><span class="line">            <span class="keyword">if</span> (i + j <= N) {</span><br><span class="line">                dp[i + j][<span class="number">0</span>] = max(dp[i - <span class="number">1</span>][j + <span class="number">1</span>], dp[i + j][<span class="number">0</span>]);</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (j == <span class="number">0</span>) {</span><br><span class="line">                dp[i][j] = max(dp[i - <span class="number">1</span>][j], dp[i][j]);</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                dp[i][j] = max(dp[i - <span class="number">1</span>][j - <span class="number">1</span>] + d[i], dp[i][j]);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span> << dp[N][<span class="number">0</span>] << <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;常规题&quot;&gt;&lt;a href=&quot;#常规题&quot; class=&quot;headerlink&quot; title=&quot;常规题&quot;&gt;&lt;/a&gt;常规题&lt;/h2&gt;&lt;h3 id=&quot;1、P1336-最佳课题选择&quot;&gt;&lt;a href=&quot;#1、P1336-最佳课题选择&quot; class=&quot;headerlink&quot; 
      
    
    </summary>
    
      <category term="Konjak Records" scheme="http://yoursite.com/categories/Konjak-Records/"/>
    
    
      <category term="动态规划" scheme="http://yoursite.com/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
    
      <category term="LCS-&gt;LIS" scheme="http://yoursite.com/tags/LCS-LIS/"/>
    
      <category term="单调队列" scheme="http://yoursite.com/tags/%E5%8D%95%E8%B0%83%E9%98%9F%E5%88%97/"/>
    
  </entry>
  
  <entry>
    <title>Konjak Record——2019.05.09</title>
    <link href="http://yoursite.com/2019/05/09/Algorithm0509/"/>
    <id>http://yoursite.com/2019/05/09/Algorithm0509/</id>
    <published>2019-05-09T13:39:58.443Z</published>
    <updated>2019-05-09T14:34:06.690Z</updated>
    
    <content type="html"><![CDATA[<h2 id="常规题"><a href="#常规题" class="headerlink" title="常规题"></a>常规题</h2><h3 id="1、P1279-字串距离"><a href="#1、P1279-字串距离" class="headerlink" title="1、P1279 字串距离"></a><a href="https://www.luogu.org/problemnew/show/P1279" target="_blank" rel="noopener">1、P1279 字串距离</a></h3><p>R:最大公共子序列的变形。</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">char</span> a[<span class="number">2005</span>], b[<span class="number">2005</span>];</span><br><span class="line"><span class="keyword">int</span> d, dp[<span class="number">2005</span>][<span class="number">2005</span>], alen, blen;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">Min</span><span class="params">(<span class="keyword">int</span> n1, <span class="keyword">int</span> n2)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">return</span> n1 > n2 ? n2 : n1;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">Abs</span><span class="params">(<span class="keyword">int</span> n1, <span class="keyword">int</span> n2)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">return</span> n1 > n2 ? n1 - n2 : n2 - n1;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%s"</span>, &a[<span class="number">1</span>]), <span class="built_in">scanf</span>(<span class="string">"%s"</span>, &b[<span class="number">1</span>]), <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &d), alen = <span class="built_in">strlen</span>(a + <span class="number">1</span>), blen = <span class="built_in">strlen</span>(b + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= blen; i++) {</span><br><span class="line">        dp[<span class="number">0</span>][i] = dp[<span class="number">0</span>][i - <span class="number">1</span>] + d;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= alen; i++) {</span><br><span class="line">        dp[i][<span class="number">0</span>] = dp[i - <span class="number">1</span>][<span class="number">0</span>] + d;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= alen; i++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= blen; j++) {</span><br><span class="line">            dp[i][j] = Min(Min(dp[i - <span class="number">1</span>][j - <span class="number">1</span>] + Abs(a[i], b[j]), dp[i - <span class="number">1</span>][j] + d), dp[i][j - <span class="number">1</span>] + d);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,dp[alen][blen]);</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="难题"><a href="#难题" class="headerlink" title="难题"></a>难题</h2><h3 id="2、P1281-书的复制"><a href="#2、P1281-书的复制" class="headerlink" title="2、P1281 书的复制"></a><a href="https://www.luogu.org/problemnew/show/P1281" target="_blank" rel="noopener">2、P1281 书的复制</a></h3><p>R:首先连续的书本分给一本人，因此想到区间dp,这题非常类似<a href="https://www.luogu.org/problemnew/show/P1103" target="_blank" rel="noopener">P1103 书本整理</a>,dp[i][k]表示前i本书分给k个人的最小值。另外一个注意点就是输出序列时由后向前，贪心输出。</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">505</span>, inf = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">int</span> dp[maxn][maxn], N, K, f[maxn], sum[maxn], ans;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Print</span><span class="params">(<span class="keyword">int</span> r)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">if</span> (r == <span class="number">0</span>) {</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = r; i >= <span class="number">0</span>; i--) {</span><br><span class="line">        <span class="keyword">int</span> tmp = sum[r] - sum[i - <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span> (tmp > ans || i == <span class="number">0</span>) {</span><br><span class="line">            Print(i);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d %d\n"</span>, i + <span class="number">1</span>, r);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    ios::sync_with_stdio(<span class="number">0</span>), <span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">cin</span> >> N >> K;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="built_in">cin</span> >> f[i];</span><br><span class="line">        sum[i] = sum[i - <span class="number">1</span>] + f[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">memset</span>(dp, <span class="number">0x3f</span>, <span class="keyword">sizeof</span>(dp));</span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">1</span>; k <= K; k++) {</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i - <span class="number">1</span>; j >= <span class="number">0</span>; j--) {</span><br><span class="line">                <span class="keyword">if</span> (j < k - <span class="number">1</span>) {</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                }</span><br><span class="line">                dp[i][k] = min(dp[i][k], max(dp[j][k - <span class="number">1</span>], sum[i] - sum[j]));</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    ans = dp[N][K];</span><br><span class="line">    Print(N);</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="3、P1283-平板涂色"><a href="#3、P1283-平板涂色" class="headerlink" title="3、P1283 平板涂色"></a><a href="https://www.luogu.org/problemnew/show/P1283" target="_blank" rel="noopener">3、P1283 平板涂色</a></h3><p>R:状态压缩dp，dp[i][s]表示到达i节点，状态为s的最小次数，可以由dp[k][前一个状态(即将第i位置为0)]转移来，且必须保证前一个状态已经将第i个上面的矩形全部涂色。<br>位运算有很多细节容易出错：<br>1.将某位置为0(必须保证原来为1)：state -= (1<<j)<br>2.将某位置为1(必须保证原来为0)：state += (1<<j)<br>3.判断某位是否为1：state & (1<<j) == 0 ? 0:1</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//以下代码有优化的地方，但是我太懒了</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxs = (<span class="number">1</span> << <span class="number">16</span>) + <span class="number">10</span>, maxn = <span class="number">16</span>;</span><br><span class="line"><span class="keyword">int</span> dp[maxn][maxs], N, all, ans = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> {</span></span><br><span class="line">    <span class="keyword">int</span> xl, yl, xr, yr, color;</span><br><span class="line">};</span><br><span class="line">Node nodes[maxn];</span><br><span class="line"><span class="built_in">vector</span><<span class="keyword">int</span>> edge[maxn];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">overlap</span><span class="params">(<span class="keyword">int</span> x1, <span class="keyword">int</span> y1, <span class="keyword">int</span> x2, <span class="keyword">int</span> y2)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">return</span> !(y1 <= x2 || y2 <= x1);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">isSet</span><span class="params">(<span class="keyword">int</span> state, <span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">return</span> (state & (<span class="number">1</span> << (n - <span class="number">1</span>))) != <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">getbit</span><span class="params">(<span class="keyword">int</span> state, <span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">return</span> state & (<span class="number">1</span> << (n - <span class="number">1</span>));</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    ios::sync_with_stdio(<span class="number">0</span>), <span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">cin</span> >> N;</span><br><span class="line">    all = <span class="number">2</span> << (N - <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="built_in">cin</span> >> nodes[i].yl >> nodes[i].xl >> nodes[i].yr >> nodes[i].xr >> nodes[i].color;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= N; j++) {</span><br><span class="line">            <span class="keyword">if</span> (j == i) {</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (nodes[j].yr == nodes[i].yl && overlap(nodes[i].xl, nodes[i].xr, nodes[j].xl, nodes[j].xr)) {</span><br><span class="line">                edge[i].push_back(j);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">memset</span>(dp, <span class="number">0x3f</span>, <span class="keyword">sizeof</span>(dp));</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        dp[i][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i < all; i++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= N; j++) {</span><br><span class="line">            <span class="keyword">if</span> (!getbit(i, j)) {</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">int</span> preState = i - (<span class="number">1</span> << (j - <span class="number">1</span>));</span><br><span class="line">            <span class="keyword">bool</span> isOk = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k < (<span class="keyword">int</span>)edge[j].size(); k++) {</span><br><span class="line">                <span class="keyword">if</span> (!isSet(preState, edge[j][k])) {</span><br><span class="line">                    isOk = <span class="literal">false</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (!isOk) {</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">1</span>; k <= N; k++) {</span><br><span class="line">                <span class="keyword">if</span> (k == j || preState & (<span class="number">1</span> << (k - <span class="number">1</span>)) == <span class="number">0</span>) {</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">if</span> (nodes[k].color == nodes[j].color && preState != <span class="number">0</span>) {</span><br><span class="line">                    dp[j][i] = min(dp[j][i], dp[k][preState]);</span><br><span class="line">                } <span class="keyword">else</span> {</span><br><span class="line">                    dp[j][i] = min(dp[j][i], dp[k][preState] + <span class="number">1</span>);</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        ans = min(ans, dp[i][all - <span class="number">1</span>]);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span> << ans << <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="4、P1310-表达式的值"><a href="#4、P1310-表达式的值" class="headerlink" title="4、P1310 表达式的值"></a><a href="https://www.luogu.org/problemnew/show/P1310" target="_blank" rel="noopener">4、P1310 表达式的值</a></h3><p>R:中位表达式转后缀表达式：<br>1.遇到(直接入符号栈，遇到数字直接输出。<br>2.遇到),则一直出栈，直到出现(，(不输出，其他符号都输出。<br>3.遇到其他符号，则一直出栈直到遇到优先级比它小的，最后自己入栈,注意(除了 )以外都不会出栈。<br>4.如果到达输出结尾，则一直出符号栈。</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">200000</span> + <span class="number">10</span>, MOD = <span class="number">10007</span>;</span><br><span class="line"><span class="keyword">int</span> N, f[<span class="number">2</span>][maxn];</span><br><span class="line"><span class="built_in">string</span> s;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    ios::sync_with_stdio(<span class="number">0</span>), <span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">cin</span> >> N >> s;</span><br><span class="line">    <span class="built_in">stack</span><<span class="keyword">char</span>> stk;</span><br><span class="line">    <span class="built_in">string</span> expr = <span class="string">"."</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i < (<span class="keyword">int</span>)s.size(); i++) {</span><br><span class="line">        <span class="keyword">if</span> (s[i] == <span class="string">'('</span> || s[i] == <span class="string">'*'</span>) {</span><br><span class="line">            stk.push(s[i]);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span> (s[i] == <span class="string">')'</span>) {</span><br><span class="line">            <span class="keyword">while</span> (!stk.empty()) {</span><br><span class="line">                <span class="keyword">char</span> top = stk.top();</span><br><span class="line">                stk.pop();</span><br><span class="line">                <span class="keyword">if</span> (top == <span class="string">'('</span>)</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    expr += top;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span> (s[i] == <span class="string">'+'</span>) {</span><br><span class="line">            <span class="keyword">while</span> (!stk.empty() && stk.top() == <span class="string">'*'</span>) {</span><br><span class="line">                expr += stk.top();</span><br><span class="line">                stk.pop();</span><br><span class="line">            }</span><br><span class="line">            stk.push(<span class="string">'+'</span>);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span> (s[i] == <span class="string">'*'</span> || s[i] == <span class="string">'+'</span>)</span><br><span class="line">            expr += <span class="string">'.'</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">while</span> (!stk.empty()) {</span><br><span class="line">        expr += stk.top();</span><br><span class="line">        stk.pop();</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> j = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i < (<span class="keyword">int</span>)expr.size(); i++) {</span><br><span class="line">        <span class="keyword">if</span> (expr[i] == <span class="string">'.'</span>) {</span><br><span class="line">            j++;</span><br><span class="line">            f[<span class="number">0</span>][j] = <span class="number">1</span>, f[<span class="number">1</span>][j] = <span class="number">1</span>;</span><br><span class="line">        } <span class="keyword">else</span> <span class="keyword">if</span> (expr[i] == <span class="string">'*'</span>) {</span><br><span class="line">            j--;</span><br><span class="line">            f[<span class="number">0</span>][j] = (f[<span class="number">0</span>][j + <span class="number">1</span>] * f[<span class="number">1</span>][j] + f[<span class="number">0</span>][j] * f[<span class="number">1</span>][j + <span class="number">1</span>] + f[<span class="number">0</span>][j] * f[<span class="number">0</span>][j + <span class="number">1</span>]) % MOD;</span><br><span class="line">            f[<span class="number">1</span>][j] = (f[<span class="number">1</span>][j] * f[<span class="number">1</span>][j + <span class="number">1</span>]) % MOD;</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            j--;</span><br><span class="line">            f[<span class="number">1</span>][j] = (f[<span class="number">0</span>][j] * f[<span class="number">1</span>][j + <span class="number">1</span>] + f[<span class="number">0</span>][j + <span class="number">1</span>] * f[<span class="number">1</span>][j] + f[<span class="number">1</span>][j] * f[<span class="number">1</span>][j + <span class="number">1</span>]) % MOD;</span><br><span class="line">            f[<span class="number">0</span>][j] = (f[<span class="number">0</span>][j] * f[<span class="number">0</span>][j + <span class="number">1</span>]) % MOD;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span> << f[<span class="number">0</span>][j] << <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;常规题&quot;&gt;&lt;a href=&quot;#常规题&quot; class=&quot;headerlink&quot; title=&quot;常规题&quot;&gt;&lt;/a&gt;常规题&lt;/h2&gt;&lt;h3 id=&quot;1、P1279-字串距离&quot;&gt;&lt;a href=&quot;#1、P1279-字串距离&quot; class=&quot;headerlink&quot; titl
      
    
    </summary>
    
      <category term="Konjak Records" scheme="http://yoursite.com/categories/Konjak-Records/"/>
    
    
      <category term="动态规划" scheme="http://yoursite.com/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
    
      <category term="区间dp" scheme="http://yoursite.com/tags/%E5%8C%BA%E9%97%B4dp/"/>
    
      <category term="表达式转换" scheme="http://yoursite.com/tags/%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%BD%AC%E6%8D%A2/"/>
    
      <category term="状压dp" scheme="http://yoursite.com/tags/%E7%8A%B6%E5%8E%8Bdp/"/>
    
  </entry>
  
  <entry>
    <title>Konjak Record——2019.05.07</title>
    <link href="http://yoursite.com/2019/05/07/Algorithm0507/"/>
    <id>http://yoursite.com/2019/05/07/Algorithm0507/</id>
    <published>2019-05-07T10:17:57.142Z</published>
    <updated>2019-05-09T13:39:42.212Z</updated>
    
    <content type="html"><![CDATA[<h2 id="常规题"><a href="#常规题" class="headerlink" title="常规题"></a>常规题</h2><h3 id="1、P1216-IOI1994-USACO1-5-数字三角形-Number-Triangles"><a href="#1、P1216-IOI1994-USACO1-5-数字三角形-Number-Triangles" class="headerlink" title="1、P1216 [IOI1994][USACO1.5]数字三角形 Number Triangles"></a><a href="https://www.luogu.org/problemnew/show/P1216" target="_blank" rel="noopener">1、P1216 [IOI1994][USACO1.5]数字三角形 Number Triangles</a></h3><p>R:水题</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1005</span>;</span><br><span class="line"><span class="keyword">int</span> f[maxn][maxn], dp[maxn][maxn], N;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">cin</span> >> N;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= i; j++) {</span><br><span class="line">            <span class="built_in">cin</span> >> f[i][j];</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span> (i == N) {</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= N; j++) {</span><br><span class="line">                dp[N][j] = f[N][j];</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = N - <span class="number">1</span>; i >= <span class="number">1</span>; i--) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= i; j++) {</span><br><span class="line">            dp[i][j] = max(dp[i + <span class="number">1</span>][j + <span class="number">1</span>], dp[i + <span class="number">1</span>][j]) + f[i][j];</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span> << dp[<span class="number">1</span>][<span class="number">1</span>] << <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="难题"><a href="#难题" class="headerlink" title="难题"></a>难题</h2><h3 id="2、P1169-ZJOI2007-棋盘制作"><a href="#2、P1169-ZJOI2007-棋盘制作" class="headerlink" title="2、P1169 [ZJOI2007]棋盘制作"></a><a href="https://www.luogu.org/problemnew/show/P1169" target="_blank" rel="noopener">2、P1169 [ZJOI2007]棋盘制作</a></h3><p>R:悬线法</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">2000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> rec_ans = <span class="number">1</span>, square_ans = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">int</span> up[maxn][maxn], L[maxn][maxn], R[maxn][maxn], f[maxn][maxn], N, M;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">cin</span> >> N >> M;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= M; j++) {</span><br><span class="line">            <span class="built_in">cin</span> >> f[i][j];</span><br><span class="line">            L[i][j] = R[i][j] = j;</span><br><span class="line">            up[i][j] = <span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">//预处理L</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">2</span>; j <= M; j++) {</span><br><span class="line">            <span class="keyword">if</span> (f[i][j - <span class="number">1</span>] != f[i][j]) {</span><br><span class="line">                L[i][j] = L[i][j - <span class="number">1</span>];</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">//预处理R</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = M - <span class="number">1</span>; j >= <span class="number">1</span>; j--) {</span><br><span class="line">            <span class="keyword">if</span> (f[i][j + <span class="number">1</span>] != f[i][j]) {</span><br><span class="line">                R[i][j] = R[i][j + <span class="number">1</span>];</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= M; j++) {</span><br><span class="line">            <span class="keyword">if</span> (f[i][j] != f[i - <span class="number">1</span>][j] && i != <span class="number">1</span>) {</span><br><span class="line">                up[i][j] = up[i - <span class="number">1</span>][j] + <span class="number">1</span>;</span><br><span class="line">                L[i][j] = max(L[i - <span class="number">1</span>][j], L[i][j]);</span><br><span class="line">                R[i][j] = min(R[i - <span class="number">1</span>][j], R[i][j]);</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">int</span> width = R[i][j] - L[i][j] + <span class="number">1</span>;</span><br><span class="line">            rec_ans = max(rec_ans, width * up[i][j]);</span><br><span class="line">            square_ans = max(square_ans, min(width, up[i][j]) * min(width, up[i][j]));</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span> << square_ans << <span class="built_in">endl</span></span><br><span class="line">         << rec_ans << <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="3、P1233-木棍加工"><a href="#3、P1233-木棍加工" class="headerlink" title="3、P1233 木棍加工"></a><a href="https://www.luogu.org/problemnew/show/P1233" target="_blank" rel="noopener">3、P1233 木棍加工</a></h3><p>R:模拟+Dilworth定理+单调上升子序列</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">5005</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 手动模拟一下，保证单调性，先按照l降序排列</span></span><br><span class="line"><span class="comment"> * l相同按照w降序排列，由dilworth定理可知，求w的最长上升子序列长度即可。</span></span><br><span class="line"><span class="comment"> * 求最长上升子序列可以用O(nlog2N)算法，但是我太懒了没用，因为N太小了只有5000.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> {</span></span><br><span class="line">    <span class="keyword">int</span> l, w;</span><br><span class="line">};</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(<span class="keyword">const</span> Node& a, <span class="keyword">const</span> Node& b)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">if</span> (a.l == b.l)</span><br><span class="line">        <span class="keyword">return</span> a.w > b.w;</span><br><span class="line">    <span class="keyword">return</span> a.l > b.l;</span><br><span class="line">}</span><br><span class="line">Node nodes[maxn];</span><br><span class="line"><span class="keyword">int</span> N, dp[maxn], ans = <span class="number">1</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">cin</span> >> N;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="built_in">cin</span> >> nodes[i].l >> nodes[i].w;</span><br><span class="line">    }</span><br><span class="line">    sort(nodes + <span class="number">1</span>, nodes + <span class="number">1</span> + N, cmp);</span><br><span class="line">    <span class="comment">//O(N2)</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        dp[i] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j < i; j++) {</span><br><span class="line">            <span class="keyword">if</span> (nodes[j].w < nodes[i].w) {</span><br><span class="line">                dp[i] = max(dp[i], dp[j] + <span class="number">1</span>);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        ans = max(ans, dp[i]);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span> << ans << <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="4、P1270-“访问”美术馆"><a href="#4、P1270-“访问”美术馆" class="headerlink" title="4、P1270 “访问”美术馆"></a><a href="https://www.luogu.org/problemnew/show/P1270" target="_blank" rel="noopener">4、P1270 “访问”美术馆</a></h3><p>R:树形dp入门题,注意走回来的时间，因此时间*2</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 如果是0，则分为两个走廊。注意走回来的时间也要算进去</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> {</span></span><br><span class="line">    <span class="keyword">int</span> l, r, time, num;</span><br><span class="line">};</span><br><span class="line">Node nodes[<span class="number">105</span>];</span><br><span class="line"><span class="keyword">int</span> cnt, S, dp[<span class="number">105</span>][<span class="number">605</span>],root;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span>& x)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">int</span> t, n;</span><br><span class="line">    <span class="built_in">cin</span> >> t >> n;</span><br><span class="line">    x = ++cnt;</span><br><span class="line">    <span class="keyword">if</span> (n != <span class="number">0</span>) {</span><br><span class="line">        nodes[x].num = n, nodes[x].time = <span class="number">2</span> * t;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    nodes[x].time = <span class="number">2</span> * t;</span><br><span class="line">    build(nodes[x].l);</span><br><span class="line">    build(nodes[x].r);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="comment">//叶子节点</span></span><br><span class="line">    <span class="keyword">if</span> (nodes[x].l == <span class="number">0</span>) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = nodes[x].time; j <= S; j++) {</span><br><span class="line">            dp[x][j] = max((j - nodes[x].time) / <span class="number">5</span>, <span class="number">0</span>);</span><br><span class="line">            <span class="keyword">if</span> (dp[x][j] > nodes[x].num) {</span><br><span class="line">                dp[x][j] = nodes[x].num;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    dfs(nodes[x].l);</span><br><span class="line">    dfs(nodes[x].r);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = nodes[x].time; i <= S; i++) {</span><br><span class="line">        <span class="keyword">int</span> rest = i - nodes[x].time;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j <= rest; j++) {</span><br><span class="line">            dp[x][i] = max(dp[x][i], dp[nodes[x].l][j] + dp[nodes[x].r][rest - j]);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">cin</span> >> S;</span><br><span class="line">    S--;</span><br><span class="line">    build(root);</span><br><span class="line">    dfs(<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">cout</span> << dp[<span class="number">1</span>][S] << <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="5、P1271-聚会的快乐"><a href="#5、P1271-聚会的快乐" class="headerlink" title="5、P1271 聚会的快乐"></a><a href="https://www.luogu.org/problemnew/show/P1271" target="_blank" rel="noopener">5、P1271 聚会的快乐</a></h3><p>R:树形dp</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="built_in">vector</span><<span class="keyword">int</span>> son[<span class="number">110</span>];</span><br><span class="line"><span class="built_in">map</span><<span class="built_in">string</span>, <span class="keyword">int</span>> id;</span><br><span class="line"><span class="keyword">int</span> n, st, f[<span class="number">110</span>][<span class="number">2</span>];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> {</span></span><br><span class="line">    <span class="built_in">string</span> s, fa;</span><br><span class="line">    <span class="keyword">int</span> w;</span><br><span class="line">} a[<span class="number">110</span>];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dp</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    f[x][<span class="number">0</span>] = <span class="number">0</span>, f[x][<span class="number">1</span>] = a[x].w;</span><br><span class="line">    <span class="keyword">if</span> (son[x].size() == <span class="number">0</span>) {</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i < son[x].size(); i++) {</span><br><span class="line">        dp(son[x][i]);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i < son[x].size(); i++) {</span><br><span class="line">        sum += max(f[son[x][i]][<span class="number">0</span>], f[son[x][i]][<span class="number">1</span>]);</span><br><span class="line">    }</span><br><span class="line">    f[x][<span class="number">0</span>] = sum;</span><br><span class="line">    sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i < son[x].size(); i++) {</span><br><span class="line">        sum += f[son[x][i]][<span class="number">0</span>];</span><br><span class="line">    }</span><br><span class="line">    f[x][<span class="number">1</span>] += sum;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span> >> n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++)</span><br><span class="line">        <span class="built_in">cin</span> >> a[i].s >> a[i].w >> a[i].fa, id[a[i].s] = i;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++)</span><br><span class="line">        son[id[a[i].fa]].push_back(i);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= n; i++)</span><br><span class="line">        <span class="keyword">if</span> (!id[a[i].fa]) {</span><br><span class="line">            st = i;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        }</span><br><span class="line">    dp(st);</span><br><span class="line">    <span class="built_in">cout</span> << max(f[st][<span class="number">0</span>], f[st][<span class="number">1</span>])<<<span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="6、P1273-有线电视网"><a href="#6、P1273-有线电视网" class="headerlink" title="6、P1273 有线电视网"></a><a href="https://www.luogu.org/problemnew/show/P1273" target="_blank" rel="noopener">6、P1273 有线电视网</a></h3><p>R:树状背包,滚动数组,dp[v][k]表示v节点为k个用户提供服务的最大收益。<br>dp[v][k] = max(dp[v][k],dp[v][k-j] + dp[son][j]-cost)(son为v的某个子节点)<br>三维数组时dp[i][v][k]表示v的前i棵子树选择k个节点的最大收益<br>dp[i][v][k] = max(dp[i-1][v][k-j]+dp[son的总儿子数][son][j]-cost,dp[i-1][v][k]),因此只需要枚举k时由大到小枚举，就可以节省一维的空间。</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">3000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> dp[maxn][maxn], pay[maxn], tot, N, M, du[maxn];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> {</span></span><br><span class="line">    <span class="keyword">int</span> len, v;</span><br><span class="line">    Node* next;</span><br><span class="line">};</span><br><span class="line">Node *h[maxn], pool[maxn];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">add_edge</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v, <span class="keyword">int</span> len)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    Node* p = &pool[tot++];</span><br><span class="line">    p->v = v, p->len = len, p->next = h[u], h[u] = p;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">if</span> (h[x] == <span class="literal">NULL</span>) {</span><br><span class="line">        dp[x][<span class="number">1</span>] = pay[x];</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">memset</span>(dp[x], ~<span class="number">0x3f</span>, <span class="keyword">sizeof</span>(dp[x]));</span><br><span class="line">    dp[x][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (Node* p = h[x]; p; p = p->next) {</span><br><span class="line">        <span class="keyword">int</span> v = p->v;</span><br><span class="line">        <span class="keyword">int</span> t = dfs(v);</span><br><span class="line">        sum += t;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = sum; i >= <span class="number">0</span>; i--) {</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= t; j++) {</span><br><span class="line">                <span class="keyword">if</span> (i >= j) {</span><br><span class="line">                    dp[x][i] = max(dp[x][i], dp[v][j] + dp[x][i - j] - p->len);</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">cin</span> >> N >> M;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N - M; i++) {</span><br><span class="line">        <span class="keyword">int</span> K;</span><br><span class="line">        <span class="built_in">cin</span> >> K;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= K; j++) {</span><br><span class="line">            <span class="keyword">int</span> a, c;</span><br><span class="line">            <span class="built_in">cin</span> >> a >> c;</span><br><span class="line">            add_edge(i, a, c);</span><br><span class="line">            du[c]++;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = N - M + <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="built_in">cin</span> >> pay[i];</span><br><span class="line">    }</span><br><span class="line">    dfs(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = M; j >= <span class="number">0</span>; j--) {</span><br><span class="line">        <span class="keyword">if</span> (dp[<span class="number">1</span>][j] >= <span class="number">0</span>) {</span><br><span class="line">            <span class="built_in">cout</span> << j << <span class="built_in">endl</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;常规题&quot;&gt;&lt;a href=&quot;#常规题&quot; class=&quot;headerlink&quot; title=&quot;常规题&quot;&gt;&lt;/a&gt;常规题&lt;/h2&gt;&lt;h3 id=&quot;1、P1216-IOI1994-USACO1-5-数字三角形-Number-Triangles&quot;&gt;&lt;a href=&quot;#1、
      
    
    </summary>
    
      <category term="Konjak Records" scheme="http://yoursite.com/categories/Konjak-Records/"/>
    
    
      <category term="动态规划" scheme="http://yoursite.com/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
    
      <category term="悬线法" scheme="http://yoursite.com/tags/%E6%82%AC%E7%BA%BF%E6%B3%95/"/>
    
      <category term="Dilworth定理" scheme="http://yoursite.com/tags/Dilworth%E5%AE%9A%E7%90%86/"/>
    
      <category term="树形dp" scheme="http://yoursite.com/tags/%E6%A0%91%E5%BD%A2dp/"/>
    
  </entry>
  
  <entry>
    <title>Konjak Record——2019.05.06</title>
    <link href="http://yoursite.com/2019/05/06/Algorithm0506/"/>
    <id>http://yoursite.com/2019/05/06/Algorithm0506/</id>
    <published>2019-05-06T10:32:45.766Z</published>
    <updated>2019-05-06T10:51:42.086Z</updated>
    
    <content type="html"><![CDATA[<h2 id="常规题"><a href="#常规题" class="headerlink" title="常规题"></a>常规题</h2><h3 id="1、P1057-传球游戏"><a href="#1、P1057-传球游戏" class="headerlink" title="1、P1057 传球游戏"></a><a href="https://www.luogu.org/problemnew/show/P1057" target="_blank" rel="noopener">1、P1057 传球游戏</a></h3><p>R:水题，思路很好想。</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> dp[<span class="number">35</span>][<span class="number">35</span>], N, M;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">cin</span> >> N >> M;</span><br><span class="line">    dp[<span class="number">1</span>][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= M; i++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= N; j++) {</span><br><span class="line">            <span class="keyword">int</span> tmp = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">if</span> (j + <span class="number">1</span> > N) {</span><br><span class="line">                tmp += dp[<span class="number">1</span>][i - <span class="number">1</span>];</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                tmp += dp[j + <span class="number">1</span>][i - <span class="number">1</span>];</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (j - <span class="number">1</span> < <span class="number">1</span>) {</span><br><span class="line">                tmp += dp[N][i - <span class="number">1</span>];</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                tmp += dp[j - <span class="number">1</span>][i - <span class="number">1</span>];</span><br><span class="line">            }</span><br><span class="line">            dp[j][i] = tmp;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span> << dp[<span class="number">1</span>][M] << <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="2、P1077-摆花"><a href="#2、P1077-摆花" class="headerlink" title="2、P1077 摆花"></a><a href="https://www.luogu.org/problemnew/show/P1077" target="_blank" rel="noopener">2、P1077 摆花</a></h3><p>R:水题，思路很好想，我天天只会刷水题，其他的题都不会。</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> mod = <span class="number">1000007</span>;</span><br><span class="line"><span class="keyword">int</span> N, M, dp[<span class="number">105</span>], f[<span class="number">105</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">cin</span> >> N >> M;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="built_in">cin</span> >> f[i];</span><br><span class="line">    }</span><br><span class="line">    dp[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = M; j >= <span class="number">0</span>; j--) {</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">1</span>; k <= f[i] && j - k >= <span class="number">0</span>; k++) {</span><br><span class="line">                dp[j] = (dp[j - k] + dp[j]) % mod;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span> << dp[M] << <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="3、P1115-最大子段和"><a href="#3、P1115-最大子段和" class="headerlink" title="3、P1115 最大子段和"></a><a href="https://www.luogu.org/problemnew/show/P1115" target="_blank" rel="noopener">3、P1115 最大子段和</a></h3><p>R:裸的最大子段和，很简单。</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">200000</span> + <span class="number">10</span>, inf = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">int</span> N;</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> dp[maxn], f[maxn], ans = -inf;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">cin</span> >> N;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="built_in">cin</span> >> f[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        dp[i] = max(dp[i - <span class="number">1</span>] + f[i], f[i]);</span><br><span class="line">        ans = max(ans, dp[i]);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span> << ans << <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="4、P1130-红牌"><a href="#4、P1130-红牌" class="headerlink" title="4、P1130 红牌"></a><a href="https://www.luogu.org/problemnew/show/P1130" target="_blank" rel="noopener">4、P1130 红牌</a></h3><p>R:水</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">2005</span>, inf = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">int</span> dp[maxn][maxn], chess[maxn][maxn], N, M;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">cin</span> >> N >> M;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= M; i++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= N; j++) {</span><br><span class="line">            <span class="built_in">cin</span> >> chess[i][j];</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= M; j++) {</span><br><span class="line">            <span class="keyword">int</span> tmp = dp[i - <span class="number">1</span>][j];</span><br><span class="line">            <span class="keyword">if</span> (j - <span class="number">1</span> == <span class="number">0</span>) {</span><br><span class="line">                tmp = min(dp[i - <span class="number">1</span>][M], tmp);</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                tmp = min(dp[i - <span class="number">1</span>][j - <span class="number">1</span>], tmp);</span><br><span class="line">            }</span><br><span class="line">            tmp += chess[j][i];</span><br><span class="line">            dp[i][j] = tmp;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> ans = inf;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= M; i++) {</span><br><span class="line">        ans = min(ans, dp[N][i]);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span> << ans << <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="错题"><a href="#错题" class="headerlink" title="错题"></a>错题</h2><h3 id="5、P1103-书本整理"><a href="#5、P1103-书本整理" class="headerlink" title="5、P1103 书本整理"></a><a href="https://www.luogu.org/problemnew/show/P1103" target="_blank" rel="noopener">5、P1103 书本整理</a></h3><p>R:dp[i][k]表示前i个删除k个，前必须保留i的最小不整齐度。dp[i][k] = min(dp[j][k-(i-j-1)]+abs(w[i]-w[j]),注意细节:dp[i][i-1] = 0</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> dp[<span class="number">105</span>][<span class="number">105</span>], N, K, ans = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> {</span></span><br><span class="line">    <span class="keyword">int</span> h, w;</span><br><span class="line">};</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(<span class="keyword">const</span> Node& a, <span class="keyword">const</span> Node& b)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">return</span> a.h < b.h;</span><br><span class="line">}</span><br><span class="line">Node nodes[<span class="number">105</span>];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">Abs</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">return</span> x > <span class="number">0</span> ? x : -x;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">Min</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">return</span> a > b ? b : a;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">cin</span> >> N >> K;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="built_in">cin</span> >> nodes[i].h >> nodes[i].w;</span><br><span class="line">    }</span><br><span class="line">    sort(nodes + <span class="number">1</span>, nodes + <span class="number">1</span> + N, cmp);</span><br><span class="line">    <span class="built_in">memset</span>(dp, <span class="number">0x3f</span>, <span class="keyword">sizeof</span>(dp));</span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j <= K; j++) {</span><br><span class="line">            <span class="comment">//前i个取走j个，而且第i个必须留下。</span></span><br><span class="line">            <span class="keyword">if</span> (i - <span class="number">1</span> < j) {</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (i - <span class="number">1</span> == j) {</span><br><span class="line">                dp[i][j] = <span class="number">0</span>;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k = i - <span class="number">1</span>; k >= <span class="number">1</span>; k--) {</span><br><span class="line">                <span class="keyword">if</span> (k > j - (i - k - <span class="number">1</span>) && j - (i - k - <span class="number">1</span>) >= <span class="number">0</span>) {</span><br><span class="line">                    dp[i][j] = Min(dp[i][j], dp[k][j - (i - k - <span class="number">1</span>)] + Abs(nodes[i].w - nodes[k].w));</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="keyword">if</span> (K - (N - i) >= <span class="number">0</span>) {</span><br><span class="line">            ans = min(dp[i][K - (N - i)], ans);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span> << ans << <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="6、P1108-低价购买"><a href="#6、P1108-低价购买" class="headerlink" title="6、P1108 低价购买"></a><a href="https://www.luogu.org/problemnew/show/P1108" target="_blank" rel="noopener">6、P1108 低价购买</a></h3><p>R:N<=5000,求最长下降子序列用O(N^2)算法没有问题。求不重复的方案数：g[i]表示以i结尾的子串方案数，若f[j]+1=f[i]且a[j]>a[i],则g[i] += g[j],若f[j]=1时则g[j]=1,最终统计时将f[i]=mx的g[i]加起来即可。但是这里面有重复的部分，当f[i]==f[j]且a[i]==a[j]时，需要将这部分去掉。</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">5005</span>;</span><br><span class="line"><span class="keyword">int</span> N, f[maxn];</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> dp[maxn], g[maxn];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">cin</span> >> N;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="built_in">cin</span> >> f[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">//O(N^2)，N小于等于5000没问题</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        dp[i] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= i - <span class="number">1</span>; j++) {</span><br><span class="line">            <span class="keyword">if</span> (f[j] > f[i]) {</span><br><span class="line">                dp[i] = max(dp[j] + <span class="number">1</span>, dp[i]);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="keyword">if</span> (dp[i] == <span class="number">1</span>) {</span><br><span class="line">            g[i] = <span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= i - <span class="number">1</span>; j++) {</span><br><span class="line">            <span class="keyword">if</span> (dp[j] == dp[i] && f[j] == f[i]) {</span><br><span class="line">                g[j] = <span class="number">0</span>;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (dp[j] + <span class="number">1</span> == dp[i] && f[j] > f[i]) {</span><br><span class="line">                g[i] += g[j];</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> ans = <span class="number">0</span>, mx = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        mx = max(dp[i], mx);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="keyword">if</span> (dp[i] == mx) {</span><br><span class="line">            ans += g[i];</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span> << mx << <span class="string">" "</span> << ans << <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;常规题&quot;&gt;&lt;a href=&quot;#常规题&quot; class=&quot;headerlink&quot; title=&quot;常规题&quot;&gt;&lt;/a&gt;常规题&lt;/h2&gt;&lt;h3 id=&quot;1、P1057-传球游戏&quot;&gt;&lt;a href=&quot;#1、P1057-传球游戏&quot; class=&quot;headerlink&quot; titl
      
    
    </summary>
    
      <category term="Konjak Records" scheme="http://yoursite.com/categories/Konjak-Records/"/>
    
    
      <category term="动态规划" scheme="http://yoursite.com/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
    
  </entry>
  
  <entry>
    <title>Konjak Record——2019.05.02</title>
    <link href="http://yoursite.com/2019/05/02/Algorithm0502/"/>
    <id>http://yoursite.com/2019/05/02/Algorithm0502/</id>
    <published>2019-05-02T04:01:40.078Z</published>
    <updated>2019-05-02T13:12:31.019Z</updated>
    
    <content type="html"><![CDATA[<h2 id="模板题"><a href="#模板题" class="headerlink" title="模板题"></a>模板题</h2><h3 id="P3834-【模板】可持久化线段树-1（主席树）"><a href="#P3834-【模板】可持久化线段树-1（主席树）" class="headerlink" title="P3834 【模板】可持久化线段树 1（主席树）"></a><a href="https://www.luogu.org/problemnew/show/P3834" target="_blank" rel="noopener">P3834 【模板】可持久化线段树 1（主席树）</a></h3><p>R:求区间第k大，主席树方法，注意离散化的方法，以及二分查找。</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">2e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> root[maxn], N, Q, f[maxn], cnt;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> {</span></span><br><span class="line">    <span class="keyword">int</span> l, r, sum;</span><br><span class="line">};</span><br><span class="line">Node T[maxn * <span class="number">40</span>];</span><br><span class="line"><span class="built_in">vector</span><<span class="keyword">int</span>> v;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">getid</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">return</span> lower_bound(v.begin(), v.end(), x) - v.begin() + <span class="number">1</span>;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">1</span>, r = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> c = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(c)) {</span><br><span class="line">        <span class="keyword">if</span> (c == <span class="string">'-'</span>)</span><br><span class="line">            f = <span class="number">-1</span>;</span><br><span class="line">        c = getchar();</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(c)) {</span><br><span class="line">        r = <span class="number">10</span> * r + c - <span class="string">'0'</span>;</span><br><span class="line">        c = getchar();</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> f * r;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> pos, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span>& x, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    T[++cnt] = T[y], x = cnt;</span><br><span class="line">    T[cnt].sum += <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (l == r) {</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> mid = (l + r) >> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (pos <= mid) {</span><br><span class="line">        update(pos, l, mid, T[x].l, T[y].l);</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        update(pos, mid + <span class="number">1</span>, r, T[x].r, T[y].r);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> k)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">if</span> (l == r) {</span><br><span class="line">        <span class="keyword">return</span> l;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> sum = T[T[y].l].sum - T[T[x].l].sum;</span><br><span class="line">    <span class="keyword">int</span> mid = (l + r) >> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (sum >= k) {</span><br><span class="line">        <span class="keyword">return</span> query(l, mid, T[x].l, T[y].l, k);</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        <span class="keyword">return</span> query(mid + <span class="number">1</span>, r, T[x].r, T[y].r, k - sum);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    N = read(), Q = read();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        f[i] = read();</span><br><span class="line">        v.push_back(f[i]);</span><br><span class="line">    }</span><br><span class="line">    sort(v.begin(), v.end());</span><br><span class="line">    v.erase(unique(v.begin(), v.end()), v.end());</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="keyword">int</span> id = getid(f[i]);</span><br><span class="line">        update(id, <span class="number">1</span>, N, root[i], root[i - <span class="number">1</span>]);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= Q; i++) {</span><br><span class="line">        <span class="keyword">int</span> x, y, k;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>, &x, &y, &k);</span><br><span class="line">        <span class="keyword">int</span> q = query(<span class="number">1</span>, N, root[x - <span class="number">1</span>], root[y], k);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, v[q - <span class="number">1</span>]);</span><br><span class="line">    }</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="P3372-【模板】线段树-1"><a href="#P3372-【模板】线段树-1" class="headerlink" title="P3372 【模板】线段树 1"></a><a href="https://www.luogu.org/problemnew/show/P3834" target="_blank" rel="noopener">P3372 【模板】线段树 1</a></h3><p>R:线段树区间更新，模板题</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">100000</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> seg[maxn * <span class="number">4</span>], add[maxn * <span class="number">4</span>];</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> f[maxn], N, M;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> cur)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">if</span> (l == r) {</span><br><span class="line">        seg[cur] = f[l];</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> mid = (l + r) / <span class="number">2</span>;</span><br><span class="line">    build(l, mid, cur << <span class="number">1</span>);</span><br><span class="line">    build(mid + <span class="number">1</span>, r, cur << <span class="number">1</span> | <span class="number">1</span>);</span><br><span class="line">    seg[cur] = seg[cur << <span class="number">1</span>] + seg[cur << <span class="number">1</span> | <span class="number">1</span>];</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">pushdown</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> cur)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">if</span> (add[cur]) {</span><br><span class="line">        <span class="keyword">int</span> mid = (l + r) / <span class="number">2</span>;</span><br><span class="line">        seg[cur << <span class="number">1</span>] += (mid - l + <span class="number">1</span>) * add[cur];</span><br><span class="line">        seg[cur << <span class="number">1</span> | <span class="number">1</span>] += (r - mid) * add[cur];</span><br><span class="line">        add[cur << <span class="number">1</span>] += add[cur];</span><br><span class="line">        add[cur << <span class="number">1</span> | <span class="number">1</span>] += add[cur];</span><br><span class="line">        add[cur] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> L, <span class="keyword">int</span> R, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> k, <span class="keyword">int</span> cur)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">if</span> (l >= L && r <= R) {</span><br><span class="line">        add[cur] += k;</span><br><span class="line">        seg[cur] += k * (r - l + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    pushdown(l, r, cur);</span><br><span class="line">    <span class="keyword">int</span> mid = (l + r) >> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (mid >= L) {</span><br><span class="line">        update(L, R, l, mid, k, cur << <span class="number">1</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (mid < R) {</span><br><span class="line">        update(L, R, mid + <span class="number">1</span>, r, k, cur << <span class="number">1</span> | <span class="number">1</span>);</span><br><span class="line">    }</span><br><span class="line">    seg[cur] = seg[cur << <span class="number">1</span>] + seg[cur << <span class="number">1</span> | <span class="number">1</span>];</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="keyword">long</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> L, <span class="keyword">int</span> R, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> cur)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">if</span> (l >= L && r <= R) {</span><br><span class="line">        <span class="keyword">return</span> seg[cur];</span><br><span class="line">    }</span><br><span class="line">    pushdown(l, r, cur);</span><br><span class="line">    <span class="keyword">int</span> mid = (l + r) >> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (mid >= L) {</span><br><span class="line">        sum += query(L, R, l, mid, cur << <span class="number">1</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (mid < R) {</span><br><span class="line">        sum += query(L, R, mid + <span class="number">1</span>, r, cur << <span class="number">1</span> | <span class="number">1</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cin</span> >> N >> M;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="built_in">cin</span> >> f[i];</span><br><span class="line">    }</span><br><span class="line">    build(<span class="number">1</span>, N, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= M; i++) {</span><br><span class="line">        <span class="keyword">int</span> w, x, y, k;</span><br><span class="line">        <span class="built_in">cin</span> >> w >> x >> y;</span><br><span class="line">        <span class="keyword">if</span> (w == <span class="number">1</span>) {</span><br><span class="line">            <span class="built_in">cin</span> >> k;</span><br><span class="line">            update(x, y, <span class="number">1</span>, N, k, <span class="number">1</span>);</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            <span class="keyword">long</span> <span class="keyword">long</span> q = query(x, y, <span class="number">1</span>, N, <span class="number">1</span>);</span><br><span class="line">            <span class="built_in">cout</span> << q << <span class="built_in">endl</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="P3919-【模板】可持久化数组（可持久化线段树-平衡树）"><a href="#P3919-【模板】可持久化数组（可持久化线段树-平衡树）" class="headerlink" title="P3919 【模板】可持久化数组（可持久化线段树/平衡树）"></a><a href="https://www.luogu.org/problemnew/show/P3919" target="_blank" rel="noopener">P3919 【模板】可持久化数组（可持久化线段树/平衡树）</a></h3><p>R:主席树,注意回溯时全局变量的变化，尤其是build那里。</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1e6</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> root[maxn], cnt, N, M;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> {</span></span><br><span class="line">    <span class="keyword">int</span> l, r, v;</span><br><span class="line">};</span><br><span class="line">Node T[maxn * <span class="number">30</span>];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span>& x)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="comment">//注意这里cnt是全局变量，回溯时会改变，所以不能用T[cnt],要用T[x]</span></span><br><span class="line">    x = ++cnt;</span><br><span class="line">    <span class="keyword">if</span> (l == r) {</span><br><span class="line">        <span class="built_in">cin</span> >> T[x].v;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> mid = (l + r) >> <span class="number">1</span>;</span><br><span class="line">    build(l, mid, T[x].l);</span><br><span class="line">    build(mid + <span class="number">1</span>, r, T[x].r);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> pos, <span class="keyword">int</span> v, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span>& x, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    T[++cnt] = T[y], x = cnt;</span><br><span class="line">    <span class="keyword">if</span> (l == r) {</span><br><span class="line">        T[x].v = v;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> mid = (l + r) >> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (pos <= mid) {</span><br><span class="line">        update(pos, v, l, mid, T[x].l, T[y].l);</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        update(pos, v, mid + <span class="number">1</span>, r, T[x].r, T[y].r);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> pos, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> cur)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">if</span> (l == r) {</span><br><span class="line">        <span class="keyword">return</span> T[cur].v;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> mid = (l + r) >> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (pos <= mid) {</span><br><span class="line">        <span class="keyword">return</span> query(pos, l, mid, T[cur].l);</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        <span class="keyword">return</span> query(pos, mid + <span class="number">1</span>, r, T[cur].r);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span> >> N >> M;</span><br><span class="line">    build(<span class="number">1</span>, N, root[<span class="number">0</span>]);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= M; i++) {</span><br><span class="line">        <span class="keyword">int</span> v, w, loc, u;</span><br><span class="line">        <span class="built_in">cin</span> >> v >> w >> loc;</span><br><span class="line">        <span class="keyword">if</span> (w == <span class="number">1</span>) {</span><br><span class="line">            <span class="built_in">cin</span> >> u;</span><br><span class="line">            update(loc, u, <span class="number">1</span>, N, root[i], root[v]);</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            root[i] = root[v];</span><br><span class="line">            <span class="keyword">int</span> q = query(loc, <span class="number">1</span>, N, root[i]);</span><br><span class="line">            <span class="built_in">cout</span> << q << <span class="built_in">endl</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="常规题"><a href="#常规题" class="headerlink" title="常规题"></a>常规题</h2><h3 id="P1816-忠诚"><a href="#P1816-忠诚" class="headerlink" title="P1816 忠诚"></a><a href="https://www.luogu.org/problemnew/show/P1816" target="_blank" rel="noopener">P1816 忠诚</a></h3><p>R:简单的线段树应用，水。</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1e6</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> N, M, cnt, root;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> {</span></span><br><span class="line">    <span class="keyword">int</span> l, r, mn;</span><br><span class="line">};</span><br><span class="line">Node T[maxn << <span class="number">2</span>];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span>& x)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    x = ++cnt;</span><br><span class="line">    <span class="keyword">if</span> (l == r) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &T[x].mn);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> mid = (l + r) >> <span class="number">1</span>;</span><br><span class="line">    build(l, mid, T[x].l);</span><br><span class="line">    build(mid + <span class="number">1</span>, r, T[x].r);</span><br><span class="line">    T[x].mn = min(T[T[x].l].mn, T[T[x].r].mn);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> L, <span class="keyword">int</span> R, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> cur)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">if</span> (l >= L && r <= R) {</span><br><span class="line">        <span class="keyword">return</span> T[cur].mn;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> mid = (l + r) >> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> mn = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line">    <span class="keyword">if</span> (mid >= L) {</span><br><span class="line">        mn = min(query(L, R, l, mid, T[cur].l), mn);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (mid < R) {</span><br><span class="line">        mn = min(query(L, R, mid + <span class="number">1</span>, r, T[cur].r), mn);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> mn;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &N, &M);</span><br><span class="line">    build(<span class="number">1</span>, N, root);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= M; i++) {</span><br><span class="line">        <span class="keyword">int</span> x, y;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &x, &y);</span><br><span class="line">        <span class="keyword">int</span> q = query(x, y, <span class="number">1</span>, N, root);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d "</span>, q);</span><br><span class="line">    }</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;模板题&quot;&gt;&lt;a href=&quot;#模板题&quot; class=&quot;headerlink&quot; title=&quot;模板题&quot;&gt;&lt;/a&gt;模板题&lt;/h2&gt;&lt;h3 id=&quot;P3834-【模板】可持久化线段树-1（主席树）&quot;&gt;&lt;a href=&quot;#P3834-【模板】可持久化线段树-1（主席树）&quot;
      
    
    </summary>
    
      <category term="Konjak Records" scheme="http://yoursite.com/categories/Konjak-Records/"/>
    
    
      <category term="线段树" scheme="http://yoursite.com/tags/%E7%BA%BF%E6%AE%B5%E6%A0%91/"/>
    
      <category term="主席树" scheme="http://yoursite.com/tags/%E4%B8%BB%E5%B8%AD%E6%A0%91/"/>
    
  </entry>
  
  <entry>
    <title>Konjak Record——2019.05.01</title>
    <link href="http://yoursite.com/2019/05/01/Algorithm0501/"/>
    <id>http://yoursite.com/2019/05/01/Algorithm0501/</id>
    <published>2019-05-01T02:52:51.729Z</published>
    <updated>2019-05-01T11:13:20.105Z</updated>
    
    <content type="html"><![CDATA[<h2 id="常规题"><a href="#常规题" class="headerlink" title="常规题"></a>常规题</h2><h3 id="1、P1177-【模板】快速排序"><a href="#1、P1177-【模板】快速排序" class="headerlink" title="1、P1177 【模板】快速排序"></a><a href="https://www.luogu.org/problemnew/show/P1177" target="_blank" rel="noopener">1、P1177 【模板】快速排序</a></h3><p>分析：要求写快速排序，我很懒，就直接调用了sort函数(其实是不会)。</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">100000</span>+<span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> f[maxn],N;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&N);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span> ; i <= N ; i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&f[i]);</span><br><span class="line">    }</span><br><span class="line">    sort(f+<span class="number">1</span>,f+<span class="number">1</span>+N);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span> ; i <= N ; i++){</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d "</span>,f[i]);</span><br><span class="line">    }</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><a id="more"></a><h3 id="2、P1059-明明的随机数"><a href="#2、P1059-明明的随机数" class="headerlink" title="2、P1059 明明的随机数"></a><a href="https://www.luogu.org/problemnew/show/P1059" target="_blank" rel="noopener">2、P1059 明明的随机数</a></h3><p>分析：水</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> cache[<span class="number">1001</span>],N;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&N);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span> ; i <= N ; i++){</span><br><span class="line">        <span class="keyword">int</span> tmp;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&tmp);</span><br><span class="line">        cache[tmp]++;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span> ; i <= <span class="number">1000</span> ; i++){</span><br><span class="line">        <span class="keyword">if</span>(cache[i])sum++;</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,sum);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span> ; i <= <span class="number">1000</span> ; i++){</span><br><span class="line">        <span class="keyword">if</span>(cache[i])<span class="built_in">printf</span>(<span class="string">"%d "</span>,i);</span><br><span class="line">    }</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="3、P1068-分数线划定"><a href="#3、P1068-分数线划定" class="headerlink" title="3、P1068 分数线划定"></a><a href="https://www.luogu.org/problemnew/show/P1068" target="_blank" rel="noopener">3、P1068 分数线划定</a></h3><p>分析：水,题意不清，语文不好看不懂。</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">5005</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> score,id;</span><br><span class="line">};</span><br><span class="line">Node nodes[maxn];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(<span class="keyword">const</span> Node &a, <span class="keyword">const</span> Node &b)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(a.score == b.score){</span><br><span class="line">        <span class="keyword">return</span> a.id < b.id;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> a.score > b.score;</span><br><span class="line">}</span><br><span class="line"><span class="keyword">int</span> N, M;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&N, &M);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span> ; i <= N ; i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &nodes[i].id, &nodes[i].score);</span><br><span class="line">    }</span><br><span class="line">    M = <span class="keyword">int</span>(M*<span class="number">1.5</span>);</span><br><span class="line">    sort(nodes+<span class="number">1</span>,nodes+<span class="number">1</span>+N,cmp);</span><br><span class="line">    <span class="keyword">int</span> score = nodes[M].score,sum=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span> ; i <= N ; i++){</span><br><span class="line">        <span class="keyword">if</span>(nodes[i].score>=score){</span><br><span class="line">            sum++;</span><br><span class="line">        }<span class="keyword">else</span>{</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d %d\n"</span>,score,sum);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span> ; i <= N ; i++){</span><br><span class="line">        <span class="keyword">if</span>(nodes[i].score>=score){</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d %d\n"</span>,nodes[i].id,nodes[i].score);</span><br><span class="line">        }<span class="keyword">else</span>{</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="4、P1583-魔法照片"><a href="#4、P1583-魔法照片" class="headerlink" title="4、P1583 魔法照片"></a><a href="https://www.luogu.org/problemnew/show/P1583" target="_blank" rel="noopener">4、P1583 魔法照片</a></h3><p>分析：水</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">20000</span>+<span class="number">10</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> id,w;</span><br><span class="line">};</span><br><span class="line"><span class="keyword">int</span> N,K,E[<span class="number">11</span>];</span><br><span class="line">Node nodes[maxn];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(<span class="keyword">const</span> Node&a,<span class="keyword">const</span> Node&b)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(a.w==b.w)<span class="keyword">return</span> a.id < b.id;</span><br><span class="line">    <span class="keyword">return</span> a.w>b.w;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span>>>N>>K;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span> ; i <= <span class="number">10</span> ; i++){</span><br><span class="line">        <span class="built_in">cin</span>>>E[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span> ; i<=N;i++){</span><br><span class="line">        <span class="built_in">cin</span>>>nodes[i].w;</span><br><span class="line">        nodes[i].id=i;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    sort(nodes+<span class="number">1</span>,nodes+<span class="number">1</span>+N,cmp);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span> ; i <= N ; i++){</span><br><span class="line">        nodes[i].w += E[(i<span class="number">-1</span>)%<span class="number">10</span>+<span class="number">1</span>];</span><br><span class="line">    }</span><br><span class="line">    sort(nodes+<span class="number">1</span>,nodes+<span class="number">1</span>+N,cmp);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span> ;i <=K;i++){</span><br><span class="line">        <span class="built_in">cout</span><<nodes[i].id<<<span class="string">" "</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span><<<span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="5、P1051-谁拿了最多奖学金"><a href="#5、P1051-谁拿了最多奖学金" class="headerlink" title="5、P1051 谁拿了最多奖学金"></a><a href="https://www.luogu.org/problemnew/show/P1051" target="_blank" rel="noopener">5、P1051 谁拿了最多奖学金</a></h3><p>分析：水</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">string</span> mx=<span class="string">""</span>;</span><br><span class="line">    <span class="keyword">int</span> sm = <span class="number">0</span>,N,total=<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">cin</span>>>N;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span> ; i<=N;i++){</span><br><span class="line">        <span class="built_in">string</span> name;</span><br><span class="line">        <span class="keyword">int</span> self,shits,shitSci;</span><br><span class="line">        <span class="keyword">char</span> w,shitLeader;</span><br><span class="line">        <span class="built_in">cin</span>>>name>>self>>shits>>shitLeader>>w>>shitSci;</span><br><span class="line">        <span class="keyword">int</span> tmp = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(self><span class="number">80</span>&&shitSci>=<span class="number">1</span>){</span><br><span class="line">            tmp+=<span class="number">8000</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span>(self><span class="number">85</span>&&shits><span class="number">80</span>){</span><br><span class="line">            tmp+=<span class="number">4000</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span>(self><span class="number">90</span>){</span><br><span class="line">            tmp+=<span class="number">2000</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span>(w==<span class="string">'Y'</span>&&self><span class="number">85</span>){</span><br><span class="line">            tmp+=<span class="number">1000</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span>(shitLeader==<span class="string">'Y'</span>&&shits > <span class="number">80</span>){</span><br><span class="line">            tmp+=<span class="number">850</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span>(tmp>sm){</span><br><span class="line">            sm=tmp,mx=name;</span><br><span class="line">        }</span><br><span class="line">        total += tmp;</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span><<mx<<<span class="built_in">endl</span><<sm<<<span class="built_in">endl</span><<total<<<span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="6、P1093-奖学金"><a href="#6、P1093-奖学金" class="headerlink" title="6、P1093 奖学金"></a><a href="https://www.luogu.org/problemnew/show/P1093" target="_blank" rel="noopener">6、P1093 奖学金</a></h3><p>分析：水</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> chinese,math,english,id,sum;</span><br><span class="line">};</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(<span class="keyword">const</span> Node&a,<span class="keyword">const</span> Node&b)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(a.sum==b.sum){</span><br><span class="line">        <span class="keyword">if</span>(a.chinese==b.chinese){</span><br><span class="line">            <span class="keyword">return</span> a.id<b.id;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> a.chinese>b.chinese;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> a.sum>b.sum;</span><br><span class="line">}</span><br><span class="line">Node nodes[<span class="number">305</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> N;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&N);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span> ; i <= N ; i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>,&nodes[i].chinese,&nodes[i].math,&nodes[i].english);</span><br><span class="line">        nodes[i].id=i;</span><br><span class="line">        nodes[i].sum = nodes[i].chinese+nodes[i].math+nodes[i].english;</span><br><span class="line">    }</span><br><span class="line">    sort(nodes+<span class="number">1</span>,nodes+<span class="number">1</span>+N,cmp);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i= <span class="number">1</span> ; i<=<span class="number">5</span>;i++){</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d %d\n"</span>,nodes[i].id,nodes[i].sum);</span><br><span class="line">    }</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="错题"><a href="#错题" class="headerlink" title="错题"></a>错题</h2><h3 id="7、P1309-瑞士轮"><a href="#7、P1309-瑞士轮" class="headerlink" title="7、P1309 瑞士轮"></a><a href="https://www.luogu.org/problemnew/show/P1309" target="_blank" rel="noopener">7、P1309 瑞士轮</a></h3><p>分析：两个有序数组归并的复杂度为O(N),如果直接排序复杂度为O(NlogN)。</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> N,R,Q;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> score,id,ability;</span><br><span class="line">};</span><br><span class="line">Node nodes[<span class="number">200000</span>+<span class="number">10</span>],n1[<span class="number">100000</span>+<span class="number">10</span>],n2[<span class="number">100000</span>+<span class="number">10</span>];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(<span class="keyword">const</span> Node&a,<span class="keyword">const</span> Node&b)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(a.score==b.score){</span><br><span class="line">        <span class="keyword">return</span> a.id<b.id;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> a.score>b.score;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">ssort</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> flag = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span> ; i <= N; i+=<span class="number">2</span>){</span><br><span class="line">        <span class="keyword">if</span>(nodes[i].ability > nodes[i+<span class="number">1</span>].ability){</span><br><span class="line">            nodes[i].score+=<span class="number">1</span>;</span><br><span class="line">            n1[flag] = nodes[i],n2[flag] = nodes[i+<span class="number">1</span>];</span><br><span class="line">        }<span class="keyword">else</span>{</span><br><span class="line">            nodes[i+<span class="number">1</span>].score+=<span class="number">1</span>;</span><br><span class="line">            n2[flag] = nodes[i],n1[flag] = nodes[i+<span class="number">1</span>];</span><br><span class="line">        }</span><br><span class="line">        flag++;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> f1=<span class="number">1</span>,f2=<span class="number">1</span>,pos=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(pos<=N){</span><br><span class="line">        <span class="keyword">if</span>(f1<=N/<span class="number">2</span>&&f2<=N/<span class="number">2</span>){</span><br><span class="line">            <span class="keyword">if</span>(cmp(n1[f1],n2[f2])){</span><br><span class="line">                nodes[pos++] = n1[f1++];</span><br><span class="line">            }<span class="keyword">else</span>{</span><br><span class="line">                nodes[pos++] = n2[f2++];</span><br><span class="line">            }</span><br><span class="line">        }<span class="keyword">else</span> <span class="keyword">if</span>(f1<=N/<span class="number">2</span>){</span><br><span class="line">            nodes[pos++] = n1[f1++];</span><br><span class="line">        }<span class="keyword">else</span>{</span><br><span class="line">            nodes[pos++] = n2[f2++];</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">cin</span>>>N>>R>>Q;</span><br><span class="line">    N *= <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span> ; i <= N ; i++){</span><br><span class="line">        <span class="built_in">cin</span>>>nodes[i].score;</span><br><span class="line">        nodes[i].id = i;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span> ; i <= N ; i++){</span><br><span class="line">        <span class="built_in">cin</span>>>nodes[i].ability;</span><br><span class="line">    }</span><br><span class="line">    sort(nodes+<span class="number">1</span>,nodes+<span class="number">1</span>+N,cmp);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span> ; i <= R ; i++){</span><br><span class="line">        ssort();</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span><<nodes[Q].id<<<span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="8、P1781-宇宙总统"><a href="#8、P1781-宇宙总统" class="headerlink" title="8、P1781 宇宙总统"></a><a href="https://www.luogu.org/problemnew/show/P1781" target="_blank" rel="noopener">8、P1781 宇宙总统</a></h3><p>分析：大数比较，用字符串，如果字符串长度相同，则按照字典序，反之越长越大。</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="keyword">int</span> N;</span><br><span class="line">    <span class="built_in">cin</span>>>N;</span><br><span class="line">    <span class="built_in">string</span> mx = <span class="string">""</span>;</span><br><span class="line">    <span class="keyword">int</span> id=<span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span> ; i <= N ; i++){</span><br><span class="line">        <span class="built_in">string</span> in;</span><br><span class="line">        <span class="built_in">cin</span>>>in;</span><br><span class="line">        <span class="keyword">if</span>(in.size()>mx.size()){</span><br><span class="line">            mx = in,id=i;</span><br><span class="line">        }<span class="keyword">else</span>{</span><br><span class="line">            <span class="keyword">if</span>(in.size()==mx.size()&&in>mx){</span><br><span class="line">                mx = in,id=i;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span><<id<<<span class="built_in">endl</span><<mx<<<span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;常规题&quot;&gt;&lt;a href=&quot;#常规题&quot; class=&quot;headerlink&quot; title=&quot;常规题&quot;&gt;&lt;/a&gt;常规题&lt;/h2&gt;&lt;h3 id=&quot;1、P1177-【模板】快速排序&quot;&gt;&lt;a href=&quot;#1、P1177-【模板】快速排序&quot; class=&quot;headerlink&quot; title=&quot;1、P1177 【模板】快速排序&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://www.luogu.org/problemnew/show/P1177&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;1、P1177 【模板】快速排序&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;分析：要求写快速排序，我很懒，就直接调用了sort函数(其实是不会)。&lt;/p&gt;
&lt;figure class=&quot;highlight c++&quot;&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;meta-string&quot;&gt;&lt;bits/stdc++.h&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;namespace&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;std&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; maxn = &lt;span class=&quot;number&quot;&gt;100000&lt;/span&gt;+&lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; f[maxn],N;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;scanf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;%d&quot;&lt;/span&gt;,&amp;N);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; i = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; ; i &lt;= N ; i++){&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;scanf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;%d&quot;&lt;/span&gt;,&amp;f[i]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    sort(f+&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,f+&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;+N);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; i = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; ; i &lt;= N ; i++){&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;%d &quot;&lt;/span&gt;,f[i]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    system(&lt;span class=&quot;string&quot;&gt;&quot;pause&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="Konjak Records" scheme="http://yoursite.com/categories/Konjak-Records/"/>
    
    
      <category term="排序" scheme="http://yoursite.com/tags/%E6%8E%92%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>Konjak Record——2019.04.30</title>
    <link href="http://yoursite.com/2019/04/30/Algorithm0430/"/>
    <id>http://yoursite.com/2019/04/30/Algorithm0430/</id>
    <published>2019-04-30T06:29:16.296Z</published>
    <updated>2019-04-30T12:52:19.220Z</updated>
    
    <content type="html"><![CDATA[<h2 id="常规题"><a href="#常规题" class="headerlink" title="常规题"></a>常规题</h2><h3 id="1、P1855-榨取kkksc03"><a href="#1、P1855-榨取kkksc03" class="headerlink" title="1、P1855 榨取kkksc03"></a><a href="https://www.luogu.org/problemnew/show/P1855" target="_blank" rel="noopener">1、P1855 榨取kkksc03</a></h3><p>分析：01背包的变形，多加一个维度就可以了</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">105</span>, maxm = <span class="number">205</span>;</span><br><span class="line"><span class="keyword">int</span> dp[maxm][maxm], m[maxm], t[maxm], N, M, T;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>, &N, &M, &T);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &m[i], &t[i]);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = M; j >= m[i]; j--) {</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k = T; k >= t[i]; k--) {</span><br><span class="line">                dp[j][k] = max(dp[j][k], dp[j - m[i]][k - t[i]] + <span class="number">1</span>);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, dp[M][T]);</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><a id="more"></a><h2 id="错题"><a href="#错题" class="headerlink" title="错题"></a>错题</h2><h3 id="2、P1736-创意吃鱼法"><a href="#2、P1736-创意吃鱼法" class="headerlink" title="2、P1736 创意吃鱼法"></a><a href="https://www.luogu.org/problemnew/show/P1736" target="_blank" rel="noopener">2、P1736 创意吃鱼法</a></h3><p>分析：这个题调试了一个下午才AC，还是太菜了。使用的是悬线法,注意对角线共两个方向，此外必须保证除了对角线为1以外其他都为0。具体细节见代码。代码跑的很慢，复杂度是O(N2),而且我是大常数男人。</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">2505</span>;</span><br><span class="line"><span class="keyword">int</span> N, M;</span><br><span class="line"><span class="keyword">short</span> chess[maxn][maxn], l[maxn][maxn], L[maxn][maxn];</span><br><span class="line"><span class="keyword">short</span> r[maxn][maxn], R[maxn][maxn], u[maxn][maxn], U[maxn][maxn], f[maxn][maxn], ans;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &N, &M);</span><br><span class="line">    <span class="built_in">memset</span>(chess, <span class="number">-1</span>, <span class="keyword">sizeof</span>(chess));</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= M; j++) {</span><br><span class="line">            <span class="built_in">cin</span> >> chess[i][j];</span><br><span class="line">            l[i][j] = j, r[i][j] = j, u[i][j] = i;</span><br><span class="line">            L[i][j] = R[i][j] = j, U[i][j] = i;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= M; j++) {</span><br><span class="line">            <span class="keyword">if</span> (chess[i][j - <span class="number">1</span>] == <span class="number">0</span>) {</span><br><span class="line">                l[i][j] = l[i][j - <span class="number">1</span>];</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (chess[i - <span class="number">1</span>][j] == <span class="number">0</span>) {</span><br><span class="line">                u[i][j] = u[i - <span class="number">1</span>][j];</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = M; j >= <span class="number">1</span>; j--) {</span><br><span class="line">            <span class="keyword">if</span> (chess[i][j + <span class="number">1</span>] == <span class="number">0</span>) {</span><br><span class="line">                r[i][j] = r[i][j + <span class="number">1</span>];</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j <= M; j++) {</span><br><span class="line">            <span class="keyword">if</span> (chess[i][j]) {</span><br><span class="line">                <span class="keyword">if</span> (chess[i - <span class="number">1</span>][j - <span class="number">1</span>] == <span class="number">0</span>) {</span><br><span class="line">                    f[i][j] = <span class="number">1</span>;</span><br><span class="line">                    ans = max(ans, (<span class="keyword">short</span>)<span class="number">1</span>);</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">int</span> ml = max(L[i - <span class="number">1</span>][j - <span class="number">1</span>], l[i][j]);</span><br><span class="line">                <span class="keyword">int</span> mu = max(U[i - <span class="number">1</span>][j - <span class="number">1</span>], u[i][j]);</span><br><span class="line">                f[i][j] = f[i - <span class="number">1</span>][j - <span class="number">1</span>] + <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">int</span> len1 = j - ml + <span class="number">1</span>, len2 = i - mu + <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">int</span> tmp = min(min((<span class="keyword">short</span>)len1, (<span class="keyword">short</span>)len2), f[i][j]);</span><br><span class="line">                ans = max((<span class="keyword">short</span>)tmp, ans);</span><br><span class="line">                L[i][j] = j - tmp + <span class="number">1</span>, U[i][j] = i - tmp + <span class="number">1</span>;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">memset</span>(f, <span class="number">0</span>, <span class="keyword">sizeof</span>(f)), <span class="built_in">memset</span>(U, <span class="number">0</span>, <span class="keyword">sizeof</span>(U));</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = M; j >= <span class="number">1</span>; j--) {</span><br><span class="line">            <span class="keyword">if</span> (chess[i][j]) {</span><br><span class="line">                <span class="keyword">if</span> (chess[i - <span class="number">1</span>][j + <span class="number">1</span>] == <span class="number">0</span>) {</span><br><span class="line">                    f[i][j] = <span class="number">1</span>;</span><br><span class="line">                    ans = max(ans, (<span class="keyword">short</span>)<span class="number">1</span>);</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">int</span> mr = min(r[i][j], R[i - <span class="number">1</span>][j + <span class="number">1</span>]);</span><br><span class="line">                <span class="keyword">int</span> mu = max(U[i - <span class="number">1</span>][j + <span class="number">1</span>], u[i][j]);</span><br><span class="line">                f[i][j] = f[i - <span class="number">1</span>][j + <span class="number">1</span>] + <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">int</span> len1 = mr - j + <span class="number">1</span>, len2 = i - mu + <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">int</span> tmp = min(min((<span class="keyword">short</span>)len1, (<span class="keyword">short</span>)len2), f[i][j]);</span><br><span class="line">                ans = max((<span class="keyword">short</span>)ans, (<span class="keyword">short</span>)tmp);</span><br><span class="line">                R[i][j] = tmp + j - <span class="number">1</span>, U[i][j] = i - tmp + <span class="number">1</span>;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span> << ans << <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="3、P1541-乌龟棋"><a href="#3、P1541-乌龟棋" class="headerlink" title="3、P1541 乌龟棋"></a><a href="https://www.luogu.org/problemnew/show/P1541" target="_blank" rel="noopener">3、P1541 乌龟棋</a></h3><p>分析:这道题思路是有的，但是复杂度比别人多了一个N，还是太菜了。</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//我的状态转移方程：</span></span><br><span class="line"></span><br><span class="line">f[i][j][k][l][m] = max(f[i-x][j-a1][k-a2][l-a3][n-a4]) + v[i]</span><br><span class="line"></span><br><span class="line"><span class="comment">//x取1,2,3,4。[a1,a2,a3,a4]是一个Onehot向量</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// i完全可以去掉，j * 1 + k * 2 + l * 3 + m * 4 + 1就是到达的位置</span></span><br></pre></td></tr></tbody></table></figure><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">350</span> + <span class="number">10</span>, inf = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> dp[<span class="number">40</span>][<span class="number">40</span>][<span class="number">40</span>][<span class="number">40</span>], N, f[maxn], M, cache[<span class="number">5</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &N, &M);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &f[i]);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= M; i++) {</span><br><span class="line">        <span class="keyword">int</span> tmp;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &tmp);</span><br><span class="line">        cache[tmp]++;</span><br><span class="line">    }</span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>][<span class="number">0</span>] = f[<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i <= cache[<span class="number">1</span>]; i++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j <= cache[<span class="number">2</span>]; j++) {</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k <= cache[<span class="number">3</span>]; k++) {</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> l = <span class="number">0</span>; l <= cache[<span class="number">4</span>]; l++) {</span><br><span class="line">                    <span class="keyword">int</span> x = i + j * <span class="number">2</span> + k * <span class="number">3</span> + l * <span class="number">4</span> + <span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">if</span> (i != <span class="number">0</span>)</span><br><span class="line">                        dp[i][j][k][l] = max(dp[i - <span class="number">1</span>][j][k][l] + f[x], dp[i][j][k][l]);</span><br><span class="line">                    <span class="keyword">if</span> (j != <span class="number">0</span>)</span><br><span class="line">                        dp[i][j][k][l] = max(dp[i][j - <span class="number">1</span>][k][l] + f[x], dp[i][j][k][l]);</span><br><span class="line">                    <span class="keyword">if</span> (k != <span class="number">0</span>)</span><br><span class="line">                        dp[i][j][k][l] = max(dp[i][j][k - <span class="number">1</span>][l] + f[x], dp[i][j][k][l]);</span><br><span class="line">                    <span class="keyword">if</span> (l != <span class="number">0</span>)</span><br><span class="line">                        dp[i][j][k][l] = max(dp[i][j][k][l - <span class="number">1</span>] + f[x], dp[i][j][k][l]);</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, dp[cache[<span class="number">1</span>]][cache[<span class="number">2</span>]][cache[<span class="number">3</span>]][cache[<span class="number">4</span>]]);</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="4、P1052-过河"><a href="#4、P1052-过河" class="headerlink" title="4、P1052 过河"></a><a href="https://www.luogu.org/problemnew/show/P1052" target="_blank" rel="noopener">4、P1052 过河</a></h3><p>分析：这是我第三次做错这道题了，需要思考的是路径压缩，因为L<1e9,范围太大了，而石子只有不到100个，中间很多路径是空白的，所以无论如何跳，石子数都不会变化。<br>px + (p+1)y = s,当s>=p(p+1)时有正整数解（一定有整数解，因为p,p+1互质），根据这个结论，如果两个石子之间的距离大于90，则将它们缩短为90，代码如下：</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">100</span> * <span class="number">110</span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">px+(p+1)y = s，因为p和p+1互质，所以方程一定有解，且当s>=p(p+1)时一定有正整数解,</span></span><br><span class="line"><span class="comment">所以当路径长度大于90，则把路径压缩为90</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">int</span> S, T, M, f[maxn], dp[maxn], pos[<span class="number">110</span>], L;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">cin</span> >> L >> S >> T >> M;</span><br><span class="line">    <span class="keyword">if</span> (S == T) {</span><br><span class="line">        <span class="keyword">int</span> cnt = <span class="number">0</span>, tmp;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= M; i++) {</span><br><span class="line">            <span class="built_in">cin</span> >> tmp;</span><br><span class="line">            <span class="keyword">if</span> (tmp % S == <span class="number">0</span>) {</span><br><span class="line">                cnt++;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, cnt);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= M; i++) {</span><br><span class="line">        <span class="built_in">cin</span> >> pos[i];</span><br><span class="line">    }</span><br><span class="line">    sort(pos + <span class="number">1</span>, pos + <span class="number">1</span> + M);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= M; i++) {</span><br><span class="line">        <span class="keyword">int</span> tmp = min(<span class="number">91</span>, pos[i] - pos[i - <span class="number">1</span>]);</span><br><span class="line">        sum += tmp;</span><br><span class="line">        f[sum] = <span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">    sum += <span class="number">91</span>;</span><br><span class="line">    <span class="built_in">memset</span>(dp, <span class="number">0x3f</span>, <span class="keyword">sizeof</span>(dp));</span><br><span class="line">    dp[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= sum; i++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> s = S; s <= T; s++) {</span><br><span class="line">            <span class="keyword">if</span> (i - s >= <span class="number">0</span>) {</span><br><span class="line">                dp[i] = min(dp[i - s], dp[i]);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        dp[i] += f[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, dp[sum]);</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="5、P1156-垃圾陷阱"><a href="#5、P1156-垃圾陷阱" class="headerlink" title="5、P1156 垃圾陷阱"></a><a href="https://www.luogu.org/problemnew/show/P1156" target="_blank" rel="noopener">5、P1156 垃圾陷阱</a></h3><p>分析：细节很多，例如使用哪几个维度dp，dp中间提前退出，状态转移的条件。</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxh = <span class="number">105</span>;</span><br><span class="line"><span class="keyword">int</span> dp[maxh][maxh], D, G;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> {</span></span><br><span class="line">    <span class="keyword">int</span> t, f, h;</span><br><span class="line">};</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(<span class="keyword">const</span> Node& a, <span class="keyword">const</span> Node& b)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">return</span> a.t < b.t;</span><br><span class="line">}</span><br><span class="line">Node nodes[maxh];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">cin</span> >> D >> G;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= G; i++) {</span><br><span class="line">        <span class="built_in">cin</span> >> nodes[i].t >> nodes[i].f >> nodes[i].h;</span><br><span class="line">    }</span><br><span class="line">    sort(nodes + <span class="number">1</span>, nodes + <span class="number">1</span> + G, cmp);</span><br><span class="line">    <span class="built_in">memset</span>(dp, <span class="number">-1</span>, <span class="keyword">sizeof</span>(dp));</span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= G; i++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j <= D; j++) {</span><br><span class="line">            <span class="keyword">int</span> pay = nodes[i].t - nodes[i - <span class="number">1</span>].t;</span><br><span class="line">            <span class="keyword">if</span> (dp[i - <span class="number">1</span>][j] >= pay && j + nodes[i].h >= D) {</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, nodes[i].t);</span><br><span class="line">                system(<span class="string">"pause"</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (dp[i - <span class="number">1</span>][j] >= pay) {</span><br><span class="line">                dp[i][j] = dp[i - <span class="number">1</span>][j] - pay + nodes[i].f;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (j >= nodes[i].h && dp[i - <span class="number">1</span>][j - nodes[i].h] >= pay) {</span><br><span class="line">                dp[i][j] = max(dp[i][j], dp[i - <span class="number">1</span>][j - nodes[i].h] - pay);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> maxt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i <= G; i++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j <= D; j++) {</span><br><span class="line">            <span class="keyword">if</span> (dp[i][j] > <span class="number">0</span>) {</span><br><span class="line">                maxt = max(maxt, dp[i][j] + nodes[i].t);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, maxt);</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;常规题&quot;&gt;&lt;a href=&quot;#常规题&quot; class=&quot;headerlink&quot; title=&quot;常规题&quot;&gt;&lt;/a&gt;常规题&lt;/h2&gt;&lt;h3 id=&quot;1、P1855-榨取kkksc03&quot;&gt;&lt;a href=&quot;#1、P1855-榨取kkksc03&quot; class=&quot;headerlink&quot; title=&quot;1、P1855 榨取kkksc03&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://www.luogu.org/problemnew/show/P1855&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;1、P1855 榨取kkksc03&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;分析：01背包的变形，多加一个维度就可以了&lt;/p&gt;
&lt;figure class=&quot;highlight c++&quot;&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;meta-string&quot;&gt;&lt;bits/stdc++.h&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;namespace&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;std&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; maxn = &lt;span class=&quot;number&quot;&gt;105&lt;/span&gt;, maxm = &lt;span class=&quot;number&quot;&gt;205&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; dp[maxm][maxm], m[maxm], t[maxm], N, M, T;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;/span&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;scanf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;%d %d %d&quot;&lt;/span&gt;, &amp;N, &amp;M, &amp;T);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; i = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;; i &lt;= N; i++) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;scanf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;%d %d&quot;&lt;/span&gt;, &amp;m[i], &amp;t[i]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; i = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;; i &lt;= N; i++) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; j = M; j &gt;= m[i]; j--) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; k = T; k &gt;= t[i]; k--) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                dp[j][k] = max(dp[j][k], dp[j - m[i]][k - t[i]] + &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    }&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;%d\n&quot;&lt;/span&gt;, dp[M][T]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    system(&lt;span class=&quot;string&quot;&gt;&quot;pause&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="Konjak Records" scheme="http://yoursite.com/categories/Konjak-Records/"/>
    
    
      <category term="动态规划" scheme="http://yoursite.com/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
    
  </entry>
  
  <entry>
    <title>Konjak Record——2019.04.29</title>
    <link href="http://yoursite.com/2019/04/29/Algorithm0429/"/>
    <id>http://yoursite.com/2019/04/29/Algorithm0429/</id>
    <published>2019-04-29T06:38:36.135Z</published>
    <updated>2019-04-29T11:27:18.615Z</updated>
    
    <content type="html"><![CDATA[<h2 id="常规题"><a href="#常规题" class="headerlink" title="常规题"></a>常规题</h2><h3 id="1、P1140-相似基因"><a href="#1、P1140-相似基因" class="headerlink" title="1、P1140 相似基因"></a><a href="https://www.luogu.org/problemnew/show/P1140" target="_blank" rel="noopener">1、P1140 相似基因</a></h3><p>分析：LCS的变形，水题</p><a id="more"></a><h3 id="2、P1282-多米诺骨牌"><a href="#2、P1282-多米诺骨牌" class="headerlink" title="2、P1282 多米诺骨牌"></a><a href="https://www.luogu.org/problemnew/show/P1282" target="_blank" rel="noopener">2、P1282 多米诺骨牌</a></h3><p>分析：背包的变形，记录上下差值为M时的最小翻转次数，因为有正负，所以多开一维表达正负数。</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sub = up[i] - down[i]</span><br><span class="line">dp[i][j] = min(dp[i - <span class="number">1</span>][j - sub],dp[i - <span class="number">1</span>][j + sub] + <span class="number">1</span>)</span><br><span class="line">-maxm < j < maxm,<span class="number">1</span> <= i <= maxn</span><br></pre></td></tr></tbody></table></figure><h3 id="3、P1508-Likecloud-吃、吃、吃"><a href="#3、P1508-Likecloud-吃、吃、吃" class="headerlink" title="3、P1508 Likecloud-吃、吃、吃"></a><a href="https://www.luogu.org/problemnew/show/P1508" target="_blank" rel="noopener">3、P1508 Likecloud-吃、吃、吃</a></h3><p>分析:无敌水题。</p><h3 id="4、P1387-最大正方形"><a href="#4、P1387-最大正方形" class="headerlink" title="4、P1387 最大正方形"></a><a href="https://www.luogu.org/problemnew/show/P1387" target="_blank" rel="noopener">4、P1387 最大正方形</a></h3><p>分析:悬线法，极大子矩形。</p><h2 id="错题"><a href="#错题" class="headerlink" title="错题"></a>错题</h2><h3 id="5、P1880-NOI1995-石子合并"><a href="#5、P1880-NOI1995-石子合并" class="headerlink" title="5、P1880 [NOI1995]石子合并"></a><a href="https://www.luogu.org/problemnew/show/P1880" target="_blank" rel="noopener">5、P1880 [NOI1995]石子合并</a></h3><p>状态转移方程如下：</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dp[s][e] = max(dp[s][k] + dp[k+<span class="number">1</span>][e] + sum[e] - sum[s<span class="number">-1</span>],dp[s][e])</span><br></pre></td></tr></tbody></table></figure><p>1、考虑操场是环状的，因此需要破环成链，链的长度2<em>N，枚举起点s时一定不要只枚举到N，需要枚举到2</em>N。<br>2、最后计算答案时取dp[s][s+N-1]中的最大/最小值，此时枚举s从1到N。</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">200</span> + <span class="number">5</span>, inf = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">int</span> dp[maxn][maxn], sum[maxn], N, f[maxn], mx = <span class="number">0</span>, mn = inf;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &N);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &f[i]);</span><br><span class="line">        f[i + N] = f[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= <span class="number">2</span> * N; i++) {</span><br><span class="line">        sum[i] = sum[i - <span class="number">1</span>] + f[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">//O(n3)</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> len = <span class="number">1</span>; len < N; len++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> s = <span class="number">1</span>; s <= <span class="number">2</span> * N; s++) {</span><br><span class="line">            <span class="keyword">int</span> e = s + len;</span><br><span class="line">            <span class="keyword">if</span> (e > <span class="number">2</span> * N) {</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k = s; k < e; k++) {</span><br><span class="line">                dp[s][e] = max(dp[s][k] + dp[k + <span class="number">1</span>][e] + sum[e] - sum[s - <span class="number">1</span>], dp[s][e]);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        mx = max(mx, dp[i][i + N - <span class="number">1</span>]);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">memset</span>(dp, <span class="number">0x3f</span>, <span class="keyword">sizeof</span>(dp));</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i <= <span class="number">2</span> * N; i++) {</span><br><span class="line">        dp[i][i] = <span class="number">0</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">//O(n3)</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> len = <span class="number">1</span>; len < N; len++) {</span><br><span class="line">        <span class="comment">//注意s枚举范围</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> s = <span class="number">1</span>; s <= <span class="number">2</span> * N; s++) {</span><br><span class="line">            <span class="keyword">int</span> e = s + len;</span><br><span class="line">            <span class="keyword">if</span> (e > <span class="number">2</span> * N) {</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k = s; k < e; k++) {</span><br><span class="line">                dp[s][e] = min(dp[s][k] + dp[k + <span class="number">1</span>][e] + sum[e] - sum[s - <span class="number">1</span>], dp[s][e]);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        mn = min(mn, dp[i][i + N - <span class="number">1</span>]);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n%d\n"</span>, mn, mx);</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="6、P1417-烹调方案"><a href="#6、P1417-烹调方案" class="headerlink" title="6、P1417 烹调方案"></a><a href="https://www.luogu.org/problemnew/show/P1417" target="_blank" rel="noopener">6、P1417 烹调方案</a></h3><p>分析：01背包的变形，关键是01背包取的先后顺序不影响最终结果，所以可以从1-N顺序dp，但是这道题价值与时间相关，所以需要做一个排序。假设当前时间为t，有两件物品x,y，则分别计算xy和yx的价值，可以得到一个结论，按照这个结论对物品进行排序，最后将其当作01背包即可。</p><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string"><bits/stdc++.h></span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">50</span> + <span class="number">10</span>, maxt = <span class="number">100000</span> + <span class="number">10</span>, inf = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> {</span></span><br><span class="line">    ll a, b, t;</span><br><span class="line">};</span><br><span class="line">Node nodes[maxn];</span><br><span class="line">ll N, T;</span><br><span class="line">ll dp[maxt];</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(<span class="keyword">const</span> Node& a, <span class="keyword">const</span> Node& b)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">return</span> a.b * b.t > b.b * a.t;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">cin</span> >> T >> N;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="built_in">cin</span> >> nodes[i].a;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="built_in">cin</span> >> nodes[i].b;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="built_in">cin</span> >> nodes[i].t;</span><br><span class="line">    }</span><br><span class="line">    sort(nodes + <span class="number">1</span>, nodes + <span class="number">1</span> + N, cmp);</span><br><span class="line">    <span class="keyword">for</span> (ll i = <span class="number">1</span>; i <= N; i++) {</span><br><span class="line">        <span class="keyword">for</span> (ll j = T; j >= nodes[i].t; j--) {</span><br><span class="line">            dp[j] = max(dp[j - nodes[i].t] + nodes[i].a - nodes[i].b * j, dp[j]);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> ans = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span> (ll i = <span class="number">1</span>; i <= T; i++) {</span><br><span class="line">        ans = max(ans, dp[i]);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span> << ans << <span class="built_in">endl</span>;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;常规题&quot;&gt;&lt;a href=&quot;#常规题&quot; class=&quot;headerlink&quot; title=&quot;常规题&quot;&gt;&lt;/a&gt;常规题&lt;/h2&gt;&lt;h3 id=&quot;1、P1140-相似基因&quot;&gt;&lt;a href=&quot;#1、P1140-相似基因&quot; class=&quot;headerlink&quot; title=&quot;1、P1140 相似基因&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://www.luogu.org/problemnew/show/P1140&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;1、P1140 相似基因&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;分析：LCS的变形，水题&lt;/p&gt;
    
    </summary>
    
      <category term="Konjak Records" scheme="http://yoursite.com/categories/Konjak-Records/"/>
    
    
      <category term="动态规划" scheme="http://yoursite.com/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
    
  </entry>
  
  <entry>
    <title>Chtholly Nota Seniorious</title>
    <link href="http://yoursite.com/2019/04/26/Chtholly%20Nota%20Seniorious/"/>
    <id>http://yoursite.com/2019/04/26/Chtholly Nota Seniorious/</id>
    <published>2019-04-26T05:29:26.974Z</published>
    <updated>2019-04-26T07:21:56.264Z</updated>
    
    <content type="html"><![CDATA[<h4 id="C"><a href="#C" class="headerlink" title="C++"></a><a href="https://baike.baidu.com/item/%E7%8F%82%E6%9C%B5%E8%8E%89%C2%B7%E8%AF%BA%E5%A1%94%C2%B7%E7%91%9F%E5%B0%BC%E6%AC%A7%E9%87%8C%E6%96%AF/20617326?fr=aladdin" target="_blank" rel="noopener">C++</a></h4><figure class="highlight c++"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cout</span> << <span class="string">"Chtholly Nota Seniorious"</span> << <span class="built_in">endl</span>;</span><br></pre></td></tr></tbody></table></figure><p><img src="http://oduesp.github.io/images/keduoli.jpg" alt="keduoli"><br><a id="more"></a></p><h4 id="Java"><a href="#Java" class="headerlink" title="Java"></a><a href="https://baike.baidu.com/item/%E7%8F%82%E6%9C%B5%E8%8E%89%C2%B7%E8%AF%BA%E5%A1%94%C2%B7%E7%91%9F%E5%B0%BC%E6%AC%A7%E9%87%8C%E6%96%AF/20617326?fr=aladdin" target="_blank" rel="noopener">Java</a></h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(<span class="string">"Chtholly Nota Seniorious"</span>)</span><br></pre></td></tr></tbody></table></figure><p><img src="http://oduesp.github.io/images/sci.jpg" alt="sci"></p><h4 id="C-1"><a href="#C-1" class="headerlink" title="C"></a><a href="https://baike.baidu.com/item/%E7%8F%82%E6%9C%B5%E8%8E%89%C2%B7%E8%AF%BA%E5%A1%94%C2%B7%E7%91%9F%E5%B0%BC%E6%AC%A7%E9%87%8C%E6%96%AF/20617326?fr=aladdin" target="_blank" rel="noopener">C</a></h4><figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">printf</span>(<span class="string">"Chtholly Nota Seniorious\n"</span>);</span><br></pre></td></tr></tbody></table></figure><p><img src="http://oduesp.github.io/images/kdl.jpg" alt="kdl"></p><h4 id="Python"><a href="#Python" class="headerlink" title="Python"></a><a href="https://baike.baidu.com/item/%E7%8F%82%E6%9C%B5%E8%8E%89%C2%B7%E8%AF%BA%E5%A1%94%C2%B7%E7%91%9F%E5%B0%BC%E6%AC%A7%E9%87%8C%E6%96%AF/20617326?fr=aladdin" target="_blank" rel="noopener">Python</a></h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">"Chtholly Nota Seniorious"</span>)</span><br></pre></td></tr></tbody></table></figure><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;C&quot;&gt;&lt;a href=&quot;#C&quot; class=&quot;headerlink&quot; title=&quot;C++&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://baike.baidu.com/item/%E7%8F%82%E6%9C%B5%E8%8E%89%C2%B7%E8%AF%BA%E5%A1%94%C2%B7%E7%91%9F%E5%B0%BC%E6%AC%A7%E9%87%8C%E6%96%AF/20617326?fr=aladdin&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;C++&lt;/a&gt;&lt;/h4&gt;&lt;figure class=&quot;highlight c++&quot;&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cout&lt;/span&gt; &lt;&lt; &lt;span class=&quot;string&quot;&gt;&quot;Chtholly Nota Seniorious&quot;&lt;/span&gt; &lt;&lt; &lt;span class=&quot;built_in&quot;&gt;endl&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img src=&quot;http://oduesp.github.io/images/keduoli.jpg&quot; alt=&quot;keduoli&quot;&gt;&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="科学" scheme="http://yoursite.com/categories/%E7%A7%91%E5%AD%A6/"/>
    
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://yoursite.com/2019/04/25/hello-world/"/>
    <id>http://yoursite.com/2019/04/25/hello-world/</id>
    <published>2019-04-25T03:08:59.435Z</published>
    <updated>2019-04-26T04:29:16.111Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><a id="more"></a><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></tbody></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></tbody></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></tbody></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></tbody></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;documentation&lt;/a&gt; for more info. If you get any problems when using Hexo, you can find the answer in &lt;a href=&quot;https://hexo.io/docs/troubleshooting.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;troubleshooting&lt;/a&gt; or you can ask me on &lt;a href=&quot;https://github.com/hexojs/hexo/issues&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;GitHub&lt;/a&gt;.&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
</feed>
